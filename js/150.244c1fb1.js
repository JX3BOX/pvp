"use strict";(self["webpackChunkpvp"]=self["webpackChunkpvp"]||[]).push([[150],{88150:function(a,e,n){n.r(e),n.d(e,{default:function(){return Ce}});var t=n(66252);const o={class:"m-pvp-sandbox-content"},i={class:"m-extend"},s={class:"m-strategy-box"};function p(a,e,n,p,l,r){const u=(0,t.up)("SandboxIndex"),g=(0,t.up)("SandboxIntro"),m=(0,t.up)("Collection"),c=(0,t.up)("el-icon"),h=(0,t.up)("SandboxHandbook"),d=(0,t.up)("el-tab-pane"),x=(0,t.up)("DataAnalysis"),f=(0,t.up)("SandboxLogs"),L=(0,t.up)("el-tabs"),b=(0,t.up)("ListLayout");return(0,t.wg)(),(0,t.j4)(b,{"has-right":!1},{default:(0,t.w5)((()=>[(0,t._)("div",o,[(0,t.Wm)(u,{onSandboxChangeKey:r.onSandboxLogs},null,8,["onSandboxChangeKey"]),(0,t._)("div",i,[(0,t._)("div",s,[(0,t.Wm)(g)]),(0,t.Wm)(L,{class:"m-tabs",modelValue:a.view,"onUpdate:modelValue":e[0]||(e[0]=e=>a.view=e)},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{label:"沙盘攻略",name:"index"},{label:(0,t.w5)((()=>[(0,t.Wm)(c,null,{default:(0,t.w5)((()=>[(0,t.Wm)(m)])),_:1}),e[1]||(e[1]=(0,t._)("b",null,"沙盘攻略",-1))])),default:(0,t.w5)((()=>[(0,t.Wm)(h)])),_:1}),(0,t.Wm)(d,{label:"沙盘记录",name:"logs"},{label:(0,t.w5)((()=>[(0,t.Wm)(c,null,{default:(0,t.w5)((()=>[(0,t.Wm)(x)])),_:1}),e[2]||(e[2]=(0,t._)("b",null,"沙盘记录",-1))])),default:(0,t.w5)((()=>[(0,t.Wm)(f,{sandboxData:a.sandboxLogsData},null,8,["sandboxData"])])),_:1})])),_:1},8,["modelValue"])])])])),_:1})}var l=n(78304),r=n(90607);const u={class:"m-pvp-sandbox__content",ref:"sandboxMap"},g={class:"m-sandbox-map"};function m(a,e,n,o,i,s){const p=(0,t.up)("sandboxSearch"),l=(0,t.up)("sandboxMaps"),r=(0,t.up)("sandboxLog");return(0,t.wg)(),(0,t.iD)("div",u,[(0,t.Wm)(p,{servers:a.servers,onSandboxChange:s.onSandbox},null,8,["servers","onSandboxChange"]),(0,t._)("div",g,[(0,t.Wm)(l,{maps:a.sandMaps,camp:a.camp,route:a.route,onMapClick:s.mapClick},null,8,["maps","camp","route","onMapClick"]),a.showLog?((0,t.wg)(),(0,t.j4)(r,{key:0,item:a.itemLog},null,8,["item"])):(0,t.kq)("",!0)]),a.showLog?((0,t.wg)(),(0,t.iD)("div",{key:0,class:"m-mask",onClick:e[0]||(e[0]=(...a)=>s.closeLog&&s.closeLog(...a))})):(0,t.kq)("",!0)],512)}var c=n(60490),h=n(3577);const d={class:"m-sandbox-search"},x=["onClick"];function f(a,e,n,o,i,s){const p=(0,t.up)("el-switch"),l=(0,t.up)("el-option"),r=(0,t.up)("el-select");return(0,t.wg)(),(0,t.iD)("div",d,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(a.camps,((e,n)=>((0,t.wg)(),(0,t.iD)("span",{class:"u-camp",key:n,onClick:a=>s.changeCamp(n)},[(0,t._)("b",{class:(0,h.C_)(n==a.camp?"active":"")},null,2),(0,t._)("span",null,(0,h.zw)(e),1)],8,x)))),128)),(0,t.Wm)(p,{class:"u-route",modelValue:a.route,"onUpdate:modelValue":e[0]||(e[0]=e=>a.route=e),"inactive-text":"进攻路线"},null,8,["modelValue"]),(0,t.Wm)(r,{class:"u-server",modelValue:a.server,"onUpdate:modelValue":e[1]||(e[1]=e=>a.server=e)},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(n.servers,(a=>((0,t.wg)(),(0,t.j4)(l,{key:a,label:a,value:a},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])}var L={name:"SandboxSearch",props:["servers"],data:function(){return{server:this.servers[0]||"",camp:"haoqi",camps:{haoqi:"浩气盟",eren:"恶人谷"},route:!0}},computed:{serverData:function(){return{server:this.server,route:this.route,camp:this.camp}}},watch:{serverData:{handler(){this.toEmit()},deep:!0,immediate:!0}},methods:{changeCamp(a){this.camp=a},toEmit:function(){this.$emit("sandboxChange",this.serverData)}}},b=n(83744);const v=(0,b.Z)(L,[["render",f]]);var y=v,k=n(18371);function _(a){return(0,k.c)().get("/api/sandmap",{params:a}).then((a=>a.data))}function w(a=1,e=1){return(0,k.Ac)().get(`/api/sandmap/${a}/castle/${e}/logs`).then((a=>a.data))}function S(a){return(0,k.nj)().get("/api/cms/posts",{params:a}).then((a=>a.data.data.list))}const D={class:"m-sandboxMap"},M=["src"],H=["src"],W=["src"],P=["onClick","onMousemove"],C=["src"],Y=["src"],B=["src"],G=["src"],Z={key:0,class:"u-box"},F=["src"],K={class:"u-txt"},J={class:"u-line"},Q={class:"u-camp"},q={class:"u-line"};function X(a,e,n,o,i,s){var p,l;const r=(0,t.up)("el-popover");return(0,t.wg)(),(0,t.iD)("div",D,[e[5]||(e[5]=(0,t._)("div",{class:"u-mapLine"},null,-1)),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(a.camps,(a=>((0,t.wg)(),(0,t.iD)("div",{key:a.key},[(0,t._)("img",{class:"u-pic",src:s.imgPath(a.id,a.name,"pic"),style:(0,h.j5)(s.positionStyle(a.name,"pic"))},null,12,M),(0,t._)("img",{class:"u-icon",src:s.imgPath(a.key,a.name,"camp"),style:(0,h.j5)([s.positionStyle(a.name,"icon"),{cursor:"default"}])},null,12,H),(0,t._)("div",{class:"u-name",style:(0,h.j5)(s.positionStyle(a.name,"name"))},(0,h.zw)(a.names),5)])))),128)),n.maps.list&&n.maps.list.length>0?((0,t.wg)(!0),(0,t.iD)(t.HY,{key:0},(0,t.Ko)(n.maps.list,(a=>((0,t.wg)(),(0,t.iD)("div",{key:a.id},[(0,t._)("img",{class:"u-pic",src:s.imgPath(a.id,a.camp,"pic"),style:(0,h.j5)(s.positionStyle(a.name_pinyin,"pic"))},null,12,W),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(n.maps.list,((a,n)=>((0,t.wg)(),(0,t.iD)("div",{class:"u-icon",style:(0,h.j5)(s.positionStyle(a.name_pinyin,"icon")),key:n},[(0,t._)("div",{onClick:e=>s.showLog(a),ref_for:!0,ref:e=>s.setRefs(e,a),onMousemove:e=>s.showPopover(a),onMouseleave:e[0]||(e[0]=(...a)=>s.hidePopover&&s.hidePopover(...a))},[(0,t._)("img",{src:s.imgPath(a.id,a.camp,"icon")},null,8,C)],40,P)],4)))),128)),(0,t._)("div",{class:"u-name",style:(0,h.j5)(s.positionStyle(a.name_pinyin,"name"))},(0,h.zw)(a.name),5)])))),128)):(0,t.kq)("",!0),n.maps.detail&&n.maps.detail.length?((0,t.wg)(!0),(0,t.iD)(t.HY,{key:1},(0,t.Ko)(n.maps.detail,(a=>((0,t.wg)(),(0,t.iD)("div",{class:"detail",key:a.id},[(0,t._)("img",{class:"u-camps",src:s.imgPath(a.name_pinyin,n.camp,"camp"),style:(0,h.j5)(s.positionStyle(a.name_pinyin,"camp"))},null,12,Y)])))),128)):(0,t.kq)("",!0),n.route?((0,t.wg)(),(0,t.iD)(t.HY,{key:2},[null!==(p=s.attackPath.castle)&&void 0!==p&&p.length?((0,t.wg)(!0),(0,t.iD)(t.HY,{key:0},(0,t.Ko)(s.attackPath.castle,(([a,e],o)=>((0,t.wg)(),(0,t.iD)("div",{key:o},[(0,t._)("img",{class:"u-attacks",src:s.imgPath(null,n.camp,"arr"),style:(0,h.j5)(s.positionStyle(a,"arr",e))},null,12,B)])))),128)):(0,t.kq)("",!0),null!==(l=s.attackPath.map)&&void 0!==l&&l.length?((0,t.wg)(!0),(0,t.iD)(t.HY,{key:1},(0,t.Ko)(s.attackPath.map,(([a,e],o)=>((0,t.wg)(),(0,t.iD)("div",{key:o},[(0,t._)("img",{class:"u-attacks",src:s.imgPath(null,n.camp,"attacks"),style:(0,h.j5)(s.positionStyle(a,"attacks",e))},null,12,G)])))),128)):(0,t.kq)("",!0)],64)):(0,t.kq)("",!0),(0,t.Wm)(r,{visible:a.visiblePopover,"onUpdate:visible":e[2]||(e[2]=e=>a.visiblePopover=e),"virtual-ref":a.activeRef,trigger:"manual",width:"240","virtual-triggering":"",placement:"top-start","show-arrow":!1},{default:(0,t.w5)((()=>[a.active?((0,t.wg)(),(0,t.iD)("div",Z,[(0,t._)("img",{src:s.imgPath(a.active.name_pinyin,a.active.camp,"camp")},null,8,F),(0,t._)("div",K,[(0,t._)("div",J,[(0,t._)("span",Q,(0,h.zw)(a.active.name),1)]),(0,t._)("div",q,[e[3]||(e[3]=(0,t._)("span",null,"占领势力：",-1)),(0,t._)("span",{class:(0,h.C_)(a.active.camp)},"【"+(0,h.zw)("haoqi"==a.active.camp?"浩气盟":"恶人谷")+"】",3)])]),(0,t._)("div",{class:"u-log",onClick:e[1]||(e[1]=e=>s.showLog(a.active))},e[4]||(e[4]=[(0,t._)("i",{class:"el-icon-date"},null,-1)]))])):(0,t.kq)("",!0)])),_:1},8,["visible","virtual-ref"])])}n(57658);var R=n(96486),T=n(48565);const{castles:z,maps:j}=T,N=(0,R.groupBy)(z,"map"),V={haoqi:"NanPingShan",eren:"KunLun"},A=(a,e)=>{const n=[];for(const t of a){const o=[];for(const n of a)t.key===n.key||t.neighbors.includes(n.key)&&t.camp==n.camp&&t.camp==e?o.push(1):o.push(0);n.push(o)}return n},E=(a,e)=>{const n=[];for(let t=0;t<a.length;t++){const o=[];for(let n=0;n<e[0].length;n++){let i=0;for(let o=0;o<e.length;o++)i+=a[t][o]*e[o][n];o.push(i)}n.push(o)}return n},I=(a,e)=>{const n=[a];for(let o=1;o<e;o++)n.push(E(n[o-1],a));const t=[];for(let o=0;o<a.length;o++){const e=[];for(let t=0;t<a[0].length;t++){let a=0;for(let i of n)if(i[o][t]>0){e.push(1),a=1;break}a||e.push(0)}t.push(e)}return t},U=(a,e)=>{const n=V[e],t=a.reduce(((a,e)=>(a[e.name_pinyin]=e.camp,a)),{}),o=(0,R.chain)(j).map(((a,e)=>{const n=N[a.key],o={...a,i:e,camp:""};return 1===(0,R.uniq)(n.map((a=>t[a.key]))).length&&(o.camp=t[n[0].key]),o})).keyBy("key").value(),i=A(Object.values(o),e),s=I(i,i.length),p=[],l=[];for(const r of Object.values(o))if(r.camp==e&&0!==s[r.i][o[n].i])for(const a of r.neighbors){const n=o[a];n.camp&&n.camp!=e&&p.push([r.key,a])}for(const r of Object.values(o)){if(r.camp)continue;if((0,R.chain)(z).filter((a=>a.map==r.key)).map((a=>t[a.key])).uniq().value().length<=1)continue;const a=r.neighbors.some((a=>{const t=o[a];return t.camp==e&&s[t.i][o[n].i]>0}));if(a){const a=N[r.key],n=a.find((a=>t[a.key]==e)),o=a.find((a=>t[a.key]!=e));if(!n||!o)continue;l.push([n.key,o.key])}}return{castle:l,map:p}};var $=n(2262),O=n(89847);const aa=O.__imgPath,{placeArr:ea,placeAttacks:na,placeCamp:ta,placeImg:oa,placeName:ia}=n(48565);var sa={name:"SandBoxMaps",props:["maps","camp","route"],data:function(){return{camps:[{id:27,name:"eren",names:"恶人谷",key:"erengu"},{id:25,name:"haoqi",names:"浩气盟",key:"haoqimeng"}],active:"",activeRef:(0,$.iH)(null),visiblePopover:!1,refMap:[]}},computed:{attackPath(){const{map:a,castle:e}=U(this.maps.list,this.camp);return{map:a,castle:e}}},methods:{setRefs:function(a,e){a&&this.refMap.push({ref:a,item:e})},showPopover:function(a){const e=this.refMap.findIndex((e=>e.item.id===a.id));this.activeRef=this.refMap[e].ref,this.active=a,this.visiblePopover=!0},hidePopover:function(){this.visiblePopover=!1},imgPath(a,e,n){switch(n){case"pic":return"haoqi"==e?aa+"image/camp/h"+a+".png":aa+"image/camp/e"+a+".png";case"camp":return aa+"image/camp/"+a+".png";case"icon":return"haoqi"==e?aa+"image/camp/h"+this.icon(a)+".png":aa+"image/camp/e"+this.icon(a)+".png";case"arr":case"attacks":return"haoqi"==e?aa+"image/camp/charr.png":aa+"image/camp/cearr.png";default:return""}},positionStyle(a,e,n){switch(e){case"pic":return oa[a];case"camp":return ta[a];case"icon":return ia[a];case"name":{let{left:e,top:n}=ia[a];return"LinFengBao"!=a&&"WuWangCheng"!=a||(e=this.pixel(e,15)),"eren"!=a&&"haoqi"!=a||(e=this.pixel(e,40)),e=this.pixel(e,45),n=this.pixel(n,-10),{left:e,top:n}}case"attacks":return na[a][n];case"arr":return ea[a][n];default:return"default"}},icon(a){switch(a){case 301:return"_lingfengbao";case 221:return"_wuwangcheng";case 231:case 1031:case 92:case 1002:return"02";case 1392:case 212:case 1012:case 1001:return"03";case 131:case 1042:case 1051:case 351:return"04";case 211:case 1531:return"05";default:return"01"}},pixel(a,e){let n=a.substr(0,a.length-2);return a=+n+e,a+"px"},showLog(a){a.img=aa+"image/camp/"+a.name_pinyin+".png",this.$emit("mapClick",a)}}};const pa=(0,b.Z)(sa,[["render",X]]);var la=pa;const ra={key:0,class:"m-sandbox-log"},ua={class:"m-log-box"},ga={class:"m-box-info"},ma=["src"],ca={class:"u-box"},ha={class:"u-title"},da={class:"u-desc"},xa=["href"],fa={key:0,class:"u-cont",style:{overflow:"auto"}},La={class:"u-line"},ba={class:"u-time"},va={class:"u-line"},ya={class:"u-line"},ka={key:1,class:"u-cont"};function _a(a,e,n,o,i,s){var p;return n.item?((0,t.wg)(),(0,t.iD)("div",ra,[(0,t._)("div",ua,[(0,t._)("div",ga,[(0,t._)("img",{class:"u-img",src:n.item.img},null,8,ma),(0,t._)("div",ca,[(0,t._)("span",ha,(0,h.zw)(n.item.name),1),(0,t._)("span",da,(0,h.zw)(n.item.desc||"暂无介绍"),1),(0,t._)("a",{class:"u-baike",href:n.item.link,target:"_blank"},"查看百科 »",8,xa)])]),null!==(p=n.item)&&void 0!==p&&null!==(p=p.list)&&void 0!==p&&p.length?((0,t.wg)(),(0,t.iD)("ul",fa,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(n.item.list,((a,n)=>((0,t.wg)(),(0,t.iD)("li",{key:n},[(0,t._)("div",La,[(0,t._)("span",ba,(0,h.zw)(a.date),1)]),(0,t._)("div",va,[e[0]||(e[0]=(0,t._)("span",null,"占领势力：",-1)),(0,t._)("span",{class:(0,h.C_)(a.camp)},"["+(0,h.zw)("haoqi"==a.camp?"浩气盟":"恶人谷")+"]",3)]),(0,t._)("div",ya,[e[1]||(e[1]=(0,t._)("span",null,"占领帮会：",-1)),(0,t._)("span",{class:(0,h.C_)(a.camp)},(0,h.zw)(a.gang),3)])])))),128))])):((0,t.wg)(),(0,t.iD)("div",ka,e[2]||(e[2]=[(0,t._)("div",{class:"u-nonedata"},"暂无数据",-1)])))])])):(0,t.kq)("",!0)}var wa={name:"SandBoxLog",props:["item"],data:function(){return{}},methods:{}};const Sa=(0,b.Z)(wa,[["render",_a]]);var Da=Sa,Ma=JSON.parse('["蝶恋花","龙争虎斗","长安城","幽月轮","斗转星移","剑胆琴心","乾坤一掷","唯我独尊","梦江南","绝代天骄","天鹅坪","破阵子","飞龙在天","眉间雪","山海相逢","傲血戰意","山海相逢","眉间雪"]'),Ha=n(25108),Wa={name:"SandBox",components:{sandboxSearch:y,sandboxMaps:la,sandboxLog:Da},data:function(){return{sandMaps:{},servers:Ma,itemLog:"",route:!1,camp:"haoqi",showLog:!1,server:Ma[0]||""}},computed:{parms:function(){return{server:this.server}}},mounted(){(0,c.i9H)(this.$refs.sandboxMap,(()=>{this.showLog&&(this.showLog=!1)}))},methods:{onSandbox(a){let{server:e,camp:n,route:t}=a;this.server=e,this.camp=n,this.route=t},getSandbox(){_(this.parms).then((a=>{Ha.log(a),this.sandMaps={list:a.data.castles}})),this.$emit("sandboxChangeKey",this.server)},mapClick(a){w(this.id,a.id).then((e=>{a.list=e.data.data,this.itemLog=a,this.showLog=!0}))},closeLog(){this.showLog=!1}},watch:{parms:{immediate:!0,deep:!0,handler:function(){this.getSandbox()}}}};const Pa=(0,b.Z)(Wa,[["render",m]]);var Ca=Pa;const Ya={class:"m-sandbox-logs"},Ba={class:"m-log-box"},Ga={class:"m-box-info"},Za=["innerHTML"],Fa={class:"u-title"},Ka={key:0,class:"u-desc"};function Ja(a,e,n,o,i,s){var p;return(0,t.wg)(),(0,t.iD)("div",Ya,[(0,t._)("div",Ba,[(0,t._)("div",Ga,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(n.sandboxData,((a,e)=>((0,t.wg)(),(0,t.iD)("div",{class:"u-box",key:e},[(0,t._)("span",{class:"u-desc",innerHTML:s.toLogText(a.content)},null,8,Za),(0,t._)("span",Fa,(0,h.zw)(s.ToDate(a.time)),1)])))),128)),(null===(p=n.sandboxData)||void 0===p?void 0:p.length)<1?((0,t.wg)(),(0,t.iD)("span",Ka,"暂无记录")):(0,t.kq)("",!0)])])])}const Qa=(a,e="yyyy-mm-dd MM:mm:ss")=>{let n=new Date(isNaN(a)?a:Number(a)),t=n.getMonth()+1,o=n.getDate(),i=n.getHours(),s=n.getMinutes(),p=n.getSeconds();t>=1&&t<=9&&(t="0"+t),o>=0&&o<=9&&(o="0"+o),i>=0&&i<=9&&(i="0"+i),s>=0&&s<=9&&(s="0"+s),p>=0&&p<=9&&(p="0"+p);let l=n.getFullYear()+"年"+(n.getMonth()+1)+"月"+n.getDate()+"日";return"yyyy-mm-dd"==e&&(l=n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate()),"yyyy.mm.dd"==e&&(l=n.getFullYear()+"."+(n.getMonth()+1)+"."+n.getDate()),"yyyy-mm-dd MM:mm:ss"==e&&(l=n.getFullYear()+"-"+t+"-"+o+" "+i+":"+s+":"+p),"yyyy-mm-dd MM:mm"==e&&(l=n.getFullYear()+"-"+t+"-"+o+" "+i+":"+s),"mm-dd MM:mm:ss"==e&&(l=t+"-"+o+" "+i+":"+s+":"+p),"yyyy年mm月dd日 MM:mm:ss"==e&&(l=n.getFullYear()+"年"+t+"月"+o+"日 "+i+":"+s+":"+p),l};var qa={name:"sendbox_handbook",props:["sandboxData"],data:function(){return{item:{list:[]}}},methods:{ToDate(a){let e=Number(a+"000");return Qa(e,"yyyy-mm-dd MM:mm")},toLogText(a){let e=a.split("贡献前三名的帮会将均分"),n=e?e[0].split("感谢他们为阵营的付出")[0]:a,t=n.replaceAll("浩气盟","<i class='sandbox-em-hq'>浩气盟</i>").replaceAll("恶人谷","<i class='sandbox-em-er'>恶人谷</i>"),o=t.replaceAll("【","<i class='sandbox-em-point'>【").replaceAll("】","】</i>");return o}},created(){}};const Xa=(0,b.Z)(qa,[["render",Ja],["__scopeId","data-v-44597d1c"]]);var Ra=Xa;const Ta={class:"m-sandbox-handbook"},za={class:"m-log-box"},ja={key:0,class:"u-list"},Na=["href","target"],Va=["src"],Aa=["src","alt","title"],Ea={key:0,class:"u-label u-zlp"},Ia=["href","target"],Ua={key:1,class:"u-marks"},$a={class:"u-content u-desc"},Oa={class:"u-metalist u-collection"},ae=["href"],ee={class:"u-metalist u-topics"},ne=["href"],te={class:"u-misc"},oe=["src","alt"],ie=["href"],se={class:"u-date"};function pe(a,e,n,o,i,s){const p=(0,t.up)("el-pagination"),l=(0,t.Q2)("loading");return(0,t.wg)(),(0,t.iD)("div",Ta,[(0,t.wy)(((0,t.wg)(),(0,t.iD)("div",za,[a.handbookList.length?((0,t.wg)(),(0,t.iD)("ul",ja,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(a.handbookList,(a=>((0,t.wg)(),(0,t.iD)("li",{class:"u-item",key:a.ID},[(0,t._)("a",{class:"u-banner",href:s.postLink(a.ID),target:n.target},[((0,t.wg)(),(0,t.iD)("img",{src:s.getBanner(a.post_banner,a.post_subtype),key:a.ID},null,8,Va)),(0,t._)("span",{class:(0,h.C_)(["u-subject",s.subject(a)||"ALL"])},(0,h.zw)(s.subject(a)||"ALL"),3)],8,Na),(0,t._)("h2",{class:(0,h.C_)(["u-post",{isSticky:a.sticky}])},[(0,t._)("img",{class:"u-icon",src:s.xficon(a.post_subtype),alt:a.post_subtype,title:a.post_subtype},null,8,Aa),a.zlp?((0,t.wg)(),(0,t.iD)("span",Ea,(0,h.zw)(a.zlp),1)):(0,t.kq)("",!0),(0,t._)("a",{class:"u-title",style:(0,h.j5)(s.showHighlight(a.color)),href:s.postLink(a.ID),target:n.target},(0,h.zw)(a.post_title||"无标题"),13,Ia),a.mark&&a.mark.length?((0,t.wg)(),(0,t.iD)("span",Ua,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(a.mark,(a=>((0,t.wg)(),(0,t.iD)("i",{class:"u-mark",key:a},(0,h.zw)(s.showMark(a)),1)))),128))])):(0,t.kq)("",!0)],2),(0,t._)("div",$a,[(0,t._)("div",Oa,[e[1]||(e[1]=(0,t._)("strong",null,"小册",-1)),(0,t._)("em",null,[~~a.post_collection?((0,t.wg)(),(0,t.iD)("a",{key:0,href:`/collection/${a.post_collection}`,target:"_blank"},"《"+(0,h.zw)(a.collection_info&&a.collection_info.title)+"》",9,ae)):((0,t.wg)(),(0,t.iD)(t.HY,{key:1},[(0,t.Uk)("-")],64))])]),(0,t._)("div",ee,[e[2]||(e[2]=(0,t._)("strong",null,"主题",-1)),(0,t._)("em",null,[a.topics&&a.topics.length?((0,t.wg)(!0),(0,t.iD)(t.HY,{key:0},(0,t.Ko)(a.topics,(a=>((0,t.wg)(),(0,t.iD)("a",{class:"u-topic",href:`/bps?topic=${a}`,key:a},(0,h.zw)(a),9,ne)))),128)):((0,t.wg)(),(0,t.iD)(t.HY,{key:1},[(0,t.Uk)("-")],64))])])]),(0,t._)("div",te,[(0,t._)("img",{class:"u-author-avatar",src:s.showAvatar(a.author_info),alt:s.showNickname(a.author_info)},null,8,oe),(0,t._)("a",{class:"u-author-name",href:s.authorLink(a.post_author),target:"_blank"},(0,h.zw)(s.showNickname(a.author_info)),9,ie),(0,t._)("span",se,[e[3]||(e[3]=(0,t.Uk)(" Updated on ")),(0,t._)("time",null,(0,h.zw)(s.dateFormat(a.post_modified)),1)])])])))),128))])):(0,t.kq)("",!0),(0,t.Wm)(p,{modelValue:a.page,"onUpdate:modelValue":e[0]||(e[0]=e=>a.page=e),"hide-on-single-page":"",class:"u-pagination",small:"",background:"",layout:"prev, pager, next","page-size":a.per,total:a.total},null,8,["modelValue","page-size","total"])])),[[l,a.loading]])])}var le=n(69876),re=n(27484),ue=n.n(re),ge=n(43806),me=n(91254),ce=n(23910),he=n(37412),de=n.n(he),xe=n(79212),fe=n.n(xe),Le=n(25108);ue().extend(de()),ue().extend(fe());var be={name:"sendbox_handbook",props:{target:{type:String,default:"_blank"}},data:function(){return{handbookList:[],loading:!0,per:10,page:1,total:0}},computed:{...(0,le.rn)(l.o,["client"]),params(){return{per:this.per,page:this.page,type:"bps",order:"update",client:this.client,topic:"小攻防"}}},methods:{authorLink:ge.authorLink,async initHandbookList(){try{this.loading=!0;let a=await S(this.params);this.handbookList=a}catch(a){Le.log(a)}finally{this.loading=!1}},getBanner:function(a,e){if(a)return(0,ge.showBanner)(a);{var n;let a=e&&(null===(n=me[e])||void 0===n?void 0:n["id"])||0;return O.__imgPath+"image/bps_thumbnail/"+a+".png"}},showAvatar(a){return(0,ge.showAvatar)(null===a||void 0===a?void 0:a.user_avatar)},showNickname(a){return(null===a||void 0===a?void 0:a.display_name)||"匿名"},showMark:function(a){return ce.cms[a]||a},postLink(a){return location.origin+"/bps/"+a},dateFormat(a){return ue()(new Date(a)).format("YYYY-MM-DD")},xficon:function(a){a&&"其它"!=a||(a="通用");let e=me[a]&&me[a]["id"];return O.__imgPath+"image/xf/"+e+".png"},showHighlight:function(a){return a?`color:${a};font-weight:600;`:""},subject:function(a){var e,n,t,o;let i="";return null!==(e=a.tags)&&void 0!==e&&e.includes("PVE")&&null!==(n=a.tags)&&void 0!==n&&n.includes("PVP")?i="ALL":null!==(t=a.tags)&&void 0!==t&&t.includes("PVE")?i="PVE":null!==(o=a.tags)&&void 0!==o&&o.includes("PVP")&&(i="PVP"),i}},created(){this.initHandbookList()}};const ve=(0,b.Z)(be,[["render",pe]]);var ye=ve;const ke={class:"m-sandbox-intro"},_e=["innerHTML"];function we(a,e,n,o,i,s){const p=(0,t.up)("el-icon"),l=(0,t.up)("el-tab-pane"),r=(0,t.up)("el-tabs"),u=(0,t.Q2)("loading");return(0,t.wy)(((0,t.wg)(),(0,t.iD)("div",ke,[(0,t.Wm)(r,{modelValue:a.active,"onUpdate:modelValue":e[0]||(e[0]=e=>a.active=e)},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(s.tabs,(e=>((0,t.wg)(),(0,t.j4)(l,{key:e.name,label:e.label,name:e.name},{label:(0,t.w5)((()=>[(0,t.Wm)(p,{class:"u-tab-icon"},{default:(0,t.w5)((()=>[((0,t.wg)(),(0,t.j4)((0,t.LL)(a.icons[e.name])))])),_:2},1024),(0,t._)("b",null,(0,h.zw)(e.label),1)])),default:(0,t.w5)((()=>[(0,t._)("div",{innerHTML:null===e||void 0===e?void 0:e.html},null,8,_e)])),_:2},1032,["label","name"])))),128))])),_:1},8,["modelValue"])])),[[u,a.loading]])}var Se=n(5353),De={name:"SandboxIntro",props:[],components:{},data:function(){return{loading:!1,data:[],active:"",icons:(0,$.Xl)({pvp_sandbox_intro:"Compass",pvp_sandbox_rule:"DataBoard",pvp_sandbox_background:"Monitor",pvp_sandbox_base:"LocationInformation",pvp_sandbox_gameplay:"Cpu",pvp_sandbox_tree:"Grape",pvp_sandbox_model:"Apple"})}},computed:{tabs(){return this.data.map((a=>({name:a.name,label:a.label,html:a.html})))}},watch:{tabs:{handler(){this.active=this.tabs[0].name},deep:!0}},mounted(){this.loadData()},methods:{loadData(){this.loading=!0;const a="pvp_sandbox_intro,pvp_sandbox_rule,pvp_sandbox_base,pvp_sandbox_gameplay,pvp_sandbox_tree,pvp_sandbox_model";(0,Se.Sj)({key:a}).then((a=>{this.data=a.data.data||[]})).finally((()=>{this.loading=!1}))}}};const Me=(0,b.Z)(De,[["render",we]]);var He=Me,We={name:"SandBoxPage",components:{SandboxIndex:Ca,ListLayout:r.Z,SandboxLogs:Ra,SandboxHandbook:ye,SandboxIntro:He},data:function(){return{view:"index",sandboxLogsData:[]}},computed:{client(){return(0,l.o)().client},params:function(){return{sandmap_id:this.id,camp:this.camp}}},methods:{async onSandboxLogs(a="斗转星移"){let e=await(0,Se.Pb)({server:a});this.sandboxLogsData=e.data?e.data.list:[]}},mounted(){this.onSandboxLogs()}};const Pe=(0,b.Z)(We,[["render",p]]);var Ce=Pe},48565:function(a){a.exports=JSON.parse('{"placeImg":{"eren":{"left":"72px","top":"10px"},"haoqi":{"left":"683px","top":"523px"},"QiuYuBao":{"left":"623px","top":"318px"},"HongLianGang":{"left":"607px","top":"259px"},"JinMenGuan":{"left":"637px","top":"123px"},"QingYunWu":{"left":"733px","top":"144px"},"PanLongWu":{"left":"502px","top":"476px"},"ZhuLuPing":{"left":"573px","top":"391px"},"WuWangCheng":{"left":"562px","top":"430px"},"LongMenZhen":{"left":"395px","top":"117px"},"FeiShaGuan":{"left":"362px","top":"136px"},"LinFengBao":{"left":"149px","top":"65px"},"BuKongGuan":{"left":"392px","top":"368px"},"JiLiuWu":{"left":"432px","top":"431px"},"WoLongPo":{"left":"226px","top":"476px"},"RiYueYa":{"left":"257px","top":"356px"},"ShuangGeBao":{"left":"50px","top":"602px"},"LanCangCheng":{"left":"123px","top":"626px"},"ShenChiLing":{"left":"109px","top":"206px"},"LieRiGang":{"left":"12px","top":"271px"},"JingQiuGu":{"left":"11px","top":"386px"},"FengMingBao":{"left":"23px","top":"494px"},"DaLiShanCheng":{"left":"304px","top":"606px"},"QianYanGuan":{"left":"305px","top":"581px"},"DanXingLin":{"left":"502px","top":"152px"},"FengHuZhai":{"left":"496px","top":"203px"},"ShiWaiPo":{"left":"234px","top":"233px"},"FuFengJun":{"left":"295px","top":"187px"}},"placeName":{"eren":{"left":"149px","top":"49px"},"haoqi":{"left":"762px","top":"622px"},"QiuYuBao":{"left":"674px","top":"370px"},"HongLianGang":{"left":"698px","top":"284px"},"JinMenGuan":{"left":"684px","top":"212px"},"QingYunWu":{"left":"768px","top":"178px"},"PanLongWu":{"left":"578px","top":"536px"},"ZhuLuPing":{"left":"622px","top":"434px"},"WuWangCheng":{"left":"706px","top":"560px"},"LongMenZhen":{"left":"450px","top":"162px"},"FeiShaGuan":{"left":"370px","top":"142px"},"LinFengBao":{"left":"284px","top":"132px"},"BuKongGuan":{"left":"480px","top":"392px"},"JiLiuWu":{"left":"458px","top":"466px"},"WoLongPo":{"left":"320px","top":"524px"},"RiYueYa":{"left":"332px","top":"428px"},"ShuangGeBao":{"left":"102px","top":"640px"},"LanCangCheng":{"left":"170px","top":"718px"},"ShenChiLing":{"left":"129px","top":"234px"},"LieRiGang":{"left":"88px","top":"348px"},"JingQiuGu":{"left":"132px","top":"444px"},"FengMingBao":{"left":"62px","top":"522px"},"DaLiShanCheng":{"left":"336px","top":"622px"},"QianYanGuan":{"left":"390px","top":"734px"},"DanXingLin":{"left":"516px","top":"172px"},"FengHuZhai":{"left":"578px","top":"240px"},"ShiWaiPo":{"left":"300px","top":"308px"},"FuFengJun":{"left":"326px","top":"222px"}},"placeCamp":{"LuoDao":{"left":"724px","top":"326px"},"JinShuiZhen":{"left":"730px","top":"150px"},"BaLingXian":{"left":"644px","top":"486px"},"NanPingShan":{"left":"670px","top":"560px"},"LongMenHuangMo":{"left":"428px","top":"124px"},"KunLun":{"left":"252px","top":"142px"},"QuTangXia":{"left":"522px","top":"438px"},"BaiLongKou":{"left":"380px","top":"476px"},"WuLiangShan":{"left":"216px","top":"636px"},"RongTianLing":{"left":"170px","top":"290px"},"HeiLongZhao":{"left":"80px","top":"444px"},"CangShanErHai":{"left":"466px","top":"654px"},"FengHuaGuZhanLuan":{"left":"526px","top":"204px"},"MaWeiYi":{"left":"278px","top":"238px"}},"placeAttacks":{"KunLun":{"RongTianLing":{"left":"192px","top":"212px","transform":"rotate(200deg)"},"MaWeiYi":{"left":"298px","top":"204px","transform":"rotate(170deg)"},"LongMenHuangMo":{"left":"178px","top":"110px","transform":"rotate(110deg)"}},"MaWeiYi":{"KunLun":{"left":"300px","top":"184px","transform":"rotate(320deg)"},"RongTianLing":{"left":"218px","top":"280px","transform":"rotate(250deg)"},"LongMenHuangMo":{"left":"380px","top":"182px","transform":"rotate(50deg)"},"BaiLongKou":{"left":"312px","top":"346px","transform":"rotate(180deg)"}},"LongMenHuangMo":{"KunLun":{"left":"378px","top":"108px","transform":"rotate(280deg)"},"MaWeiYi":{"left":"356px","top":"183px","transform":"rotate(220deg)"},"FengHuaGuZhanLuan":{"left":"504px","top":"144px","transform":"rotate(120deg)"}},"FengHuaGuZhanLuan":{"LongMenHuangMo":{"left":"488px","top":"132px","transform":"rotate(300deg)"},"JinShuiZhen":{"left":"638px","top":"140px","transform":"rotate(90deg)"}},"JinShuiZhen":{"LuoDao":{"left":"704px","top":"246px","transform":"rotate(200deg)"},"FengHuaGuZhanLuan":{"left":"618px","top":"142px","transform":"rotate(270deg)"}},"LuoDao":{"JinShuiZhen":{"left":"666px","top":"228px","transform":"rotate(7deg)"},"BaLingXian":{"left":"644px","top":"382px","transform":"rotate(210deg)"},"NanPingShan":{"left":"726px","top":"414px","transform":"rotate(180deg)"}},"BaLingXian":{"LuoDao":{"left":"642px","top":"368px","transform":"rotate(30deg)"},"NanPingShan":{"left":"674px","top":"512px","transform":"rotate(120deg)"},"CangShanErHai":{"left":"520px","top":"564px","transform":"rotate(200deg)"},"QuTangXia":{"left":"556px","top":"454px","transform":"rotate(290deg)"}},"QuTangXia":{"BaLingXian":{"left":"568px","top":"466px","transform":"rotate(120deg)"},"BaiLongKou":{"left":"400px","top":"434px","transform":"rotate(270deg)"}},"CangShanErHai":{"BaLingXian":{"left":"536px","top":"550px","transform":"rotate(40deg)"},"NanPingShan":{"left":"596px","top":"616px","transform":"rotate(70deg)"},"WuLiangShan":{"left":"282px","top":"652px","transform":"rotate(270deg)"}},"WuLiangShan":{"HeiLongZhao":{"left":"114px","top":"598px","transform":"rotate(0deg)"},"BaiLongKou":{"left":"230px","top":"588px","transform":"rotate(40deg)"},"CangShanErHai":{"left":"300px","top":"652px","transform":"rotate(100deg)"}},"BaiLongKou":{"WuLiangShan":{"left":"240px","top":"610px","transform":"rotate(200deg)"},"QuTangXia":{"left":"416px","top":"438px","transform":"rotate(70deg)"},"MaWeiYi":{"left":"316px","top":"336px","transform":"rotate(340deg)"}},"HeiLongZhao":{"WuLiangShan":{"left":"114px","top":"600px","transform":"rotate(180deg)"},"RongTianLing":{"left":"162px","top":"390px","transform":"rotate(10deg)"}},"RongTianLing":{"KunLun":{"left":"200px","top":"208px","transform":"rotate(30deg)"},"MaWeiYi":{"left":"244px","top":"236px","transform":"rotate(90deg)"},"HeiLongZhao":{"left":"98px","top":"384px","transform":"rotate(190deg)"}},"NanPingShan":{"BaLingXian":{"left":"644px","top":"536px","transform":"rotate(300deg)"},"LuoDao":{"left":"730px","top":"402px","transform":"rotate(0deg)"},"CangShanErHai":{"left":"576px","top":"616px","transform":"rotate(240deg)"}}},"placeArr":{"QiuYuBao":{"HongLianGang":{"left":"678px","top":"318px","transform":"rotate(10deg)"}},"HongLianGang":{"QiuYuBao":{"left":"654px","top":"332px","transform":"rotate(180deg)"}},"JinMenGuan":{"QingYunWu":{"left":"758px","top":"202px","transform":"rotate(70deg)"}},"QingYunWu":{"JinMenGuan":{"left":"750px","top":"202px","transform":"rotate(250deg)"}},"PanLongWu":{"ZhuLuPing":{"left":"604px","top":"470px","transform":"rotate(30deg)"}},"ZhuLuPing":{"PanLongWu":{"left":"600px","top":"490px","transform":"rotate(210deg)"}},"LongMenZhen":{"FeiShaGuan":{"left":"428px","top":"164px","transform":"rotate(240deg)"}},"FeiShaGuan":{"LongMenZhen":{"left":"440px","top":"142px","transform":"rotate(90deg)"}},"BuKongGuan":{"JiLiuWu":{"left":"438px","top":"482px","transform":"rotate(120deg)"}},"JiLiuWu":{"BuKongGuan":{"left":"464px","top":"426px","transform":"rotate(320deg)"}},"WoLongPo":{"RiYueYa":{"left":"312px","top":"466px","transform":"rotate(40deg)"}},"RiYueYa":{"WoLongPo":{"left":"312px","top":"480px","transform":"rotate(200deg)"}},"ShuangGeBao":{"LanCangCheng":{"left":"150px","top":"688px","transform":"rotate(100deg)"}},"LanCangCheng":{"ShuangGeBao":{"left":"136px","top":"688px","transform":"rotate(290deg)"}},"ShenChiLing":{"LieRiGang":{"left":"126px","top":"268px","transform":"rotate(210deg)"}},"LieRiGang":{"ShenChiLing":{"left":"126px","top":"266px","transform":"rotate(30deg)"}},"JingQiuGu":{"FengMingBao":{"left":"124px","top":"476px","transform":"rotate(30deg)"}},"FengMingBao":{"JingQiuGu":{"left":"124px","top":"480px","transform":"rotate(30deg)"}},"DaLiShanCheng":{"QianYanGuan":{"left":"348px","top":"670px","transform":"rotate(180deg)"}},"QianYanGuan":{"DaLiShanCheng":{"left":"348px","top":"662px","transform":"rotate(0deg)"}},"DanXingLin":{"FengHuZhai":{"left":"556px","top":"214px","transform":"rotate(120deg)"}},"FengHuZhai":{"DanXingLin":{"left":"558px","top":"218px","transform":"rotate(320deg)"}},"ShiWaiPo":{"FuFengJun":{"left":"338px","top":"258px","transform":"rotate(30deg)"}},"FuFengJun":{"ShiWaiPo":{"left":"322px","top":"264px","transform":"rotate(210deg)"}}},"castles":[{"name":"不空关","key":"BuKongGuan","map":"QuTangXia","neighbors":["JiLiuWu"]},{"name":"大理山城","key":"DaLiShanCheng","map":"CangShanErHai","neighbors":["QianYanGuan"]},{"name":"啖杏林","key":"DanXingLin","map":"FengHuaGuZhanLuan","neighbors":["FengHuZhai"]},{"name":"飞沙关","key":"FeiShaGuan","map":"LongMenHuangMo","neighbors":["LongMenZhen"]},{"name":"枫湖寨","key":"FengHuZhai","map":"FengHuaGuZhanLuan","neighbors":["DanXingLin"]},{"name":"凤鸣堡","key":"FengMingBao","map":"HeiLongZhao","neighbors":["JingQiuGu"]},{"name":"扶风郡","key":"FuFengJun","map":"MaWeiYi","neighbors":["ShiWaiPo"]},{"name":"红莲岗","key":"HongLianGang","map":"LuoDao","neighbors":["QiuYuBao"]},{"name":"激流坞","key":"JiLiuWu","map":"QuTangXia","neighbors":["BuKongGuan"]},{"name":"惊虬谷","key":"JingQiuGu","map":"HeiLongZhao","neighbors":["FengMingBao"]},{"name":"金门关","key":"JinMenGuan","map":"JinShuiZhen","neighbors":["QingYunWu"]},{"name":"澜沧城","key":"LanCangCheng","map":"WuLiangShan","neighbors":["ShuangGeBao"]},{"name":"烈日岗","key":"LieRiGang","map":"RongTianLing","neighbors":["ShenChiLing"]},{"name":"凛风堡","key":"LinFengBao","map":"KunLun","neighbors":[]},{"name":"龙门镇","key":"LongMenZhen","map":"LongMenHuangMo","neighbors":["FeiShaGuan"]},{"name":"盘龙坞","key":"PanLongWu","map":"BaLingXian","neighbors":["ZhuLuPing"]},{"name":"千岩关","key":"QianYanGuan","map":"CangShanErHai","neighbors":["DaLiShanCheng"]},{"name":"青云坞","key":"QingYunWu","map":"JinShuiZhen","neighbors":["JinMenGuan"]},{"name":"秋雨堡","key":"QiuYuBao","map":"LuoDao","neighbors":["HongLianGang"]},{"name":"日月崖","key":"RiYueYa","map":"BaiLongKou","neighbors":["WoLongPo"]},{"name":"神池岭","key":"ShenChiLing","map":"RongTianLing","neighbors":["LieRiGang"]},{"name":"世外坡","key":"ShiWaiPo","map":"MaWeiYi","neighbors":["FuFengJun"]},{"name":"霜戈堡","key":"ShuangGeBao","map":"WuLiangShan","neighbors":["LanCangCheng"]},{"name":"卧龙坡","key":"WoLongPo","map":"BaiLongKou","neighbors":["RiYueYa"]},{"name":"武王城","key":"WuWangCheng","map":"NanPingShan","neighbors":[]},{"name":"逐鹿坪","key":"ZhuLuPing","map":"BaLingXian","neighbors":["PanLongWu"]}],"maps":[{"name":"白龙口","key":"BaiLongKou","neighbors":["WuLiangShan","MaWeiYi","QuTangXia"]},{"name":"巴陵县","key":"BaLingXian","neighbors":["LuoDao","NanPingShan","CangShanErHai","QuTangXia"]},{"name":"苍山洱海","key":"CangShanErHai","neighbors":["BaLingXian","NanPingShan","WuLiangShan"]},{"name":"枫华谷·战乱","key":"FengHuaGuZhanLuan","neighbors":["LongMenHuangMo","JinShuiZhen"]},{"name":"黑龙沼","key":"HeiLongZhao","neighbors":["RongTianLing","WuLiangShan"]},{"name":"金水镇","key":"JinShuiZhen","neighbors":["LuoDao","FengHuaGuZhanLuan"]},{"name":"昆仑","key":"KunLun","neighbors":["RongTianLing","LongMenHuangMo","MaWeiYi"]},{"name":"龙门荒漠","key":"LongMenHuangMo","neighbors":["FengHuaGuZhanLuan","MaWeiYi","KunLun"]},{"name":"洛道","key":"LuoDao","neighbors":["JinShuiZhen","NanPingShan","BaLingXian"]},{"name":"马嵬驿","key":"MaWeiYi","neighbors":["KunLun","LongMenHuangMo","RongTianLing","BaiLongKou"]},{"name":"南屏山","key":"NanPingShan","neighbors":["LuoDao","CangShanErHai","BaLingXian"]},{"name":"瞿塘峡","key":"QuTangXia","neighbors":["BaLingXian","BaiLongKou"]},{"name":"融天岭","key":"RongTianLing","neighbors":["KunLun","MaWeiYi","HeiLongZhao"]},{"name":"无量山","key":"WuLiangShan","neighbors":["BaiLongKou","CangShanErHai","HeiLongZhao"]}]}')}}]);
//# sourceMappingURL=150.244c1fb1.js.map