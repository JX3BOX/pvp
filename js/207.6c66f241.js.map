{"version":3,"file":"js/207.6c66f241.js","mappings":"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","sources":["webpack://pvp/./src/views/ChangeLog.vue","webpack://pvp/./src/components/SkillChange.vue","webpack://pvp/./src/assets/js/dateFormat.js","webpack://pvp/./src/components/SkillChange.vue?4633","webpack://pvp/./src/views/ChangeLog.vue?d680"],"sourcesContent":["<template>\n    <ListLayout>\n        <SkillChange></SkillChange>\n    </ListLayout>\n</template>\n\n<script>\nimport { useStore } from \"@/store\";\nimport ListLayout from \"@/layouts/ListLayout.vue\";\nimport SkillChange from \"@/components/SkillChange.vue\";\nexport default {\n    name: \"ChangeLog\",\n    components: {\n        ListLayout,\n        SkillChange,\n    },\n    props: [],\n    data: function () {\n        return {};\n    },\n    computed: {\n        client() {\n            return useStore().client;\n        },\n    },\n};\n</script>\n\n<style lang=\"less\"></style>\n","<template>\n    <div class=\"m-skill-change\">\n        <!-- <div class=\"m-skill-change__header\">\n            <h3 class=\"m-title\">\n                <span class=\"m-title__text\"\n                    ><svg class=\"icon\" viewBox=\"0 0 1024 1024\" xmlns=\"http://www.w3.org/2000/svg\" width=\"200\" height=\"200\" v-bind:class=\"'u-icon'\" v-bind:svg-inline=\"''\" v-bind:role=\"'presentation'\" v-bind:focusable=\"'false'\" v-bind:tabindex=\"'-1'\"><path d=\"M109.714 530.286a402.286 402.286 0 10804.572 0 402.286 402.286 0 10-804.572 0z\" fill=\"#0090FF\"/><path d=\"M548.572 303.654l-.002 190.06h158.278v73.144h-231.42V303.654z\" fill=\"#FFF\"/></svg>技改历史</span\n                >\n                <el-icon v-if=\"isEditor\" class=\"u-edit-icon\" @click=\"onSettingIconClick\"><Setting /></el-icon>\n            </h3>\n        </div> -->\n        <ul class=\"m-changelog-list m-news-list m-sideblock-list\" v-if=\"showData\">\n            <li class=\"u-item\" v-for=\"(item, i) in showData\" :key=\"i\">\n                <span class=\"u-item-content\">\n                    <el-icon><Notification /></el-icon>\n                    <em>{{ item.icon }}</em>\n                    <a :href=\"item.link\" target=\"_blank\" rel=\"noopener noreferrer\">{{ item.label }}</a>\n                </span>\n                <span class=\"u-item-misc\">{{ item.color }}</span>\n            </li>\n        </ul>\n\n        <!-- <el-dialog v-model=\"showDialog\" title=\"管理技改历史\" append-to-body width=\"700px\" class=\"m-skill-change-pop\">\n            <div class=\"m-content-item m-content-header\">\n                <span class=\"u-rank-icon\"></span>\n                <span class=\"u-label\">标题</span>\n                <span class=\"u-label\">链接</span>\n                <span class=\"u-label\">日期</span>\n                <span class=\"u-rank-icon\"></span>\n            </div>\n            <draggable v-model=\"menus\" item-key=\"index\" animation=\"300\" handle=\".u-move-icon\">\n                <template #item=\"{ element, index }\">\n                    <div class=\"m-content-item\">\n                        <el-icon class=\"u-move-icon\"><Rank /></el-icon>\n                        <el-input v-model=\"element.label\"></el-input>\n                        <el-input v-model=\"element.link\"></el-input>\n                        <el-input v-model=\"element.icon\"></el-input>\n                        <el-icon @click=\"onRemove(index)\" class=\"u-remove-icon\"><Delete /></el-icon>\n                    </div>\n                </template>\n            </draggable>\n            <el-button icon=\"Plus\" class=\"u-add-btn\" @click=\"onAdd\"></el-button>\n\n            <template #footer>\n                <div class=\"m-footer\">\n                    <el-button type=\"primary\" @click=\"onConfirm\">保存</el-button>\n                    <el-button @click=\"onCancel\">取消</el-button>\n                </div>\n            </template>\n        </el-dialog> -->\n    </div>\n</template>\n\n<script>\nimport User from \"@jx3box/jx3box-common/js/user.js\";\nimport { getMenu, updateMenu } from \"@/service/raw.js\";\nimport dateFormat from \"@/assets/js/dateFormat.js\";\n// import draggable from \"vuedraggable\";\nimport cloneDeep from \"lodash/cloneDeep\";\nimport { useStore } from \"@/store\";\n\nexport default {\n    name: \"SkillChange\",\n    components: {\n        // draggable,\n    },\n    data() {\n        return {\n            isEditor: User.isEditor(),\n            data: [],\n\n            // dialog\n            showDialog: false,\n            menus: [],\n        };\n    },\n    computed: {\n        showData() {\n            return this.data.map((item) => {\n                item.time = new Date(item.icon);\n                item.type = \"skill_change\";\n                return item;\n            });\n            // .slice(0, 5);\n        },\n        client() {\n            return useStore().client;\n        },\n        bpsType() {\n            return this.client === \"origin\" ? \"bps_skill_change_origin\" : \"bps_skill_change\";\n        },\n    },\n    mounted() {\n        this.loadSkillChangeData();\n    },\n    methods: {\n        dateFormat(val) {\n            return dateFormat(val, \"-\");\n        },\n        onSettingIconClick() {\n            this.showDialog = true;\n        },\n        loadSkillChangeData() {\n            getMenu(this.bpsType).then((res) => {\n                this.data = cloneDeep(res);\n                this.menus = cloneDeep(res);\n            });\n        },\n        onConfirm() {\n            // 去除空数据\n            const data = this.menus.filter((item) => {\n                return item.label && item.link && item.icon;\n            });\n            updateMenu(this.bpsType, { menus: data }).then(() => {\n                this.showDialog = false;\n                this.loadSkillChangeData();\n            });\n        },\n        onAdd() {\n            this.menus.push({\n                label: \"\",\n                link: \"\",\n                icon: \"\",\n                color: \"\",\n            });\n        },\n        onRemove(index) {\n            this.$confirm(\"确定删除该条数据吗？\", \"提示\", {\n                confirmButtonText: \"确定\",\n                cancelButtonText: \"取消\",\n                type: \"warning\",\n            })\n                .then(() => {\n                    this.menus.splice(index, 1);\n                })\n                .catch(() => {});\n        },\n        onCancel() {\n            this.showDialog = false;\n            this.menus = cloneDeep(this.data);\n        },\n    },\n};\n</script>\n\n<style lang=\"less\">\n@import \"@/assets/css/skill_change.less\";\n</style>\n","import moment from \"moment\";\n/**\n * 简单的日期格式化\n *\n * @param {*} dt Date实例\n * @param {object} opt polished:是否补齐两位,separator:连接分隔符\n */\nfunction dateFormat(dt, separator = \"-\", polished = true) {\n    // let year = dt.getFullYear()\n    let month = dt.getMonth() + 1;\n    let date = dt.getDate();\n    let str = polished ? `${polish(month)}${separator}${polish(date)}` : `${month}${separator}${date}`;\n    return str;\n}\n\nfunction polish(val) {\n    return val < 10 ? \"0\" + val : val;\n}\n\nexport const getRelativeTime = (val) => {\n    return moment(val).startOf(\"day\").fromNow();\n};\n\nexport default dateFormat;\n","import { render } from \"./SkillChange.vue?vue&type=template&id=c46cebf4\"\nimport script from \"./SkillChange.vue?vue&type=script&lang=js\"\nexport * from \"./SkillChange.vue?vue&type=script&lang=js\"\n\nimport \"./SkillChange.vue?vue&type=style&index=0&id=c46cebf4&lang=less\"\n\nimport exportComponent from \"/home/runner/work/pvp/pvp/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./ChangeLog.vue?vue&type=template&id=05d465b6\"\nimport script from \"./ChangeLog.vue?vue&type=script&lang=js\"\nexport * from \"./ChangeLog.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/runner/work/pvp/pvp/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createBlock","_component_ListLayout","_createVNode","_component_SkillChange","class","_createElementBlock","_hoisted_1","$options","showData","_hoisted_2","_Fragment","_renderList","item","i","key","_createElementVNode","_hoisted_3","_component_el_icon","_component_Notification","_toDisplayString","icon","href","link","target","rel","label","_hoisted_4","_hoisted_5","color","dateFormat","dt","separator","polished","month","getMonth","date","getDate","str","polish","val","name","components","data","isEditor","User","showDialog","menus","computed","this","map","time","Date","type","client","useStore","bpsType","mounted","loadSkillChangeData","methods","onSettingIconClick","getMenu","then","res","cloneDeep","onConfirm","filter","updateMenu","onAdd","push","onRemove","index","$confirm","confirmButtonText","cancelButtonText","splice","catch","onCancel","__exports__","ListLayout","SkillChange","props","render"],"sourceRoot":""}