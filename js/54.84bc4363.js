"use strict";(self["webpackChunkpvp"]=self["webpackChunkpvp"]||[]).push([[54],{86607:function(t,e,a){a.d(e,{Jq:function(){return n},PD:function(){return o},hq:function(){return l},xl:function(){return s}});var i=a(18371);function n(t){return(0,i.nj)().get("/api/cms/posts",{params:t})}function s(t){return(0,i.nj)().get(`/api/cms/post/${t}`)}function o(t){return(0,i.x8)().get(`/api/inspire/article/${t}/boxcoin/limit`)}function l(){return(0,i.nj)().get("/api/cms/config",{params:{key:"boxcoin"}})}},60956:function(t,e,a){a.d(e,{Z:function(){return _}});var i=a(66252),n=a(3577);const s=["href"],o=["src"],l={key:0,class:"c-avatar-frame"},r=["src"];function d(t,e,a,d,c,u){return(0,i.wg)(),(0,i.iD)("a",{class:(0,n.C_)(["c-avatar",a.size]),href:u.authorLink(a.uid)},[(0,i._)("img",{src:u.showAvatar(a.url),class:"c-avatar-pic"},null,8,o),a.frame?((0,i.wg)(),(0,i.iD)("i",l,[(0,i._)("img",{src:u.frameUrl},null,8,r)])):(0,i.kq)("",!0),(0,i.WI)(t.$slots,"default")],10,s)}var c=a(89847),u=a(17233);const{__imgPath:p}=c;var m={name:"AvatarComp",props:{uid:{type:[Number,String],default:0},url:{type:String,default:""},frame:{type:String,default:""},size:{type:[Number,String],default:"m"}},components:{},data:function(){return{frames:[],styles:{xxs:36,xs:48,s:68,m:88,l:120,xl:150}}},computed:{frameUrl:function(){return p+`avatar/images/${this.frame}/${this.frame}.svg`}},methods:{showAvatar:function(t){return(0,u.showAvatar)(t,3*this.styles[this.size])},authorLink:u.authorLink}},h=a(83744);const v=(0,h.Z)(m,[["render",d]]);var _=v},75015:function(t,e,a){a.d(e,{Z:function(){return x}});var i=a(66252),n=a(3577);const s={class:"w-thx"},o={class:"w-thx-panel"},l=(0,i._)("path",{d:"M309.9 140.6h402.9c21.1 0 38.2-17.1 38.2-38.2s-17.1-38.2-38.2-38.2H309.9c-21.1 0-38.2 17.1-38.2 38.2s17.1 38.2 38.2 38.2z",fill:"#61D0ED"},null,-1),r=(0,i._)("path",{d:"M776.3 112.1c-4.7 30.5-30.8 54-62.7 54H309.1c-31.8 0-58-23.5-62.7-54-46.2 19.1-78.7 64.5-78.7 117.6v602.7c0 70.3 57 127.3 127.3 127.3h432.7c70.3 0 127.3-57 127.3-127.3V229.7c0-53.1-32.5-98.6-78.7-117.6zm-47.9 572.1h-434c-21.1 0-38.2-17.1-38.2-38.2s17.1-38.2 38.2-38.2h433.9c21.1 0 38.2 17.1 38.2 38.2s-17.1 38.2-38.1 38.2zm0-173h-434c-21.1 0-38.2-17.1-38.2-38.2s17.1-38.2 38.2-38.2h433.9c21.1 0 38.2 17.1 38.2 38.2s-17.1 38.2-38.1 38.2zm0-173h-434c-21.1 0-38.2-17.1-38.2-38.2s17.1-38.2 38.2-38.2h433.9c21.1 0 38.2 17.1 38.2 38.2s-17.1 38.2-38.1 38.2z",fill:"#61D0ED"},null,-1),d=[l,r];function c(t,e,a,l,r,c){const u=(0,i.up)("boxcoin-admin"),p=(0,i.up)("Like"),m=(0,i.up)("fav"),h=(0,i.up)("boxcoin-user"),v=(0,i.up)("el-tooltip"),_=(0,i.up)("BoxcoinRecords"),f=(0,i.up)("el-drawer");return(0,i.wg)(),(0,i.iD)("div",s,[(0,i._)("div",o,[t.hasRight&&a.adminBoxcoinEnable&&t.boxcoin_enable?((0,i.wg)(),(0,i.j4)(u,{key:0,postId:a.postId,postType:a.postType,userId:a.userId,max:t.admin_max,min:t.admin_min,own:t.admin_left,total:t.admin_total,points:t.admin_points,authors:a.authors,onUpdateRecord:c.updateRecord,client:a.client},null,8,["postId","postType","userId","max","min","own","total","points","authors","onUpdateRecord","client"])):(0,i.kq)("",!0),(0,i.Wm)(p,{postId:a.postId,postType:a.postType},null,8,["postId","postType"]),(0,i.Wm)(m,{postId:a.postId,postType:a.postType,postTitle:a.postTitle},null,8,["postId","postType","postTitle"]),a.userBoxcoinEnable&&t.boxcoin_enable&&a.allowGift?((0,i.wg)(),(0,i.j4)(h,{key:1,postId:a.postId,postType:a.postType,boxcoin:t.boxcoin,userId:a.userId,own:t.user_left,points:t.user_points,authors:a.authors,onUpdateRecord:c.updateRecord,client:a.client},null,8,["postId","postType","boxcoin","userId","own","points","authors","onUpdateRecord","client"])):(0,i.kq)("",!0),(0,i.Wm)(v,{effect:"dark",content:"打赏记录",placement:"top-start"},{default:(0,i.w5)((()=>[((0,i.wg)(),(0,i.iD)("svg",{class:(0,n.C_)(["icon","u-record-icon"]),viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:"200",height:"200","svg-inline":"",onClick:e[0]||(e[0]=(...t)=>c.onRecord&&c.onRecord(...t)),role:"presentation",focusable:"false",tabindex:"-1"},d))])),_:1})]),(0,i.Wm)(f,{modelValue:t.showDrawer,"onUpdate:modelValue":e[1]||(e[1]=e=>t.showDrawer=e),title:"打赏记录","append-to-body":""},{default:(0,i.w5)((()=>[(0,i.Wm)(_,{postId:a.postId,postType:a.postType,postClient:a.client,cacheRecord:t.cacheRecord,mode:a.mode,"onUpdate:boxcoin":c.updateBoxcoin},null,8,["postId","postType","postClient","cacheRecord","mode","onUpdate:boxcoin"])])),_:1},8,["modelValue"])])}var u=a(63553),p=a(57039),m=a(65801),h=a(5856),v=a(78401),_=a(49e3),f=a(50855),g={name:"SimpleThx",components:{Like:u.Z,Fav:p.Z,BoxcoinAdmin:m.Z,BoxcoinUser:h.Z,BoxcoinRecords:v.Z},props:{type:{type:String,default:"normal"},postId:{type:Number,default:0},postType:{type:String,default:""},postTitle:{type:String,default:""},userId:{type:Number,default:0},authors:{type:Array,default:()=>[]},mode:{type:String,default:"normal"},client:{type:String,default:"std"},allowGift:{type:[Number,Boolean],default:1},adminBoxcoinEnable:{type:Boolean,default:!1},userBoxcoinEnable:{type:Boolean,default:!1},presetConfig:{type:Object,default:()=>({})}},data:function(){return{boxcoin:0,hasRight:_.Z.getInfo().group>=32,user:_.Z.getInfo(),admin_max:0,admin_min:0,admin_left:0,admin_total:0,admin_points:[100],user_left:0,user_points:[100],cacheRecord:null,boxcoin_enable:0,showDrawer:!1}},computed:{post_keys:function(){return[this.postId,this.postType]}},watch:{post_keys:{immediate:!0,deep:!0,handler:function(){this.postType&&this.postId&&this.loadBoxcoinConfig()}}},methods:{loadBoxcoinConfig:function(){if(Object.keys(this.presetConfig)?.length)return this.admin_max=this.presetConfig.admin_max||0,this.admin_min=this.presetConfig.admin_min||0,this.admin_points=this.presetConfig.admin_points||[10,1e3],this.admin_left=this.presetConfig.admin_left||0,this.admin_total=this.presetConfig.admin_total||0,this.user_points=this.presetConfig.user_points||[10,1e3],this.user_left=this.presetConfig.user_left||0,void(this.boxcoin_enable=this.presetConfig.boxcoin_enable||0);_.Z.isLogin()&&(0,f.PD)(this.postType).then((t=>{this.admin_max=t.data.data.limit.admin_max||0,this.admin_min=t.data.data.limit.admin_min||0,this.admin_points=t.data.data.limit.admin_points||[10,1e3],this.admin_left=t.data.data.asManagerBoxCoinRemain||0,this.admin_total=t.data.data.asManagerBoxCoinTotal||0,this.user_points=t.data.data.limit.user_points||[10,1e3],"origin"==this.client?this.user_left=t.data.data.asUserBoxCoinRemainOrigin+t.data.data.asUserBoxCoinRemainAll:"std"==this.client?this.user_left=t.data.data.asUserBoxCoinRemainStd+t.data.data.asUserBoxCoinRemainAll:this.user_left=t.data.data.asUserBoxCoinRemainAll+t.data.data.asUserBoxCoinRemainStd+t.data.data.asUserBoxCoinRemainOrigin})),(0,f.hq)().then((t=>{this.boxcoin_enable=!!~~t.data?.data?.val}))},updateRecord:function(t){this.cacheRecord=t},onRecord:function(){this.showDrawer=!0},updateBoxcoin:function(t){this.boxcoin=t}}},k=a(83744);const w=(0,k.Z)(g,[["render",c]]);var x=w},97054:function(t,e,a){a.r(e),a.d(e,{default:function(){return gt}});var i=a(66252);function n(t,e,a,n,s,o){const l=(0,i.up)("CompetitiveTrick"),r=(0,i.up)("ListLayout");return(0,i.wg)(),(0,i.j4)(r,null,{default:(0,i.w5)((()=>[(0,i.Wm)(l)])),_:1})}var s=a(24239),o=a(93391);const l={class:"m-competitive-trick"},r={class:"m-search"},d=["href"],c={class:"m-competitive-trick"};function u(t,e,a,n,s,o){const u=(0,i.up)("TrickNotice"),p=(0,i.up)("CompetitiveTrickItemVue"),m=(0,i.Q2)("loading");return(0,i.wg)(),(0,i.iD)("div",l,[(0,i.Wm)(u),(0,i._)("div",r,[(0,i._)("a",{href:o.publishLink("pvp"),class:"u-publish el-button el-button--primary"},"+ 发布作品",8,d)]),(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",c,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.data,(t=>((0,i.wg)(),(0,i.j4)(p,{key:t.id,data:t,preset:s.presetConfig},null,8,["data","preset"])))),128))])),[[m,s.loading]])])}var p=a(86607),m=a(49e3),h=a(3577),v=a(49963);const _={key:0,class:"m-trick-item"},f={class:"m-trick-item__header"},g={class:"m-trick-item__title"},k={key:0,class:"u-label u-zlp"},w=["href"],x={key:1,class:"u-marks"},y={class:"m-trick-item__thx"},C=(0,i._)("path",{d:"M655.36 0H368.64C165.888 0 0 165.888 0 368.64V921.6C0 977.92 46.08 1024 102.4 1024h552.96C859.136 1024 1024 859.136 1024 655.36V368.64C1024 165.888 858.112 0 655.36 0zM366.08 344.064c28.16 0 51.2 23.04 51.2 51.2s-23.04 51.2-51.2 51.2-51.2-23.04-51.2-51.2 23.04-51.2 51.2-51.2zM697.344 606.72c0 90.112-86.528 163.328-176.128 163.328h-18.432c-90.112 0-176.128-73.216-176.128-163.328 0-29.184 24.064-53.248 53.248-53.248H645.12c28.672 0 52.224 23.552 52.224 53.248zM657.92 446.464c-28.16 0-51.2-23.04-51.2-51.2s23.04-51.2 51.2-51.2 51.2 23.04 51.2 51.2-23.04 51.2-51.2 51.2z",fill:"#DD6572"},null,-1),b=[C],D={class:"m-trick-item__content"},I={class:"m-trick-item__left"},T=["href"],B={class:"u-name"},R={class:"m-trick-item__right"},U={key:0,class:"m-header"},L=["innerHTML"],q={class:"m-content"},z={key:0,class:"m-talent"},S={class:"m-talent__title"},Z=["src"],A={key:0,class:"u-desc"},M=["innerHTML"],W={class:"m-skills"},H={class:"u-title"},N=["src"],j={key:0,class:"u-skills"},O=["src","alt","title"],V=["title"],$={class:"u-gcd-icon",title:"无GCD技能"},E={key:1,class:"u-desc"};function J(t,e,a,n,s,o){var l,r,d,c,u,p,m,C,J,K,P,Y,G,F,Q,X,tt,et;const at=(0,i.up)("SimpleThx"),it=(0,i.up)("el-tooltip"),nt=(0,i.up)("Avatar"),st=(0,i.up)("Clock"),ot=(0,i.up)("el-icon"),lt=(0,i.up)("Comment"),rt=(0,i.up)("el-drawer");return o.hasData?((0,i.wg)(),(0,i.iD)("div",_,[(0,i._)("div",f,[(0,i._)("div",g,[a.data.zlp?((0,i.wg)(),(0,i.iD)("span",k,(0,h.zw)(a.data.zlp),1)):(0,i.kq)("",!0),(0,i._)("a",{class:"u-link",href:`/pvp/${null===(l=a.data)||void 0===l?void 0:l.ID}`,target:"_blank"},(0,h.zw)(a.data.post_title||"未知流派"),9,w),a.data.mark&&a.data.mark.length?((0,i.wg)(),(0,i.iD)("span",x,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.data.mark,(t=>((0,i.wg)(),(0,i.iD)("i",{class:"u-mark",key:t},(0,h.zw)(o.showMark(t)),1)))),128))])):(0,i.kq)("",!0)]),(0,i._)("div",y,[(0,i.Wm)(at,{postType:"pvp",postTitle:null===(r=a.data)||void 0===r?void 0:r.post_title,userId:null===(d=a.data)||void 0===d?void 0:d.post_author,adminBoxcoinEnable:!0,userBoxcoinEnable:!0,postId:null===(c=a.data)||void 0===c?void 0:c.ID,presetConfig:a.preset},null,8,["postTitle","userId","postId","presetConfig"]),(0,i.Wm)(it,{content:"评论",placement:"top-start"},{default:(0,i.w5)((()=>[((0,i.wg)(),(0,i.iD)("svg",{class:(0,h.C_)(["icon","u-icon"]),viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:"200",height:"200","svg-inline":"",onClick:e[0]||(e[0]=t=>s.showComment=!0),role:"presentation",focusable:"false",tabindex:"-1"},b))])),_:1})])]),(0,i._)("div",D,[(0,i._)("div",I,[(0,i._)("a",{class:"m-author",href:o.authorLink(null===(u=a.data)||void 0===u?void 0:u.post_author)},[(0,i.Wm)(nt,{class:"u-avatar",uid:null===(p=a.data)||void 0===p?void 0:p.post_author,size:"s",url:null===(m=a.data.author_info)||void 0===m?void 0:m.user_avatar,frame:null===(C=a.data.author_info)||void 0===C?void 0:C.user_avatar_frame},null,8,["uid","url","frame"]),(0,i._)("span",B,(0,h.zw)(null===(J=a.data.author_info)||void 0===J?void 0:J.display_name),1)],8,T)]),(0,i._)("div",R,[null!==(K=a.data)&&void 0!==K&&null!==(P=K.post_meta)&&void 0!==P&&P.content?((0,i.wg)(),(0,i.iD)("div",U,[(0,i._)("div",{innerHTML:o.nl2br(null===(Y=a.data)||void 0===Y||null===(G=Y.post_meta)||void 0===G?void 0:G.content)},null,8,L)])):(0,i.kq)("",!0),(0,i._)("div",q,[Object.keys(o.talent).length?((0,i.wg)(),(0,i.iD)("div",z,[(0,i._)("div",S,[(0,i._)("img",{class:"u-icon",src:o.getAppIcon("talent"),alt:""},null,8,Z),(0,i.Uk)(" 奇穴 ")]),(0,i._)("div",{class:(0,h.C_)(["m-talent-box",`m-qx-container-${null===(F=a.data)||void 0===F?void 0:F.ID}`])},null,2),null!==(Q=a.data)&&void 0!==Q&&null!==(X=Q.post_meta)&&void 0!==X&&X.talent_desc?((0,i.wg)(),(0,i.iD)("div",A,[(0,i.Uk)(" 奇穴讲解："),(0,i._)("span",{innerHTML:o.nl2br(null===(tt=a.data)||void 0===tt||null===(et=tt.post_meta)||void 0===et?void 0:et.talent_desc)},null,8,M)])):(0,i.kq)("",!0)])):(0,i.kq)("",!0),(0,i._)("div",W,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.skills,((t,e)=>((0,i.wg)(),(0,i.iD)("div",{class:"m-skill-item",key:e},[(0,i._)("div",H,[(0,i._)("img",{class:"u-icon",src:o.getAppIcon("pvp"),alt:""},null,8,N),(0,i.Uk)(" 连招："+(0,h.zw)(t.name),1)]),t.sq?((0,i.wg)(),(0,i.iD)("div",j,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.sq,((t,e)=>((0,i.wg)(),(0,i.iD)("span",{key:t.SkillID+""+e,class:"u-skill"},[(0,i._)("img",{class:"u-skill-icon",src:o.iconLink(t.IconID),alt:t.IconID,title:t.Name},null,8,O),(0,i._)("span",{class:"u-skill-name",title:t.Name},(0,h.zw)(t.Name),9,V),(0,i.wy)((0,i._)("i",$,[(0,i.Wm)(ot,null,{default:(0,i.w5)((()=>[(0,i.Wm)(st)])),_:1})],512),[[v.F8,t.WithoutGcd]])])))),128))])):(0,i.kq)("",!0),t.desc?((0,i.wg)(),(0,i.iD)("div",E,"连招说明："+(0,h.zw)(t.desc),1)):(0,i.kq)("",!0)])))),128))])])])]),(0,i.Wm)(rt,{title:"评论",modelValue:s.showComment,"onUpdate:modelValue":e[1]||(e[1]=t=>s.showComment=t),"destroy-on-close":"",class:"m-trick-drawer"},{default:(0,i.w5)((()=>{var t;return[(0,i.Wm)(lt,{category:"post",id:null===(t=a.data)||void 0===t?void 0:t.ID},null,8,["id"])]})),_:1},8,["modelValue"])])):(0,i.kq)("",!0)}var K=a(17233),P=a(957),Y=a(75015),G=a(72457),F=a(60956),Q=a(23910),X={name:"CompetitiveTrickItem",components:{SimpleThx:Y.Z,Comment:G.Z,Avatar:F.Z},props:{preset:{type:Object,default:()=>{}},data:{type:Object,default:()=>{}}},data(){return{talentDriver:null,showComment:!1}},computed:{talent(){try{var t,e;return JSON.parse(null===(t=this.data)||void 0===t||null===(e=t.post_meta)||void 0===e?void 0:e.talent)}catch(a){return{}}},hasData(){var t;return!(null===(t=this.data)||void 0===t||!t.ID)},skills(){var t;return null===(t=this.data)||void 0===t?void 0:t.post_meta.data}},watch:{data:{deep:!0,immediate:!0,handler(){this.talentDriver||this.$nextTick((()=>{this.installTalent()}))}},talent:{deep:!0,handler(){this.reloadTalent()}}},methods:{authorLink:K.authorLink,iconLink:K.iconLink,getAppIcon:K.getAppIcon,installTalent(){var t;this.talentDriver=new P.Z({container:`.m-qx-container-${null===(t=this.data)||void 0===t?void 0:t.ID}`,version:this.talent.version,xf:this.talent.xf,editable:!1,sq:this.talent.sq})},reloadTalent(){this.$nextTick((()=>{var t;this.talentDriver&&(null===(t=this.talentDriver)||void 0===t||t.then((t=>{t.load({version:this.talent.version,xf:this.talent.xf,editable:!1,sq:this.talent.sq})})))}))},nl2br(t){return t.replace(/\n/g,"<br/>")},showMark:function(t){return Q.I[t]||t}}},tt=a(83744);const et=(0,tt.Z)(X,[["render",J]]);var at=et;const it={class:"m-notice-top"},nt=(0,i._)("div",{class:"m-notice-top__header"},[(0,i._)("h3",{class:"u-title"},[(0,i._)("i",{class:"el-icon-news"}),(0,i.Uk)("公告")])],-1),st={class:"m-notice-top__content"},ot={class:"m-item_left"},lt=["innerHTML"];function rt(t,e,a,n,s,o){return(0,i.wg)(),(0,i.iD)("div",it,[nt,(0,i._)("div",st,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.data,(t=>((0,i.wg)(),(0,i.iD)("div",{class:"m-notice-top__item",key:t.id},[(0,i._)("div",ot,[(0,i._)("span",{class:"u-title",innerHTML:t},null,8,lt)])])))),128))])])}var dt=a(2950),ct={data(){return{data:[]}},mounted(){this.getBreadcrumb()},methods:{getBreadcrumb(){try{const t=sessionStorage.getItem("pvp_ac");t?this.data=JSON.parse(t):(0,dt.k)("pvp_ac").then((t=>{var e,a;console.log(t);const i=(null===(e=t.data)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.html)||"";this.data=i.split("\n"),sessionStorage.setItem("pvp_ac",JSON.stringify(this.data))}))}catch(t){this.data=[]}}}};const ut=(0,tt.Z)(ct,[["render",rt]]);var pt=ut,mt={name:"CompetitiveTrick",components:{CompetitiveTrickItemVue:at,TrickNotice:pt},data(){return{data:[],presetConfig:{},loading:!1}},computed:{subtype(){var t;return(null===(t=this.$route.query)||void 0===t?void 0:t.subtype)||"冰心诀"},client(){return(0,s.o)().client}},watch:{subtype:{immediate:!0,handler(){this.loadData()}}},methods:{publishLink:K.publishLink,loadData(){this.loading=!0,(0,p.Jq)({type:"pvp",subtype:this.subtype,client:this.client,sticky:1}).then((t=>{this.data=t.data.data.list||[]})).finally((()=>{this.loading=!1}))},async init(){m.Z.isLogin()&&(await(0,p.hq)().then((t=>{this.presetConfig.boxcoin_enable=!!~~t.data.data.val})),await(0,p.PD)(this.postType).then((t=>{this.presetConfig.admin_max=t.data.data.limit.admin_max||0,this.presetConfig.admin_min=t.data.data.limit.admin_min||0,this.presetConfig.admin_points=t.data.data.limit.admin_points||[10,1e3],this.presetConfig.admin_left=t.data.data.asManagerBoxCoinRemain||0,this.presetConfig.admin_total=t.data.data.asManagerBoxCoinTotal||0,this.presetConfig.user_points=t.data.data.limit.user_points||[10,1e3],"origin"==this.client?this.presetConfig.user_left=t.data.data.asUserBoxCoinRemainOrigin+t.data.data.asUserBoxCoinRemainAll:"std"==this.client?this.presetConfig.user_left=t.data.data.asUserBoxCoinRemainStd+t.data.data.asUserBoxCoinRemainAll:this.presetConfig.user_left=t.data.data.asUserBoxCoinRemainAll+t.data.data.asUserBoxCoinRemainStd+t.data.data.asUserBoxCoinRemainOrigin})))}}};const ht=(0,tt.Z)(mt,[["render",u]]);var vt=ht,_t={name:"PostView",components:{ListLayout:o.Z,CompetitiveTrick:vt},props:[],data:function(){return{}},computed:{client(){return(0,s.o)().client}}};const ft=(0,tt.Z)(_t,[["render",n]]);var gt=ft}}]);
//# sourceMappingURL=54.84bc4363.js.map