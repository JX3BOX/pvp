"use strict";(self["webpackChunkpvp"]=self["webpackChunkpvp"]||[]).push([[938],{86607:function(t,e,a){a.d(e,{Jq:function(){return o},Sx:function(){return s},VC:function(){return l},xl:function(){return n}});var i=a(18371);function o(t){return(0,i.nj)().get("/api/cms/posts/pvp",{params:t})}function n(t){return(0,i.nj)().get(`/api/cms/post/${t}`)}function s(t){return(0,i.nj)().get("/api/cms/pve/skill/changelog",{params:t})}function l(t){return(0,i.nj)().get("/api/cms/post/meta",{params:t})}},42325:function(t,e,a){a.d(e,{H:function(){return s},m:function(){return n}});var i=a(27484),o=a.n(i);const n=function(t){return o()(t).format("YYYY-MM-DD hh:mm:ss")};function s(t){if("[object Object]"===Object.prototype.toString.call(t)){for(const e in t)[void 0,null,""].includes(t[e])&&delete t[e];return t}return t}},60956:function(t,e,a){a.d(e,{Z:function(){return v}});var i=a(66252),o=a(3577);const n=["href"],s=["src"],l={key:0,class:"c-avatar-frame"},r=["src"];function d(t,e,a,d,u,c){return(0,i.wg)(),(0,i.iD)("a",{class:(0,o.C_)(["c-avatar",a.size]),href:c.authorLink(a.uid)},[(0,i._)("img",{src:c.showAvatar(a.url),class:"c-avatar-pic"},null,8,s),a.frame?((0,i.wg)(),(0,i.iD)("i",l,[(0,i._)("img",{src:c.frameUrl},null,8,r)])):(0,i.kq)("",!0),(0,i.WI)(t.$slots,"default")],10,n)}var u=a(89847),c=a(17233);const{__imgPath:p}=u;var m={name:"AvatarComp",props:{uid:{type:[Number,String],default:0},url:{type:String,default:""},frame:{type:String,default:""},size:{type:[Number,String],default:"m"}},components:{},data:function(){return{frames:[],styles:{xxs:36,xs:48,s:68,m:88,l:120,xl:150}}},computed:{frameUrl:function(){return p+`avatar/images/${this.frame}/${this.frame}.svg`}},methods:{showAvatar:function(t){return(0,c.showAvatar)(t,3*this.styles[this.size])},authorLink:c.authorLink}},h=a(83744);const f=(0,h.Z)(m,[["render",d]]);var v=f},20946:function(t,e,a){a.d(e,{Z:function(){return _}});var i=a(66252),o=a(3577);function n(t,e,a,n,s,l){const r=(0,i.up)("el-input"),d=(0,i.up)("el-form-item"),u=(0,i.up)("el-option"),c=(0,i.up)("el-select"),p=(0,i.up)("el-radio-button"),m=(0,i.up)("el-radio-group"),h=(0,i.up)("el-rate"),f=(0,i.up)("el-form"),v=(0,i.up)("el-divider"),_=(0,i.up)("el-table-column"),g=(0,i.up)("el-table"),k=(0,i.up)("el-alert"),w=(0,i.up)("el-button"),y=(0,i.up)("el-dialog");return(0,i.wg)(),(0,i.j4)(y,{class:"m-design-task",width:s.isPhone?"95%":"600px","model-value":a.modelValue,onClose:l.close,title:"快捷推送","append-to-body":""},{footer:(0,i.w5)((()=>[(0,i.Wm)(w,{onClick:l.close},{default:(0,i.w5)((()=>[(0,i.Uk)("取 消")])),_:1},8,["onClick"]),(0,i.Wm)(w,{type:"primary",onClick:l.onConfirm},{default:(0,i.w5)((()=>[(0,i.Uk)("确 定")])),_:1},8,["onClick"])])),default:(0,i.w5)((()=>[(0,i.Wm)(f,{model:s.form,ref:"form","label-position":s.isPhone?"top":"left","label-width":"80px"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{label:"标题"},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{modelValue:s.form.title,"onUpdate:modelValue":e[0]||(e[0]=t=>s.form.title=t),placeholder:"请输入标题"},null,8,["modelValue"])])),_:1}),(0,i.Wm)(d,{label:"类型"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{modelValue:s.form.type,"onUpdate:modelValue":e[1]||(e[1]=t=>s.form.type=t),placeholder:"请选择类型",style:{width:"100%"},filterable:""},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.config,(t=>((0,i.wg)(),(0,i.j4)(u,{key:t.id,label:t.label,value:t.name},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,i.Wm)(d,{label:"版本"},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{modelValue:s.form.version,"onUpdate:modelValue":e[2]||(e[2]=t=>s.form.version=t)},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.versions,((t,e)=>((0,i.wg)(),(0,i.j4)(p,{key:e,label:e},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(t),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,i.Wm)(d,{label:"备注"},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{modelValue:s.form.remark,"onUpdate:modelValue":e[3]||(e[3]=t=>s.form.remark=t),placeholder:"请输入备注"},null,8,["modelValue"])])),_:1}),(0,i.Wm)(d,{label:"星级",class:"m-star-line"},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{modelValue:s.form.star,"onUpdate:modelValue":e[4]||(e[4]=t=>s.form.star=t),colors:s.colors},null,8,["modelValue","colors"])])),_:1})])),_:1},8,["model","label-position"]),(0,i.Wm)(v,{"content-position":"left"},{default:(0,i.w5)((()=>[(0,i.Uk)(" 近期推送 ")])),_:1}),s.logs&&s.logs.length?((0,i.wg)(),(0,i.j4)(g,{key:0,data:s.logs,border:"",size:"small","max-height":"300px"},{default:(0,i.w5)((()=>[(0,i.Wm)(_,{label:"推送时间",prop:"push_at",align:"center"},{default:(0,i.w5)((({row:t})=>[(0,i.Uk)((0,o.zw)(l.formatTime(t.push_at)),1)])),_:1}),(0,i.Wm)(_,{label:"推送人",prop:"pusher.display_name",align:"center"}),(0,i.Wm)(_,{label:"星级",prop:"star",align:"center"},{default:(0,i.w5)((({row:t})=>[(0,i.Wm)(h,{modelValue:t.star,"onUpdate:modelValue":e=>t.star=e,disabled:"",colors:s.colors},null,8,["modelValue","onUpdate:modelValue","colors"])])),_:1}),(0,i.Wm)(_,{label:"备注",prop:"remark",align:"center"})])),_:1},8,["data"])):((0,i.wg)(),(0,i.j4)(k,{key:1,title:"当前文章暂无历史推送",type:"info","show-icon":"",closable:!1}))])),_:1},8,["width","model-value","onClose"])}var s=a(18371);const l=t=>(0,s.nj)().post("/api/cms/design/task",t),r=t=>(0,s.nj)().get("/api/cms/design/task/log",{params:t}),d=t=>(0,s.nj)().get("/api/cms/config/banner/types",{params:t});var u=a(96486),c=a(27484),p=a.n(c),m=a(49e3),h={name:"DesignTask",props:{modelValue:{type:Boolean,default:!1},post:{type:Object,default:()=>{}}},model:{prop:"modelValue",event:"update:modelValue"},emits:["update:modelValue"],data(){return{form:{title:"",remark:"",star:0,subtype:"",version:"std"},colors:["#99A9BF","#F7BA2A","#FF9900"],logs:[],config:[],isPhone:window.innerWidth<768,isEditor:m.Z.isEditor(),versions:{std:"旗舰",origin:"缘起",wujie:"无界",test:"体服"}}},watch:{modelValue(t){t&&(this.post&&(this.form.title=this.post.post_title),this.loadLogs(),m.Z.isTeammate()&&this.loadConfig())}},methods:{close(){this.$emit("update:modelValue",!1)},clearForm(){this.form={title:"",remark:"",star:0,subtype:"",version:"std"},this.$refs?.form?.clearValidate()},onConfirm(){if(!this.post?.ID)return;const t=(0,u.pick)(this.post,["client","author"]);t.title=this.form.title,t.remark=this.form.remark,t.star=this.form.star,t.subtype=this.form.type,t.version=this.form.version,t.source_type=this.post?.post_type,t.source_id=String(this.post?.ID),t.link=`/${this.post?.post_type}/${this.post?.ID}`,t.flow=0,l(t).then((()=>{this.$message.success("提交成功"),this.close()}))},onCancel(){this.close(),this.clearForm()},loadLogs(){this.post?.ID&&r({source_id:this.post?.ID}).then((t=>{this.logs=t.data.data||[]}))},loadConfig(){d({_no_page:1}).then((t=>{this.config=t.data.data||[],this.config=this.config.filter((t=>1==t.parent_id))}))},formatTime(t){return p()(t).format("YYYY-MM-DD HH:mm:ss")}}},f=a(83744);const v=(0,f.Z)(h,[["render",n]]);var _=v},75015:function(t,e,a){a.d(e,{Z:function(){return y}});var i=a(66252),o=a(3577);const n={class:"w-thx"},s={class:"w-thx-panel"},l=(0,i._)("path",{d:"M309.9 140.6h402.9c21.1 0 38.2-17.1 38.2-38.2s-17.1-38.2-38.2-38.2H309.9c-21.1 0-38.2 17.1-38.2 38.2s17.1 38.2 38.2 38.2z",fill:"#61D0ED"},null,-1),r=(0,i._)("path",{d:"M776.3 112.1c-4.7 30.5-30.8 54-62.7 54H309.1c-31.8 0-58-23.5-62.7-54-46.2 19.1-78.7 64.5-78.7 117.6v602.7c0 70.3 57 127.3 127.3 127.3h432.7c70.3 0 127.3-57 127.3-127.3V229.7c0-53.1-32.5-98.6-78.7-117.6zm-47.9 572.1h-434c-21.1 0-38.2-17.1-38.2-38.2s17.1-38.2 38.2-38.2h433.9c21.1 0 38.2 17.1 38.2 38.2s-17.1 38.2-38.1 38.2zm0-173h-434c-21.1 0-38.2-17.1-38.2-38.2s17.1-38.2 38.2-38.2h433.9c21.1 0 38.2 17.1 38.2 38.2s-17.1 38.2-38.1 38.2zm0-173h-434c-21.1 0-38.2-17.1-38.2-38.2s17.1-38.2 38.2-38.2h433.9c21.1 0 38.2 17.1 38.2 38.2s-17.1 38.2-38.1 38.2z",fill:"#61D0ED"},null,-1),d=[l,r];function u(t,e,a,l,r,u){const c=(0,i.up)("boxcoin-admin"),p=(0,i.up)("Like"),m=(0,i.up)("fav"),h=(0,i.up)("boxcoin-user"),f=(0,i.up)("el-tooltip"),v=(0,i.up)("BoxcoinRecords"),_=(0,i.up)("el-drawer");return(0,i.wg)(),(0,i.iD)("div",n,[(0,i._)("div",s,[t.hasRight&&a.adminBoxcoinEnable&&t.boxcoin_enable?((0,i.wg)(),(0,i.j4)(c,{key:0,postId:a.postId,postType:a.postType,userId:a.userId,max:t.admin_max,min:t.admin_min,own:t.admin_left,total:t.admin_total,points:t.admin_points,authors:a.authors,onUpdateRecord:u.updateRecord,client:a.client},null,8,["postId","postType","userId","max","min","own","total","points","authors","onUpdateRecord","client"])):(0,i.kq)("",!0),(0,i.Wm)(p,{postId:a.postId,postType:a.postType},null,8,["postId","postType"]),(0,i.Wm)(m,{postId:a.postId,postType:a.postType,postTitle:a.postTitle},null,8,["postId","postType","postTitle"]),a.userBoxcoinEnable&&t.boxcoin_enable&&a.allowGift?((0,i.wg)(),(0,i.j4)(h,{key:1,postId:a.postId,postType:a.postType,boxcoin:t.boxcoin,userId:a.userId,own:t.user_left,points:t.user_points,authors:a.authors,onUpdateRecord:u.updateRecord,client:a.client},null,8,["postId","postType","boxcoin","userId","own","points","authors","onUpdateRecord","client"])):(0,i.kq)("",!0),(0,i.Wm)(f,{effect:"dark",content:"打赏记录",placement:"top-start"},{default:(0,i.w5)((()=>[((0,i.wg)(),(0,i.iD)("svg",{class:(0,o.C_)(["icon","u-record-icon"]),viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:"200",height:"200","svg-inline":"",onClick:e[0]||(e[0]=(...t)=>u.onRecord&&u.onRecord(...t)),role:"presentation",focusable:"false",tabindex:"-1"},d))])),_:1})]),(0,i.Wm)(_,{modelValue:t.showDrawer,"onUpdate:modelValue":e[1]||(e[1]=e=>t.showDrawer=e),title:"打赏记录","append-to-body":""},{default:(0,i.w5)((()=>[(0,i.Wm)(v,{postId:a.postId,postType:a.postType,postClient:a.client,cacheRecord:t.cacheRecord,mode:a.mode,"onUpdate:boxcoin":u.updateBoxcoin},null,8,["postId","postType","postClient","cacheRecord","mode","onUpdate:boxcoin"])])),_:1},8,["modelValue"])])}var c=a(63553),p=a(57039),m=a(65801),h=a(5856),f=a(81128),v=a(49e3),_=a(50855),g={name:"SimpleThx",components:{Like:c.Z,Fav:p.Z,BoxcoinAdmin:m.Z,BoxcoinUser:h.Z,BoxcoinRecords:f.Z},props:{type:{type:String,default:"normal"},postId:{type:Number,default:0},postType:{type:String,default:""},postTitle:{type:String,default:""},userId:{type:Number,default:0},authors:{type:Array,default:()=>[]},mode:{type:String,default:"normal"},client:{type:String,default:"std"},allowGift:{type:[Number,Boolean],default:1},adminBoxcoinEnable:{type:Boolean,default:!1},userBoxcoinEnable:{type:Boolean,default:!1},presetConfig:{type:Object,default:()=>({})}},data:function(){return{boxcoin:0,hasRight:v.Z.getInfo().group>=32,user:v.Z.getInfo(),admin_max:0,admin_min:0,admin_left:0,admin_total:0,admin_points:[100],user_left:0,user_points:[100],cacheRecord:null,boxcoin_enable:0,showDrawer:!1}},computed:{post_keys:function(){return[this.postId,this.postType]}},watch:{post_keys:{immediate:!0,deep:!0,handler:function(){this.postType&&this.postId&&this.loadBoxcoinConfig()}}},methods:{loadBoxcoinConfig:function(){if(Object.keys(this.presetConfig)?.length)return this.admin_max=this.presetConfig.admin_max||0,this.admin_min=this.presetConfig.admin_min||0,this.admin_points=this.presetConfig.admin_points||[10,1e3],this.admin_left=this.presetConfig.admin_left||0,this.admin_total=this.presetConfig.admin_total||0,this.user_points=this.presetConfig.user_points||[10,1e3],this.user_left=this.presetConfig.user_left||0,void(this.boxcoin_enable=this.presetConfig.boxcoin_enable||0);v.Z.isLogin()&&(0,_.PD)(this.postType).then((t=>{this.admin_max=t.data.data.limit.admin_max||0,this.admin_min=t.data.data.limit.admin_min||0,this.admin_points=t.data.data.limit.admin_points||[10,1e3],this.admin_left=t.data.data.asManagerBoxCoinRemain||0,this.admin_total=t.data.data.asManagerBoxCoinTotal||0,this.user_points=t.data.data.limit.user_points||[10,1e3],"origin"==this.client?this.user_left=t.data.data.asUserBoxCoinRemainOrigin+t.data.data.asUserBoxCoinRemainAll:"std"==this.client?this.user_left=t.data.data.asUserBoxCoinRemainStd+t.data.data.asUserBoxCoinRemainAll:this.user_left=t.data.data.asUserBoxCoinRemainAll+t.data.data.asUserBoxCoinRemainStd+t.data.data.asUserBoxCoinRemainOrigin})),(0,_.hq)().then((t=>{this.boxcoin_enable=!!~~t.data?.data?.val}))},updateRecord:function(t){this.cacheRecord=t},onRecord:function(){this.showDrawer=!0},updateBoxcoin:function(t){this.boxcoin=t}}},k=a(83744);const w=(0,k.Z)(g,[["render",u]]);var y=w},98908:function(t,e,a){a.r(e),a.d(e,{default:function(){return Pt}});var i=a(66252);function o(t,e,a,o,n,s){const l=(0,i.up)("CompetitiveTrick"),r=(0,i.up)("ListLayout");return(0,i.wg)(),(0,i.j4)(r,null,{default:(0,i.w5)((()=>[(0,i.Wm)(l)])),_:1})}var n=a(24239),s=a(31286);const l={class:"m-competitive-trick"},r={key:0,class:"m-competitive-trick"};function d(t,e,a,o,n,s){const d=(0,i.up)("TrickNotice"),u=(0,i.up)("TrickHeader"),c=(0,i.up)("CompetitiveTrickItemVue"),p=(0,i.up)("el-alert"),m=(0,i.up)("design-task"),h=(0,i.Q2)("loading");return(0,i.wg)(),(0,i.iD)("div",l,[(0,i.Wm)(d),(0,i.Wm)(u,{onFilterImperceptibly:s.filterImperceptibly,onFilterMeta:s.filterMeta,onSearch:s.onSearch},null,8,["onFilterImperceptibly","onFilterMeta","onSearch"]),n.data.length?(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",r,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.data,(t=>((0,i.wg)(),(0,i.j4)(c,{key:t.id,data:t,preset:n.presetConfig},null,8,["data","preset"])))),128))])),[[h,n.loading]]):((0,i.wg)(),(0,i.j4)(p,{key:1,class:"m-strategy-null",title:"没有找到相关条目",type:"info",center:"","show-icon":""})),(0,i.Wm)(m,{modelValue:n.showDesignTask,"onUpdate:modelValue":e[0]||(e[0]=t=>n.showDesignTask=t),post:n.currentPost},null,8,["modelValue","post"])])}a(57658);var u=a(86607),c=a(3577),p=a(49963),m=a.p+"img/video.d285c52a.svg";const h={key:0,class:"m-trick-item"},f={class:"m-trick-item__header"},v={class:"m-trick-item__title"},_={key:0,class:"u-label u-zlp"},g=["href"],k={key:1,class:"u-marks"},w={key:2,class:"u-tv"},y=(0,i._)("img",{class:"u-tv-icon",src:m},null,-1),b=[y],D={class:"m-trick-item__thx"},x={key:0,class:"u-push"},C=(0,i._)("path",{d:"M655.36 0H368.64C165.888 0 0 165.888 0 368.64V921.6C0 977.92 46.08 1024 102.4 1024h552.96C859.136 1024 1024 859.136 1024 655.36V368.64C1024 165.888 858.112 0 655.36 0zM366.08 344.064c28.16 0 51.2 23.04 51.2 51.2s-23.04 51.2-51.2 51.2-51.2-23.04-51.2-51.2 23.04-51.2 51.2-51.2zM697.344 606.72c0 90.112-86.528 163.328-176.128 163.328h-18.432c-90.112 0-176.128-73.216-176.128-163.328 0-29.184 24.064-53.248 53.248-53.248H645.12c28.672 0 52.224 23.552 52.224 53.248zM657.92 446.464c-28.16 0-51.2-23.04-51.2-51.2s23.04-51.2 51.2-51.2 51.2 23.04 51.2 51.2-23.04 51.2-51.2 51.2z",fill:"#DD6572"},null,-1),I=[C],T={class:"m-trick-item__content"},W={class:"m-trick-item__left"},V=["href"],B={class:"u-name"},U={class:"m-trick-item__right"},z={key:0,class:"m-header"},q=["innerHTML"],S={class:"m-content"},Z={key:0,class:"m-talent"},j={class:"m-talent__title"},R=["src"],M={key:0,class:"u-desc"},L=["innerHTML"],H={class:"m-skills"},$={class:"u-title"},F=["src"],P={key:0,class:"u-skills"},A=["src","alt","title"],Y=["title"],O={class:"u-gcd-icon",title:"无GCD技能"},N={key:1,class:"u-desc"};function E(t,e,a,o,n,s){var l,r,d,u,m,y,C,E,K,J,G,Q,X,tt,et,at,it,ot;const nt=(0,i.up)("el-button"),st=(0,i.up)("SimpleThx"),lt=(0,i.up)("el-tooltip"),rt=(0,i.up)("Avatar"),dt=(0,i.up)("Clock"),ut=(0,i.up)("el-icon"),ct=(0,i.up)("Comment"),pt=(0,i.up)("el-drawer");return s.hasData?((0,i.wg)(),(0,i.iD)("div",h,[(0,i._)("div",f,[(0,i._)("div",v,[a.data.zlp?((0,i.wg)(),(0,i.iD)("span",_,(0,c.zw)(a.data.zlp),1)):(0,i.kq)("",!0),(0,i._)("a",{class:"u-link",href:`/pvp/${null===(l=a.data)||void 0===l?void 0:l.ID}`,target:"_blank"},(0,c.zw)(a.data.post_title||"未知流派"),9,g),a.data.mark&&a.data.mark.length?((0,i.wg)(),(0,i.iD)("span",k,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.data.mark,(t=>((0,i.wg)(),(0,i.iD)("i",{class:"u-mark",key:t},(0,c.zw)(s.showMark(t)),1)))),128))])):(0,i.kq)("",!0),a.data.include_video?((0,i.wg)(),(0,i.iD)("span",w,b)):(0,i.kq)("",!0)]),(0,i._)("div",D,[s.hasPermission?((0,i.wg)(),(0,i.iD)("span",x,[s.showPushDate?((0,i.wg)(),(0,i.iD)("time",{key:0,class:(0,c.C_)(["u-push__time",{"is-recent":s.isRecent()}])},(0,c.zw)(s.pushDate)+" 已推送",3)):(0,i.kq)("",!0),(0,i.Wm)(nt,{class:"u-push__btn",size:"small",type:"warning",onClick:s.onPush,icon:"Promotion"},{default:(0,i.w5)((()=>[(0,i.Uk)("推送")])),_:1},8,["onClick"])])):(0,i.kq)("",!0),(0,i.Wm)(st,{postType:"pvp",postTitle:null===(r=a.data)||void 0===r?void 0:r.post_title,userId:null===(d=a.data)||void 0===d?void 0:d.post_author,adminBoxcoinEnable:!0,userBoxcoinEnable:!0,postId:null===(u=a.data)||void 0===u?void 0:u.ID,presetConfig:a.preset},null,8,["postTitle","userId","postId","presetConfig"]),(0,i.Wm)(lt,{content:"评论",placement:"top-start"},{default:(0,i.w5)((()=>[((0,i.wg)(),(0,i.iD)("svg",{class:(0,c.C_)(["icon","u-icon"]),viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:"200",height:"200","svg-inline":"",onClick:e[0]||(e[0]=t=>n.showComment=!0),role:"presentation",focusable:"false",tabindex:"-1"},I))])),_:1})])]),(0,i._)("div",T,[(0,i._)("div",W,[(0,i._)("a",{class:"m-author",href:s.authorLink(null===(m=a.data)||void 0===m?void 0:m.post_author)},[(0,i.Wm)(rt,{class:"u-avatar",uid:null===(y=a.data)||void 0===y?void 0:y.post_author,size:"s",url:null===(C=a.data.author_info)||void 0===C?void 0:C.user_avatar,frame:null===(E=a.data.author_info)||void 0===E?void 0:E.user_avatar_frame},null,8,["uid","url","frame"]),(0,i._)("span",B,(0,c.zw)(null===(K=a.data.author_info)||void 0===K?void 0:K.display_name),1)],8,V)]),(0,i._)("div",U,[null!==(J=a.data)&&void 0!==J&&null!==(G=J.post_meta)&&void 0!==G&&G.content?((0,i.wg)(),(0,i.iD)("div",z,[(0,i._)("div",{innerHTML:s.nl2br(null===(Q=a.data)||void 0===Q||null===(X=Q.post_meta)||void 0===X?void 0:X.content)},null,8,q)])):(0,i.kq)("",!0),(0,i._)("div",S,[Object.keys(s.talent).length?((0,i.wg)(),(0,i.iD)("div",Z,[(0,i._)("div",j,[(0,i._)("img",{class:"u-icon",src:s.getAppIcon("talent"),alt:""},null,8,R),(0,i.Uk)(" 奇穴 ")]),(0,i._)("div",{class:(0,c.C_)(["m-talent-box",`m-qx-container-${null===(tt=a.data)||void 0===tt?void 0:tt.ID}`])},null,2),null!==(et=a.data)&&void 0!==et&&null!==(at=et.post_meta)&&void 0!==at&&at.talent_desc?((0,i.wg)(),(0,i.iD)("div",M,[(0,i.Uk)(" 奇穴讲解："),(0,i._)("span",{innerHTML:s.nl2br(null===(it=a.data)||void 0===it||null===(ot=it.post_meta)||void 0===ot?void 0:ot.talent_desc)},null,8,L)])):(0,i.kq)("",!0)])):(0,i.kq)("",!0),(0,i._)("div",H,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.skills,((t,e)=>((0,i.wg)(),(0,i.iD)("div",{class:"m-skill-item",key:e},[(0,i._)("div",$,[(0,i._)("img",{class:"u-icon",src:s.getAppIcon("pvp"),alt:""},null,8,F),(0,i.Uk)(" 连招："+(0,c.zw)(t.name),1)]),t.sq?((0,i.wg)(),(0,i.iD)("div",P,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.sq,((t,e)=>((0,i.wg)(),(0,i.iD)("span",{key:t.SkillID+""+e,class:"u-skill"},[(0,i._)("img",{class:"u-skill-icon",src:s.iconLink(t.IconID),alt:t.IconID,title:t.Name},null,8,A),(0,i._)("span",{class:"u-skill-name",title:t.Name},(0,c.zw)(t.Name),9,Y),(0,i.wy)((0,i._)("i",O,[(0,i.Wm)(ut,null,{default:(0,i.w5)((()=>[(0,i.Wm)(dt)])),_:1})],512),[[p.F8,t.WithoutGcd]])])))),128))])):(0,i.kq)("",!0),t.desc?((0,i.wg)(),(0,i.iD)("div",N,"连招说明："+(0,c.zw)(t.desc),1)):(0,i.kq)("",!0)])))),128))])])])]),(0,i.Wm)(pt,{title:"评论",modelValue:n.showComment,"onUpdate:modelValue":e[1]||(e[1]=t=>n.showComment=t),"destroy-on-close":"",class:"m-trick-drawer"},{default:(0,i.w5)((()=>{var t;return[(0,i.Wm)(ct,{category:"post",id:null===(t=a.data)||void 0===t?void 0:t.ID},null,8,["id"])]})),_:1},8,["modelValue"])])):(0,i.kq)("",!0)}var K=a(17233),J=a(957),G=a(75015),Q=a(18368),X=a(60956),tt=a(23910),et=a(26060),at=a(49e3),it=a(65113),ot=a(27484),nt=a.n(ot),st={name:"CompetitiveTrickItem",components:{SimpleThx:G.Z,Comment:Q.Z,Avatar:X.Z},props:{preset:{type:Object,default:()=>{}},data:{type:Object,default:()=>{}}},data(){return{talentDriver:null,showComment:!1}},computed:{talent(){try{var t,e;return JSON.parse(null===(t=this.data)||void 0===t||null===(e=t.post_meta)||void 0===e?void 0:e.talent)}catch(a){return{}}},hasData(){var t;return!(null===(t=this.data)||void 0===t||!t.ID)},skills(){var t;return null===(t=this.data)||void 0===t?void 0:t.post_meta.data},hasPermission(){return at.Z.hasPermission("push_banner")},pushDate({data:t}){var e;const a=null===t||void 0===t||null===(e=t.log)||void 0===e?void 0:e.push_at;return(0,et.s2)(new Date(a))},showPushDate(){var t;return Boolean(null===(t=this.data)||void 0===t?void 0:t.log)}},watch:{data:{deep:!0,immediate:!0,handler(){this.talentDriver||this.$nextTick((()=>{this.installTalent()}))}},talent:{deep:!0,handler(){this.reloadTalent()}}},methods:{authorLink:K.authorLink,iconLink:K.iconLink,getAppIcon:K.getAppIcon,installTalent(){var t;this.talentDriver=new J.Z({container:`.m-qx-container-${null===(t=this.data)||void 0===t?void 0:t.ID}`,version:this.talent.version,xf:this.talent.xf,editable:!1,sq:this.talent.sq})},reloadTalent(){this.$nextTick((()=>{var t;this.talentDriver&&(null===(t=this.talentDriver)||void 0===t||t.then((t=>{t.load({version:this.talent.version,xf:this.talent.xf,editable:!1,sq:this.talent.sq})})))}))},nl2br(t){return t.replace(/\n/g,"<br/>")},showMark:function(t){return tt.cms[t]||t},showDate:et.s2,isRecent:function(){var t,e;const a=null===(t=this.data)||void 0===t||null===(e=t.log)||void 0===e?void 0:e.push_at;return nt()().diff(nt()(a),"day")<30},onPush(){it.Z.emit("design-task",this.data)}}},lt=a(83744);const rt=(0,lt.Z)(st,[["render",E]]);var dt=rt;const ut={class:"m-notice-top"},ct=(0,i._)("div",{class:"m-notice-top__header"},[(0,i._)("h3",{class:"u-title"},[(0,i._)("i",{class:"el-icon-news"}),(0,i.Uk)("公告")])],-1),pt={class:"m-notice-top__content"},mt={class:"m-item_left"},ht=["innerHTML"];function ft(t,e,a,o,n,s){return(0,i.wg)(),(0,i.iD)("div",ut,[ct,(0,i._)("div",pt,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.data,(t=>((0,i.wg)(),(0,i.iD)("div",{class:"m-notice-top__item",key:t.id},[(0,i._)("div",mt,[(0,i._)("span",{class:"u-title",innerHTML:t},null,8,ht)])])))),128))])])}var vt=a(2950),_t={data(){return{data:[]}},mounted(){this.getBreadcrumb()},methods:{getBreadcrumb(){try{const t=sessionStorage.getItem("pvp_ac");t?this.data=JSON.parse(t):(0,vt.k)("pvp_ac").then((t=>{var e,a;console.log(t);const i=(null===(e=t.data)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.html)||"";this.data=i.split("\n"),sessionStorage.setItem("pvp_ac",JSON.stringify(this.data))}))}catch(t){this.data=[]}}}};const gt=(0,lt.Z)(_t,[["render",ft]]);var kt=gt;const wt={class:"c-macro__header"},yt={class:"m-archive-search"},bt=["href"],Dt={class:"u-search"},xt=(0,i._)("span",{class:"u-search"},"关键词",-1),Ct={key:0,class:"m-archive-filter"},It={class:"m-filter--left"},Tt={class:"m-filter--right"};function Wt(t,e,a,o,n,s){const l=(0,i.up)("Search"),r=(0,i.up)("el-icon"),d=(0,i.up)("el-button"),u=(0,i.up)("el-input"),c=(0,i.up)("clientBy"),m=(0,i.up)("markBy"),h=(0,i.up)("zlpBy"),f=(0,i.up)("orderBy");return(0,i.wg)(),(0,i.iD)("div",wt,[(0,i._)("div",yt,[(0,i._)("a",{href:s.publish_link,class:"u-publish el-button el-button--primary el-button--large"},"+ 发布作品",8,bt),(0,i.Wm)(u,{placeholder:"请输入搜索内容",modelValue:n.search,"onUpdate:modelValue":e[0]||(e[0]=t=>n.search=t),modelModifiers:{trim:!0,lazy:!0},clearable:"",onClear:s.onSearch,onKeydown:(0,p.D2)(s.onSearch,["enter"]),size:"large"},{prepend:(0,i.w5)((()=>[(0,i._)("span",Dt,[(0,i.Wm)(r,null,{default:(0,i.w5)((()=>[(0,i.Wm)(l)])),_:1}),(0,i.Uk)(),xt])])),append:(0,i.w5)((()=>[(0,i.Wm)(d,{icon:"Position",class:"u-btn",onClick:s.onSearch},null,8,["onClick"])])),_:1},8,["modelValue","onClear","onKeydown"])]),a.canFilter?((0,i.wg)(),(0,i.iD)("div",Ct,[(0,i._)("div",It,[(0,i.Wm)(c,{onFilter:s.filterImperceptibly,type:n.client,showWujie:!0},null,8,["onFilter","type"]),(0,i.Wm)(m,{onFilter:s.filterMeta},null,8,["onFilter"]),(0,i.Wm)(h,{onFilter:s.filterMeta,type:"zlp",client:n.client},null,8,["onFilter","client"])]),(0,i._)("div",Tt,[(0,i.Wm)(f,{onFilter:s.filterMeta},null,8,["onFilter"])])])):(0,i.kq)("",!0)])}var Vt=a(60063),Bt={name:"TrickHeader",props:{canFilter:{type:Boolean,default:!0}},data(){return{search:"",client:(0,n.o)().client}},computed:{publish_link:function(){return(0,K.publishLink)(Vt.mx)}},methods:{filterImperceptibly(t){this.$emit("filterImperceptibly",t)},filterMeta(t){this.$emit("filterMeta",t)},onSearch(){this.$emit("search",this.search)}}};const Ut=(0,lt.Z)(Bt,[["render",Wt]]);var zt=Ut,qt=a(96486),St=a(42325),Zt=a(18371);const jt=t=>(0,Zt.nj)().get("/api/cms/design/task/log",{params:t});var Rt=a(20946),Mt={name:"CompetitiveTrick",components:{CompetitiveTrickItemVue:dt,TrickNotice:kt,TrickHeader:zt,DesignTask:Rt.Z},data(){return{data:[],search:"",client:"",presetConfig:{},loading:!1,currentPost:null,showDesignTask:!1}},computed:{subtype(){var t;return(null===(t=this.$route.query)||void 0===t?void 0:t.subtype)||"冰心诀"},mark(){var t;return(null===(t=this.$route.query)||void 0===t?void 0:t.mark)||""},order(){var t;return(null===(t=this.$route.query)||void 0===t?void 0:t.order)||""},zlp(){var t;return(null===(t=this.$route.query)||void 0===t?void 0:t.zlp)||""},query:function(){return{sticky:1,subtype:this.subtype,order:this.order,mark:this.mark,client:this.client,search:this.search,zlp:this.zlp}}},watch:{query:{immediate:!0,deep:!0,handler(){this.loadData()}}},mounted(){it.Z.on("design-task",(t=>{this.currentPost=t,this.showDesignTask=!0}))},beforeUnmount(){it.Z.off("design-task")},methods:{publishLink:K.publishLink,loadData(){this.loading=!0;const t=(0,St.H)((0,qt.cloneDeep)(this.query));(0,u.Jq)(t).then((async t=>{if(this.data=t.data.data.list||[],at.Z.hasPermission("push_banner")&&!this.isPhone){const t=this.data.map((t=>t.ID)),e=await jt({source_type:"pvp",ids:t.join(",")}).then((t=>t.data.data));this.data=this.data.map((t=>{const a=e.find((e=>e.source_id==t.ID))||null;return t.log=a,t}))}})).finally((()=>{this.loading=!1}))},onSearch:function(t){this.search=t},filterImperceptibly:function(t){this[t["type"]]=t["val"]},filterMeta:function(t){this.replaceRoute({[t["type"]]:t["val"]})},replaceRoute:function(t){return this.$router.push({name:this.$route.name,query:Object.assign({},this.$route.query,t)}).then((()=>{window.scrollTo(0,0)})).catch((()=>{}))}}};const Lt=(0,lt.Z)(Mt,[["render",d]]);var Ht=Lt,$t={name:"PostView",components:{ListLayout:s.Z,CompetitiveTrick:Ht},props:[],data:function(){return{}},computed:{client(){return(0,n.o)().client}}};const Ft=(0,lt.Z)($t,[["render",o]]);var Pt=Ft},60063:function(t){t.exports={mx:"pvp"}}}]);
//# sourceMappingURL=938.fd699905.js.map