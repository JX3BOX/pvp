"use strict";(self["webpackChunkpvp"]=self["webpackChunkpvp"]||[]).push([[511],{26060:function(t,e,l){l.d(e,{f3:function(){return n},s2:function(){return s}});var a=l(30381),i=l.n(a);function s(t){return i()(t).format("YYYY-MM-DD")}function n(t){return i()(t).format("YYYY-MM-DD HH:mm:ss")}i().locale("zh-cn",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY年MM月DD日",LLL:"YYYY年MM月DD日Ah点mm分",LLLL:"YYYY年MM月DD日ddddAh点mm分",l:"YYYY-M-D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(t,e){return 12===t&&(t=0),"凌晨"===e||"早上"===e||"上午"===e?t:"下午"===e||"晚上"===e?t+12:t>=11?t:t+12},meridiem:function(t,e,l){const a=100*t+e;return a<600?"凌晨":a<900?"早上":a<1130?"上午":a<1230?"中午":a<1800?"下午":"晚上"},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:"[下]ddddLT",lastDay:"[昨天]LT",lastWeek:"[上]ddddLT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(日|月|周)/,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"日";case"M":return t+"月";case"w":case"W":return t+"周";default:return t}},relativeTime:{future:"%s内",past:"%s前",s:"几秒",ss:"%d秒",m:"1分钟",mm:"%d分钟",h:"1小时",hh:"%d小时",d:"1天",dd:"%d天",M:"1个月",MM:"%d个月",y:"1年",yy:"%d年"},week:{dow:1,doy:4}})},93511:function(t,e,l){l.r(e),l.d(e,{default:function(){return At}});var a=l(66252);const i={class:"m-cj-content"};function s(t,e,l,s,n,o){const r=(0,a.up)("CJIndex"),u=(0,a.up)("CJExtra"),d=(0,a.up)("ListLayout");return(0,a.wg)(),(0,a.j4)(d,null,{default:(0,a.w5)((()=>[(0,a._)("div",i,[(0,a.Wm)(r),(0,a.Wm)(u)])])),_:1})}var n=l(79851);const o={class:"m-cj-index"},r={class:"m-select"},u=(0,a._)("label",{class:"u-label"},"地图",-1),d={key:0,class:"m-map"},c=["src"];function m(t,e,l,i,s,n){const m=(0,a.up)("el-option"),p=(0,a.up)("el-select"),h=(0,a.Q2)("loading");return(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("div",r,[u,(0,a.Wm)(p,{modelValue:s.map,"onUpdate:modelValue":e[0]||(e[0]=t=>s.map=t)},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.maps,(t=>((0,a.wg)(),(0,a.j4)(m,{key:t.value,label:t.label,value:t.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])]),s.map?((0,a.wg)(),(0,a.iD)("div",d,[(0,a._)("img",{class:"u-map",src:n.getMapImage(s.map)},null,8,c)])):(0,a.kq)("",!0)])),[[h,s.loading]])}l(57658);var p=l(18371),h=l(89847),g=l(6154);function v(){return g.Z.get(h.__imgPath+"map/data/map_index.json")}function _(t){let e={type:"bps",tag:"PVP",topic:"吃鸡"};return t&&(e=Object.assign(e,t)),(0,p.nj)().get("/api/cms/posts",{params:e})}function k(t){return(0,p.qT)().get("/desert/list",{params:t})}var w={name:"CJIndex",data(){return{loading:!1,maps:[],map:null}},methods:{async getMapList(){const t=sessionStorage.getItem("cj_maps");if(t){var e;const l=JSON.parse(t);this.maps=l,this.map=(null===l||void 0===l||null===(e=l[0])||void 0===e?void 0:e.value)||null}else{var l;const t=await v(),{data:e}=t,a=[];for(let l in e)e[l].indexOf("绝境")>-1&&a.push({label:e[l],value:~~l});sessionStorage.setItem("cj_maps",JSON.stringify(a)),this.maps=a,this.map=(null===a||void 0===a||null===(l=a[0])||void 0===l?void 0:l.value)||null}},getMapImage(t){return`${h.__imgPath}map/maps/map_${t}_0.png`}},mounted(){this.getMapList()}},y=l(83744);const f=(0,y.Z)(w,[["render",m]]);var D=f;const b={class:"m-cj-extra"},L=(0,a._)("b",null,"技能查询",-1),Y=(0,a._)("b",null,"吃鸡攻略",-1);function S(t,e,l,i,s,n){const o=(0,a.up)("Files"),r=(0,a.up)("el-icon"),u=(0,a.up)("CJSkill"),d=(0,a.up)("el-tab-pane"),c=(0,a.up)("Collection"),m=(0,a.up)("CJStrategy"),p=(0,a.up)("el-tabs");return(0,a.wg)(),(0,a.iD)("div",b,[(0,a.Wm)(p,{class:"m-tabs m-extra-tabs",modelValue:s.view,"onUpdate:modelValue":e[0]||(e[0]=t=>s.view=t),onTabClick:n.handleClick},{default:(0,a.w5)((()=>["origin"===n.client?((0,a.wg)(),(0,a.j4)(d,{key:0,label:"技能查询",name:"skill"},{label:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Wm)(o)])),_:1}),L])),default:(0,a.w5)((()=>["skill"===s.view?((0,a.wg)(),(0,a.j4)(u,{key:0})):(0,a.kq)("",!0)])),_:1})):(0,a.kq)("",!0),(0,a.Wm)(d,{label:"攻略",name:"strategy"},{label:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c)])),_:1}),Y])),default:(0,a.w5)((()=>["strategy"===s.view?((0,a.wg)(),(0,a.j4)(m,{key:0})):(0,a.kq)("",!0)])),_:1})])),_:1},8,["modelValue","onTabClick"])])}var I=l(24239),C=l(49963);const M={class:"m-cj-strategy"},T={key:0,class:"m-strategy-list"};function q(t,e,l,i,s,n){const o=(0,a.up)("ListItem"),r=(0,a.up)("el-alert"),u=(0,a.up)("el-button"),d=(0,a.up)("el-pagination"),c=(0,a.Q2)("loading");return(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",M,[s.list.length?((0,a.wg)(),(0,a.iD)("div",T,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.list,(t=>((0,a.wg)(),(0,a.j4)(o,{key:t.post_id,item:t,order:n.params.order},null,8,["item","order"])))),128))])):((0,a.wg)(),(0,a.j4)(r,{key:1,class:"m-strategy-null",title:"没有找到相关条目",type:"info",center:"","show-icon":""})),(0,a.wy)((0,a.Wm)(u,{class:"m-strategy-more",type:"primary",onClick:n.appendPage,loading:s.loading,icon:"el-icon-arrow-down"},{default:(0,a.w5)((()=>[(0,a.Uk)("加载更多")])),_:1},8,["onClick","loading"]),[[C.F8,n.hasNextPage]]),(0,a.Wm)(d,{class:"m-strategy-pages",background:"",layout:"total, prev, pager, next","hide-on-single-page":!0,total:s.total,"current-page":s.page,onCurrentChange:n.changePage},null,8,["total","current-page","onCurrentChange"])])),[[c,s.loading]])}var H=l(96486),j=l(3577);const z={class:"u-item"},x=["href","target"],V=["src"],W={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 16",width:"12",height:"16","aria-hidden":"true",fill:"#555",class:(0,j.C_)("u-icon"),"svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"},J=(0,a._)("path",{"fill-rule":"evenodd",d:"M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"},null,-1),N=[J],P=["href","target"],O={key:0,class:"u-marks"},$={class:"u-content u-desc"},U={key:0,class:"u-metalist u-boss-list"},Z=(0,a._)("strong",null,"首领",-1),Q=["onClick"],A={key:1,class:"u-metalist u-mode-list c-jx3fb-mode"},K=(0,a._)("strong",null,"模式",-1),F={class:"u-misc"},B=["src","alt"],E=["href"],R={class:"u-date"},G={key:0},X={key:1};function tt(t,e,l,i,s,n){return(0,a.wg)(),(0,a.iD)("div",z,[(0,a._)("a",{class:"u-banner",href:n.postLink(l.item.ID),target:t.target},[((0,a.wg)(),(0,a.iD)("img",{src:n.getBanner(l.item),key:l.item.ID},null,8,V))],8,x),(0,a._)("h2",{class:(0,j.C_)(["u-post",{isSticky:l.item.sticky}])},[((0,a.wg)(),(0,a.iD)("svg",W,N)),(0,a._)("a",{class:"u-title",style:(0,j.j5)(n.showHighlight(l.item.color)),href:n.postLink(l.item.ID),target:t.target},(0,j.zw)(l.item.post_title||"无标题"),13,P),l.item.mark&&l.item.mark.length?((0,a.wg)(),(0,a.iD)("span",O,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.item.mark,(t=>((0,a.wg)(),(0,a.iD)("i",{class:"u-mark",key:t},(0,j.zw)(n.showMark(t)),1)))),128))])):(0,a.kq)("",!0)],2),(0,a._)("div",$,[l.item.post_meta&&l.item.post_meta.fb_boss?((0,a.wg)(),(0,a.iD)("div",U,[Z,(0,a._)("em",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.format(l.item,"fb_boss"),((t,e)=>((0,a.wg)(),(0,a.iD)("b",{key:e,onClick:e=>n.addTopic(t)},(0,j.zw)(t),9,Q)))),128))])])):(0,a.kq)("",!0),l.item.post_meta&&l.item.post_meta.fb_level?((0,a.wg)(),(0,a.iD)("div",A,[K,(0,a._)("em",null,(0,j.zw)(n.format(l.item,"fb_level").join("、")),1)])):(0,a.kq)("",!0)]),(0,a._)("div",F,[(0,a._)("img",{class:"u-author-avatar",src:n.showAvatar(l.item.author_info),alt:n.showNickname(l.item.author_info)},null,8,B),(0,a._)("a",{class:"u-author-name",href:n.authorLink(l.item.post_author),target:"_blank"},(0,j.zw)(n.showNickname(l.item.author_info)),9,E),(0,a._)("span",R,[(0,a.Uk)(" Updated on "),"update"==l.order?((0,a.wg)(),(0,a.iD)("time",G,(0,j.zw)(n.dateFormat(l.item.post_modified)),1)):((0,a.wg)(),(0,a.iD)("time",X,(0,j.zw)(n.dateFormat(l.item.post_date)),1))])])])}var et=l(17233),lt=l(23910),at=l(26060),it={name:"ListItem",props:["item","order","caller"],components:{},data:function(){return{target:(0,et.buildTarget)()}},computed:{client(){var t;return null===(t=this.item)||void 0===t?void 0:t.client},rootLink(){return"std"!==this.client?h.__OriginRoot:h.__Root}},watch:{},methods:{getBanner:function(t){return t.post_banner?(0,et.showBanner)(t.post_banner):h.__imgPath+"image/fb_map_thumbnail/null.png"},format:function(t,e){var l;let a=null===t||void 0===t||null===(l=t.post_meta)||void 0===l?void 0:l[e];return a&&a.length?a:["-"]},addTopic(t){this.$router.push({query:{topic:t}})},postLink(t){return`${this.rootLink}bps/${t}`},authorLink:et.authorLink,showHighlight(t){return t?`color:${t};font-weight:600;`:""},showMark:function(t){return lt.I[t]||t},showAvatar:function(t){return(0,et.showAvatar)(null===t||void 0===t?void 0:t.user_avatar)},showNickname:function(t){return(null===t||void 0===t?void 0:t.display_name)||"匿名"},dateFormat:function(t){return(0,at.s2)(new Date(t))}}};const st=(0,y.Z)(it,[["render",tt]]);var nt=st,ot={name:"CJStrategy",components:{ListItem:nt},data(){return{page:1,pages:1,per:10,total:0,loading:!1,list:[]}},computed:{hasNextPage:function(){return this.pages>1&&this.page<this.pages},params(){return{page:this.page,per:this.per}},query(){return{subtype:this.$route.query.subtype,client:(0,I.o)().client,order:"update"}}},watch:{query:{deep:!0,handler:function(){this.page=1,this.load()}}},methods:{load(t=!1){const e={...(0,H.cloneDeep)(this.params),...(0,H.cloneDeep)(this.query)};e.subtype?e.sticky=1:delete e.subtype,this.loading=!0,_(e).then((e=>{var l,a,i,s,n,o,r,u;t?this.list=this.list.concat(null===(n=e.data)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.list):this.list=null===(r=e.data)||void 0===r||null===(u=r.data)||void 0===u?void 0:u.list;this.total=null===(l=e.data)||void 0===l||null===(a=l.data)||void 0===a?void 0:a.total,this.pages=null===(i=e.data)||void 0===i||null===(s=i.data)||void 0===s?void 0:s.pages})).finally((()=>{this.loading=!1}))},changePage(t){this.page=t,this.load()},appendPage(){this.page++,this.load(!0)}},mounted(){this.load()}};const rt=(0,y.Z)(ot,[["render",q]]);var ut=rt;const dt={class:"m-cj-skill"},ct={class:"m-search"},mt={key:0,class:"m-skill-list"},pt=(0,a._)("div",{class:"u-skill-item"},[(0,a._)("div",{class:"u-td"},"技能名称"),(0,a._)("div",{class:"u-td"},"品质"),(0,a._)("div",{class:"u-td"},"效果")],-1),ht={key:1,class:"u-no-data"};function gt(t,e,l,i,s,n){const o=(0,a.up)("el-option"),r=(0,a.up)("el-select"),u=(0,a.up)("el-input"),d=(0,a.up)("SkillItem"),c=(0,a.Q2)("loading");return(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",dt,[(0,a._)("div",ct,[(0,a.Wm)(r,{modelValue:s.quality,"onUpdate:modelValue":e[0]||(e[0]=t=>s.quality=t)},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.qualities,(t=>((0,a.wg)(),(0,a.j4)(o,{key:t.value,value:t.value,label:t.label},null,8,["value","label"])))),128))])),_:1},8,["modelValue"]),(0,a.Wm)(r,{modelValue:s.skillType,"onUpdate:modelValue":e[1]||(e[1]=t=>s.skillType=t)},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.types,(t=>((0,a.wg)(),(0,a.j4)(o,{key:t.value,value:t.value,label:t.label},null,8,["value","label"])))),128))])),_:1},8,["modelValue"]),(0,a.Wm)(u,{modelValue:s.search,"onUpdate:modelValue":e[2]||(e[2]=t=>s.search=t),placeholder:"请输入 技能名称 查询",clearable:""},null,8,["modelValue"])]),s.list.length?((0,a.wg)(),(0,a.iD)("div",mt,[pt,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.list,((t,e)=>((0,a.wg)(),(0,a.j4)(d,{source:t,key:t.dwSkillID+e},null,8,["source"])))),128))])):((0,a.wg)(),(0,a.iD)("div",ht,"暂无技能"))])),[[c,s.loading]])}const vt={class:"u-skill-item"},_t={class:"u-td"},kt={class:"u-skill-icon"},wt=["src"],yt={key:0,class:"u-item-name"},ft={class:"u-td"},Dt={class:"u-td"};function bt(t,e,l,i,s,n){var o,r;const u=(0,a.up)("jx3-skill"),d=(0,a.up)("el-popover");return(0,a.wg)(),(0,a.iD)("div",vt,[(0,a._)("div",_t,[(0,a.Wm)(d,{class:"u-skill-popover",placement:"right-start",trigger:"hover","visible-arrow":!1,width:350},{reference:(0,a.w5)((()=>[(0,a._)("div",kt,[(0,a._)("img",{src:n.iconLink(n.iconId||s.data.IconID,s.client),onClick:e[0]||(e[0]=(0,C.iM)((t=>n.getUrl(s.data.SkillID)),["stop"]))},null,8,wt)])])),default:(0,a.w5)((()=>[(0,a.Wm)(u,{data:s.data},null,8,["data"])])),_:1}),null!==(o=l.source)&&void 0!==o&&null!==(r=o.Skill)&&void 0!==r&&r.Name?((0,a.wg)(),(0,a.iD)("div",yt,(0,j.zw)(l.source.Skill.Name),1)):(0,a.kq)("",!0)]),(0,a._)("div",ft,(0,j.zw)(l.source.szQualityDesc),1),(0,a._)("div",Dt,(0,j.zw)(l.source.szSkillTypeDesc),1)])}const Lt={key:0,class:"w-skill"},Yt={class:"w-skill-wrapper"},St=["src","alt"],It={class:"w-skill-content"},Ct={class:"w-skill-name"},Mt={class:"w-skill-desc"},Tt={class:"w-skill-meta"};function qt(t,e,l,i,s,n){return l.data?((0,a.wg)(),(0,a.iD)("div",Lt,[(0,a._)("div",Yt,[(0,a._)("img",{class:"w-skill-icon",src:n.iconLink(l.data.IconID||13),alt:l.data.Name},null,8,St),(0,a._)("div",It,[(0,a._)("span",Ct,(0,j.zw)(l.data.Name),1),(0,a._)("span",Mt,(0,j.zw)(l.data.Desc),1),(0,a._)("span",Tt,"ID : "+(0,j.zw)(l.data.SkillID),1)])])])):(0,a.kq)("",!0)}var Ht={name:"SkillInfo",props:["data"],computed:{},watch:{},methods:{iconLink:function(t){return(0,et.iconLink)(t,"std")}}};const jt=(0,y.Z)(Ht,[["render",qt]]);var zt=jt,xt={name:"SkillItem",props:{source:{type:Object,required:!0}},components:{Jx3Skill:zt},watch:{source:{immediate:!0,deep:!0,handler(t){this.data=t.Skill}}},computed:{iconId(){var t,e;return~~(null===(t=this.source)||void 0===t||null===(e=t.Skill)||void 0===e?void 0:e.IconID)||0},id(){var t,e;return~~(null===(t=this.source)||void 0===t||null===(e=t.Skill)||void 0===e?void 0:e.SkillID)||0}},data(){return{client:"origin",data:{}}},methods:{iconLink:et.iconLink,getUrl(t){const e=location.origin+"/",l=e+`app/database/?type=skill&client=${this.client}&query=${t}`;window.open(l,"_blank")}}};const Vt=(0,y.Z)(xt,[["render",bt]]);var Wt=Vt,Jt={name:"CJSkill",components:{SkillItem:Wt},data(){return{loading:!1,originList:[],list:[],allList:[],qualities:[],types:[],skillType:0,quality:0,search:""}},computed:{client(){return"origin"},params(){return{skillType:this.skillType,quality:this.quality,search:this.search}}},watch:{params:{deep:!0,handler(){this.quality||this.skillType||this.search?this.list=this.originList.filter((t=>(!this.quality||t.nQuality===this.quality)&&(!this.skillType||t.nSkillType===this.skillType)&&(!this.search||t.Skill.Name.indexOf(this.search)>-1))):this.list=this.originList}}},methods:{getTypes(){const t=this.allList,e=Array.from(new Set(t.map((t=>t.nSkillType)))),l=Array.from(new Set(t.map((t=>t.nQuality))));this.types=e.map((e=>{var l;return{label:null===(l=t.find((t=>t.nSkillType===e)))||void 0===l?void 0:l.szSkillTypeDesc,value:e}})),this.qualities=l.map((e=>{var l;return{label:null===(l=t.find((t=>t.nQuality===e)))||void 0===l?void 0:l.szQualityDesc,value:e}}))},async load(){this.loading=!0;const t=sessionStorage.getItem(`deserts_${this.client}`);t?(this.allList=JSON.parse(t),this.getTypes(),this.list=this.allList.filter((t=>t.dwSkillID)),this.loading=!1):await k().then((t=>{this.allList=t.data.data,this.getTypes(),this.list=this.allList.filter((t=>t.dwSkillID)),sessionStorage.setItem(`deserts_${this.client}`,JSON.stringify(this.allList))})).finally((()=>{this.loading=!1})),this.originList=this.list}},mounted(){this.load()}};const Nt=(0,y.Z)(Jt,[["render",gt]]);var Pt=Nt,Ot={name:"CJExtra",components:{CJStrategy:ut,CJSkill:Pt},data(){return{view:"strategy"}},computed:{client(){return(0,I.o)().client}},methods:{handleClick(){}},mounted(){"origin"===this.client&&(this.view="skill")}};const $t=(0,y.Z)(Ot,[["render",S]]);var Ut=$t,Zt={name:"CJ",components:{ListLayout:n.Z,CJIndex:D,CJExtra:Ut},data:function(){return{}},computed:{},methods:{},mounted(){}};const Qt=(0,y.Z)(Zt,[["render",s]]);var At=Qt}}]);
//# sourceMappingURL=511.4ebd28b7.js.map