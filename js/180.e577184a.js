"use strict";(self["webpackChunkpvp"]=self["webpackChunkpvp"]||[]).push([[180],{85117:function(e,t,i){var n=i(66330),s=TypeError;e.exports=function(e,t){if(!delete e[t])throw s("Cannot delete property "+n(t)+" of "+n(e))}},30541:function(e,t,i){var n=i(82109),s=i(47908),a=i(26244),l=i(83658),o=i(85117),r=i(7207),d=1!==[].unshift(0),u=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(e){return e instanceof TypeError}},c=d||!u();n({target:"Array",proto:!0,arity:1,forced:c},{unshift:function(e){var t=s(this),i=a(t),n=arguments.length;if(n){r(i+n);var d=i;while(d--){var u=d+n;d in t?t[u]=t[d]:o(t,u)}for(var c=0;c<n;c++)t[c]=arguments[c]}return l(t,i+n)}})},42325:function(e,t,i){i.d(t,{H:function(){return l},m:function(){return a}});var n=i(27484),s=i.n(n);const a=function(e){return s()(e).format("YYYY-MM-DD hh:mm:ss")};function l(e){if("[object Object]"===Object.prototype.toString.call(e)){for(const t in e)[void 0,null,""].includes(e[t])&&delete e[t];return e}return e}},57180:function(e,t,i){i.r(t),i.d(t,{default:function(){return En}});var n=i(66252);const s={class:"m-cj-content"},a={class:"m-cj-content__top"},l={class:"m-cj-content__bottom"};function o(e,t,i,o,r,d){const u=(0,n.up)("CJIndex"),c=(0,n.up)("CJExtra"),p=(0,n.up)("CJIntro"),m=(0,n.up)("DarkLayout");return(0,n.wg)(),(0,n.j4)(m,null,{default:(0,n.w5)((()=>[(0,n._)("div",s,[(0,n._)("div",a,[(0,n.Wm)(u),(0,n.Wm)(c)]),(0,n._)("div",l,[(0,n.Wm)(p)])])])),_:1})}var r=i(3577);const d={class:"u-breadcrumb-title"},u={class:"m-main"};function c(e,t,i,s,a,l){const o=(0,n.up)("Header"),c=(0,n.up)("ArrowRight"),p=(0,n.up)("el-icon"),m=(0,n.up)("Breadcrumb"),h=(0,n.up)("CJNav"),g=(0,n.up)("LeftSidebar"),v=(0,n.up)("Footer"),f=(0,n.up)("Main");return(0,n.wg)(),(0,n.iD)("div",{class:(0,r.C_)(["p-dark-layout","p-"+l.pageName])},[(0,n.Wm)(o),(0,n.Wm)(m,{name:"竞技专栏",slug:"pvp",root:"/pvp",publishEnable:!1,adminEnable:!1,feedbackEnable:!0,crumbEnable:!1,class:"m-dark-breadcrumb"},{default:(0,n.w5)((()=>[(0,n._)("span",d,[(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Wm)(c)])),_:1}),(0,n.Uk)(" 绝境战场")])])),_:1}),(0,n.Wm)(g,{class:"m-dark-sidebar",open:e.isOpen},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{class:"m-nav"})])),_:1},8,["open"]),(0,n.Wm)(f,{class:"m-dark-main",withoutLeft:!e.isOpen},{default:(0,n.w5)((()=>[(0,n._)("div",u,[(0,n.WI)(e.$slots,"default")]),(0,n.Wm)(v)])),_:3},8,["withoutLeft"])],2)}const p={class:"m-cj-nav"},m={class:"m-nav-top"},h={class:"m-nav-bottom"},g={class:"m-nav-tabs"},v=["onClick"],f={class:"m-tab-content"};function y(e,t,i,s,a,l){const o=(0,n.up)("CJXf"),d=(0,n.up)("el-icon");return(0,n.wg)(),(0,n.iD)("div",p,[(0,n._)("div",m,[(0,n.Wm)(o)]),(0,n._)("div",h,[(0,n._)("div",g,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.tabs,(e=>((0,n.wg)(),(0,n.iD)("div",{class:(0,r.C_)(["u-tab",a.activeTab===e.value&&"is-active"]),key:e.value,onClick:t=>l.setTab(e.value)},[(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[((0,n.wg)(),(0,n.j4)((0,n.LL)(e.icon)))])),_:2},1024),(0,n._)("b",null,(0,r.zw)(e.label),1)],10,v)))),128))]),(0,n._)("div",f,[((0,n.wg)(),(0,n.j4)((0,n.LL)(l.currentComponent)))])])])}const _={class:"m-cj-xf"},k={class:"m-xf-select"},w=["src","alt"],b={class:"u-xf-option"},x=["src","alt"],C={class:"u-txt"},I={class:"m-xf-buff"},P={class:"u-xf-title"},D={key:0,class:"u-buff-wrap"},M={key:0,class:"u-buff"},L=["title","src","alt"],S={class:"u-name-desc"},W={class:"u-name"},z={class:"u-desc"},$={key:1,class:"u-no-data"},q={key:1,class:"u-no-data"};function V(e,t,i,s,a,l){const o=(0,n.up)("el-option"),d=(0,n.up)("el-select"),u=(0,n.up)("ZoomIn"),c=(0,n.up)("el-icon");return(0,n.wg)(),(0,n.iD)("div",_,[(0,n._)("div",k,[(0,n._)("div",{class:(0,r.C_)(["u-logo","门派心法"===l.currentLogo.alt&&"is-logo"])},[(0,n._)("img",{src:l.currentLogo.src,alt:l.currentLogo.alt},null,8,w)],2),(0,n.Wm)(d,{class:"u-select",modelValue:a.subtype,"onUpdate:modelValue":t[0]||(t[0]=e=>a.subtype=e),filterable:"",onChange:l.toRoute},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.xfMaps,((e,t)=>((0,n.wg)(),(0,n.j4)(o,{key:t,value:e.name},{default:(0,n.w5)((()=>[(0,n._)("div",b,[(0,n._)("img",{class:"u-pic",src:l.showMountIcon(e.id),alt:e.name},null,8,x),(0,n._)("span",C,(0,r.zw)(e.name),1)])])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue","onChange"])]),(0,n._)("div",I,[(0,n._)("h4",P,[(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u)])),_:1}),(0,n.Uk)("心法加成 ")]),"std"===l.client?((0,n.wg)(),(0,n.iD)("div",D,[a.data.BuffID?((0,n.wg)(),(0,n.iD)("div",M,[(0,n._)("img",{title:`IconID:${a.data.IconID}`,src:l.iconLink(a.data.IconID),alt:a.data.Name,onClick:t[1]||(t[1]=(...e)=>l.getUrl&&l.getUrl(...e))},null,8,L),(0,n._)("div",S,[(0,n._)("div",W,(0,r.zw)(a.data.Name),1),(0,n._)("div",z,(0,r.zw)(a.data.Desc),1)])])):((0,n.wg)(),(0,n.iD)("div",$,"当前心法没有加成。"))])):((0,n.wg)(),(0,n.iD)("div",q,"缘起暂无心法加成。"))])])}i(57658);var j=i(10910),T=i(91254),B=JSON.parse('{"冰心诀":{"desertBuffId":16586,"desertBuffLevel":13},"花间游":{"desertBuffId":16586,"desertBuffLevel":14},"毒经":{"desertBuffId":16586,"desertBuffLevel":7},"莫问":{"desertBuffId":16586,"desertBuffLevel":11},"无方":{"desertBuffId":16586,"desertBuffLevel":15},"傲血战意":{"desertBuffId":16586,"desertBuffLevel":2},"易筋经":{"desertBuffId":16586,"desertBuffLevel":1},"焚影圣诀":{"desertBuffId":16586,"desertBuffLevel":8},"分山劲":{"desertBuffId":16586,"desertBuffLevel":6},"紫霞功":{"desertBuffId":16586,"desertBuffLevel":3},"太虚剑意":{"desertBuffId":16586,"desertBuffLevel":20},"天罗诡道":{"desertBuffId":16586,"desertBuffLevel":19},"惊羽诀":{"desertBuffId":16586,"desertBuffLevel":12},"问水诀":{"desertBuffId":16586,"desertBuffLevel":4},"山居剑意":{"desertBuffId":16586,"desertBuffLevel":4},"笑尘诀":{"desertBuffId":16586,"desertBuffLevel":5},"北傲诀":{"desertBuffId":16586,"desertBuffLevel":16},"凌海诀":{"desertBuffId":16586,"desertBuffLevel":17},"隐龙诀":{"desertBuffId":16586,"desertBuffLevel":9},"太玄经":{"desertBuffId":16586,"desertBuffLevel":10},"孤锋诀":{"desertBuffId":16586,"desertBuffLevel":18},"山海心诀":{"desertBuffId":16586,"desertBuffLevel":21}}'),R=i(17233),U=i(18371),J=i(89847),N=i(5121);const{__imgPath:O}=J;function E(){return N.Z.get(O+"map/data/map_index.json")}function Z(e){let t={type:"bps",tag:"PVP",topic:"吃鸡"};return e&&(t=Object.assign(t,e)),(0,U.nj)().get("/api/cms/posts",{params:t})}function F(e,t,i){const n={strict:!1,page:1,per:10,client:i,level:t};return(0,U.qT)().get(`/buff/id/${e}`,{params:n})}function Y(e,t){if(!e)return;let i={url:`/item_merged/id/${e}`,params:{client:t}};return(0,U.qT)({mute:!0})(i)}function H(e,t){const i=e.length||15,n={client:t,per:i},s=e.join(",");if(s)return(0,U.qT)().get(`/item_merged/id/${s}`,{params:n})}function K(e){return(0,U.qT)().get("/desert/list",{params:e})}function X(e){return(0,U.nj)().get("/api/cms/pvp/desert/point",{params:e})}function A(e){return(0,U.nj)().get("/api/cms/pvp/desert/point/mine",{params:e})}function Q(e){return(0,U.nj)().get("/api/cms/pvp/desert/point/unaudited",{params:e})}function G(e){return(0,U.nj)().post("/api/cms/pvp/desert/point",e)}function ee(e){return(0,U.nj)().delete(`/api/cms/pvp/desert/point/${e}`)}function te(e,t){return(0,U.nj)().put(`/api/cms/pvp/desert/point/${t}`,e)}function ie(e,t=1){return(0,U.nj)().put(`/api/cms/pvp/desert/point/${e}/admin`,{status:t})}var ne=i(24239);const se=(0,ne.o)();var ae={name:"CJXf",data(){return{subtype:"冰心诀",data:{},desertXfMap:{}}},computed:{client(){return se.client},baseUrl(){return"origin"==this.client?J.__OriginRoot:J.__Root},tab:function(){return this.$route.query.tab},xfMaps(){delete T["山居剑意"];const e=["云裳心经","离经易道","补天诀","相知","灵素"],t=["铁牢律","洗髓经","明尊琉璃体","铁骨衣"];return Object.values(T).filter((e=>e.client.includes(this.client))).filter((i=>![...e,...t].includes(i.name)))},currentXf(){const e=""!==this.subtype&&this.desertXfMap[this.subtype]||{};return e},currentLogo(){const e=""!==this.subtype?T[this.subtype].id:null;return{src:null!==e?this.showMountIcon(e):i(45522),alt:null!==e?T[this.subtype].name:"门派心法"}}},watch:{"$route.query":{immediate:!1,deep:!0,handler(e){const{subtype:t}=e;this.subtype=t||"冰心诀",this.data={},t&&this.loadBuff()}}},methods:{iconLink:R.iconLink,showMountIcon:R.showMountIcon,toRoute(e){this.$router.push({query:{subtype:e,tab:this.tab}})},loadBuff(){const{client:e}=this,{desertBuffId:t,desertBuffLevel:i}=this.currentXf;if(!t)return;const n=sessionStorage.getItem(`buff-${e}-${t}-${i}`);n?this.data=JSON.parse(n):F(t,i,e).then((n=>{var s,a;let l=(null===(s=n.data)||void 0===s||null===(a=s.list)||void 0===a?void 0:a[0])||{};this.data=l,sessionStorage.setItem(`buff-${e}-${t}-${i}`,JSON.stringify(l))}))},async loadKey(){const e="pvp_desert_mount",t=sessionStorage.getItem(e);if(t)this.desertXfMap=JSON.parse(t);else try{var i,n,s;const t=await(0,j.Sj)({key:e}),a=null===(i=t.data)||void 0===i||null===(n=i.data)||void 0===n||null===(s=n[0])||void 0===s?void 0:s.html;a&&(sessionStorage.setItem(e,a),this.desertXfMap=JSON.parse(a))}catch(a){this.desertXfMap=B}},getUrl(){const e=this.baseUrl+`app/database/?type=buff&query=${this.data.BuffID}&level=${this.data.Level}`;window.open(e,"_blank")}},async mounted(){await this.loadKey();const{subtype:e=""}=this.$route.query||{};this.subtype=e||"冰心诀",this.data={},e?this.loadBuff():this.toRoute("冰心诀")}},le=i(83744);const oe=(0,le.Z)(ae,[["render",V]]);var re=oe;const de={class:"m-cj-skill"},ue={class:"m-search"},ce={key:0,class:"m-skill-list"},pe=(0,n._)("div",{class:"u-skill-item"},[(0,n._)("div",{class:"u-td"},"技能名称"),(0,n._)("div",{class:"u-td"},"效果")],-1),me={key:1,class:"u-no-data"};function he(e,t,i,s,a,l){const o=(0,n.up)("el-input"),d=(0,n.up)("el-option"),u=(0,n.up)("el-select"),c=(0,n.up)("SkillItem");return(0,n.wg)(),(0,n.iD)("div",de,[(0,n._)("div",ue,[(0,n.Wm)(o,{class:"u-input",modelValue:a.search,"onUpdate:modelValue":t[0]||(t[0]=e=>a.search=e),placeholder:"请输入 技能名称 查询",clearable:""},null,8,["modelValue"]),(0,n.Wm)(u,{class:"u-select",modelValue:a.quality,"onUpdate:modelValue":t[1]||(t[1]=e=>a.quality=e)},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.qualities,(e=>((0,n.wg)(),(0,n.j4)(d,{key:e.value,value:e.value,label:e.label},{default:(0,n.w5)((()=>[(0,n._)("div",{class:(0,r.C_)(["u-skill-select-label",`is-quality-bg-${e.value}`])},(0,r.zw)(e.label),3)])),_:2},1032,["value","label"])))),128))])),_:1},8,["modelValue"]),(0,n.Wm)(u,{class:"u-select",modelValue:a.skillType,"onUpdate:modelValue":t[2]||(t[2]=e=>a.skillType=e)},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.types,(e=>((0,n.wg)(),(0,n.j4)(d,{key:e.value,value:e.value,label:e.label},null,8,["value","label"])))),128))])),_:1},8,["modelValue"])]),a.list.length?((0,n.wg)(),(0,n.iD)("div",ce,[pe,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.list,((e,t)=>((0,n.wg)(),(0,n.j4)(c,{source:e,key:e.dwSkillID+t},null,8,["source"])))),128))])):((0,n.wg)(),(0,n.iD)("div",me,"暂无技能"))])}var ge=i(49963);const ve={class:"u-skill-item"},fe={class:"u-td"},ye={class:"u-skill-icon"},_e=["src"],ke={class:"u-td"};function we(e,t,i,s,a,l){var o,d,u;const c=(0,n.up)("jx3-skill"),p=(0,n.up)("el-popover");return(0,n.wg)(),(0,n.iD)("div",ve,[(0,n._)("div",fe,[(0,n.Wm)(p,{"popper-class":"u-skill-popover m-simple-item-popup",placement:"right-start",trigger:"hover","visible-arrow":!1,width:350,effect:"dark"},{reference:(0,n.w5)((()=>[(0,n._)("div",ye,[(0,n._)("img",{src:l.iconLink(l.iconId||a.data.IconID,a.client),onClick:t[0]||(t[0]=(0,ge.iM)((e=>l.getUrl(a.data.SkillID)),["stop"]))},null,8,_e)])])),default:(0,n.w5)((()=>[(0,n.Wm)(c,{data:a.data},null,8,["data"])])),_:1}),null!==(o=i.source)&&void 0!==o&&null!==(d=o.Skill)&&void 0!==d&&d.Name?((0,n.wg)(),(0,n.iD)("div",{key:0,class:(0,r.C_)(["u-item-name",`isQuality-${null===(u=i.source)||void 0===u?void 0:u.nQuality}`])},(0,r.zw)(i.source.Skill.Name),3)):(0,n.kq)("",!0)]),(0,n._)("div",ke,(0,r.zw)(i.source.szSkillTypeDesc),1)])}const be={key:0,class:"w-skill"},xe={class:"w-skill-wrapper"},Ce=["src","alt"],Ie={class:"w-skill-content"},Pe={class:"w-skill-name"},De={class:"w-skill-desc"},Me={class:"w-skill-meta"};function Le(e,t,i,s,a,l){return i.data?((0,n.wg)(),(0,n.iD)("div",be,[(0,n._)("div",xe,[(0,n._)("img",{class:"w-skill-icon",src:l.iconLink(i.data.IconID||13),alt:i.data.Name},null,8,Ce),(0,n._)("div",Ie,[(0,n._)("span",Pe,(0,r.zw)(i.data.Name),1),(0,n._)("span",De,(0,r.zw)(i.data.Desc),1),(0,n._)("span",Me,"ID : "+(0,r.zw)(i.data.SkillID),1)])])])):(0,n.kq)("",!0)}var Se={name:"SkillInfo",props:["data"],computed:{},watch:{},methods:{iconLink:function(e){return(0,R.iconLink)(e,"std")}}};const We=(0,le.Z)(Se,[["render",Le]]);var ze=We,$e={name:"SkillItem",props:{source:{type:Object,required:!0}},components:{Jx3Skill:ze},watch:{source:{immediate:!0,deep:!0,handler(e){this.data=e.Skill}}},computed:{iconId(){var e,t;return~~(null===(e=this.source)||void 0===e||null===(t=e.Skill)||void 0===t?void 0:t.IconID)||0},id(){var e,t;return~~(null===(e=this.source)||void 0===e||null===(t=e.Skill)||void 0===t?void 0:t.SkillID)||0}},data(){return{client:"origin",data:{}}},methods:{iconLink:R.iconLink,getUrl(e){const t=J.__OriginRoot+`app/database/?type=skill&client=${this.client}&query=${e}`;window.open(t,"_blank")}}};const qe=(0,le.Z)($e,[["render",we]]);var Ve=qe;const je=(0,ne.o)();var Te={name:"CJSkill",components:{SkillItem:Ve},data(){return{loading:!1,originList:[],list:[],allList:[],qualities:[],types:[],skillType:0,quality:0,search:""}},computed:{client(){return je.client},params(){return{skillType:this.skillType,quality:this.quality,search:this.search}}},watch:{params:{deep:!0,handler(){this.quality||this.skillType||this.search?this.list=this.originList.filter((e=>(!this.quality||e.nQuality===this.quality)&&(!this.skillType||e.nSkillType===this.skillType)&&(!this.search||e.Skill.Name.indexOf(this.search)>-1))):this.list=this.originList}}},methods:{getTypes(){const e=this.allList,t=Array.from(new Set(e.map((e=>e.nSkillType)))),i=Array.from(new Set(e.map((e=>e.nQuality))));this.types=t.map((t=>{var i;return{label:null===(i=e.find((e=>e.nSkillType===t)))||void 0===i?void 0:i.szSkillTypeDesc,value:t}})),this.qualities=i.map((t=>{var i;return{label:null===(i=e.find((e=>e.nQuality===t)))||void 0===i?void 0:i.szQualityDesc,value:t}}))},async load(){this.loading=!0;const e=sessionStorage.getItem(`deserts_${this.client}`);e?(this.allList=JSON.parse(e),this.getTypes(),this.list=this.allList.filter((e=>e.dwSkillID)),this.loading=!1):await K({client:this.client}).then((e=>{"std"===this.client?(this.allList=e.data.data.map((e=>({...e.Skill[0]}))),this.list=this.allList,console.log(this.list)):(this.allList=e.data.data,this.getTypes(),this.list=this.allList.filter((e=>e.dwSkillID))),sessionStorage.setItem(`deserts_${this.client}`,JSON.stringify(this.allList))})).finally((()=>{this.loading=!1})),this.originList=this.list}},mounted(){this.load()}};const Be=(0,le.Z)(Te,[["render",he]]);var Re=Be;const Ue={class:"m-cj-equipment"},Je={class:"u-equipment-title"},Ne={key:0},Oe={class:"u-equipments"},Ee=["onClick"],Ze=["onClick"],Fe={class:"m-desert-compare"};function Ye(e,t,i,s,a,l){const o=(0,n.up)("ItemSimple"),d=(0,n.up)("Item"),u=(0,n.up)("el-popover");return(0,n.wg)(),(0,n.iD)("div",Ue,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.list,(e=>{var t,i,s,c,p,m;return(0,n.wg)(),(0,n.iD)("div",{class:"u-equipment-item",key:e.key},[(0,n._)("div",Je,[(0,n.Uk)((0,r.zw)(e.key)+" ",1),null!==(t=e.values)&&void 0!==t&&null!==(i=t[0])&&void 0!==i&&null!==(s=i.name.split("·"))&&void 0!==s&&s[0]?((0,n.wg)(),(0,n.iD)("span",Ne," · "+(0,r.zw)(null===(c=e.values)||void 0===c||null===(p=c[0])||void 0===p||null===(m=p.name.split("·"))||void 0===m?void 0:m[0]),1)):(0,n.kq)("",!0)]),(0,n._)("div",Oe,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.values,(e=>((0,n.wg)(),(0,n.iD)("div",{class:"u-item",key:e.id,onClick:t=>l.getUrl(e.id)},[(0,n.Wm)(o,{item:l.getItemData(e.id),"only-icon":!0,effect:"dark","with-name":!1,"no-pop":!1,iconSize:"32px"},null,8,["item"])],8,Ee)))),128)),(0,n.Wm)(u,{placement:"right-start",effect:"dark",width:740,trigger:"click"},{reference:(0,n.w5)((()=>[(0,n._)("span",{class:"u-link",onClick:t=>l.toCompare(e.values)},"对比",8,Ze)])),default:(0,n.w5)((()=>[(0,n._)("div",Fe,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.compares,(e=>((0,n.wg)(),(0,n.iD)("div",{class:"u-compare-item",key:e.id},[(0,n.Wm)(o,{item:l.getItemData(e.id),"only-icon":!0,effect:"dark","with-name":!0,"no-pop":!0,iconSize:"32px"},null,8,["item"]),(0,n.Wm)(d,{item_id:e.id},null,8,["item_id"])])))),128))])])),_:2},1024)])])})),128))])}var He=i(96486);const Ke=(0,ne.o)();var Xe={name:"CJEquipment",data(){return{showDialog:!1,pvp_desert_weapon:{},pvp_desert_equipment:{},equipments:[],weapons:[],compares:[]}},computed:{allList(){return this.equipments.concat(this.weapons)},subtype:function(){return this.$route.query.subtype},client(){return Ke.client},baseUrl(){return"origin"==this.client?J.__OriginRoot:J.__Root},list(){var e;const t=[];for(const[i,n]of Object.entries(this.pvp_desert_equipment))t.push({key:i,values:n});return this.subtype&&null!==(e=this.pvp_desert_weapon[this.subtype])&&void 0!==e&&e.length&&t.push({key:"近身武器",values:this.pvp_desert_weapon[this.subtype]}),t},ids(){const e=Object.values(this.pvp_desert_equipment)||[],t=(0,He.flattenDeep)(e).map((e=>e.id));return t},weaponIds(){const e=Object.values(this.pvp_desert_weapon),t=(0,He.flattenDeep)(e).map((e=>e.id));return t}},watch:{ids(e){e.length&&this.loadItems(e,"equipments")},weaponIds(e){e.length&&this.loadItems(e,"weapons")}},methods:{toCompare(e){this.compares=e,this.showDialog=!0},getItemData(e){const t=this.allList.find((t=>(null===t||void 0===t?void 0:t.id)===e));return null!==t&&void 0!==t&&t.id?t:(Y(e).then((e=>{var t,i;const n=null===(t=e.data)||void 0===t||null===(i=t.data)||void 0===i?void 0:i.item;return n})),{id:e})},loadKey(e){const t=sessionStorage.getItem(e);if(t)this[e]=JSON.parse(t);else{const t="origin"===this.client?e+"_origin":e;(0,j.Sj)({key:t}).then((t=>{var i,n,s;const a=(null===(i=t.data)||void 0===i||null===(n=i.data)||void 0===n||null===(s=n[0])||void 0===s?void 0:s.html)||"{}";sessionStorage.setItem(e,a),this[e]=JSON.parse(a)}))}},loadItems(e,t){if(!e.length)return;const i=sessionStorage.getItem(`desert_items_${t}`);i?this[t]=JSON.parse(i):H(e).then((e=>{var i;let n=(null===(i=e.data)||void 0===i?void 0:i.list)||[];this[t]=n,sessionStorage.setItem(`desert_items_${t}`,JSON.stringify(n))}))},getUrl(e){const t=`/item/view/${e}`;window.open(t,"_blank")}},mounted(){this.loadKey("pvp_desert_weapon"),this.loadKey("pvp_desert_equipment")}};const Ae=(0,le.Z)(Xe,[["render",Ye]]);var Qe=Ae;const Ge={key:0,class:"m-cj-item"},et=["onClick"],tt={key:1,class:"u-no-data"};function it(e,t,i,s,a,l){const o=(0,n.up)("ItemSimple");return a.data.length?((0,n.wg)(),(0,n.iD)("div",Ge,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.data,(e=>((0,n.wg)(),(0,n.iD)("div",{class:"u-item",key:e.id,onClick:t=>l.getUrl(e.id)},[(0,n.Wm)(o,{item:e,effect:"dark",iconSize:"32px"},null,8,["item"])],8,et)))),128))])):((0,n.wg)(),(0,n.iD)("div",tt,"暂无道具。"))}const nt=(0,ne.o)();var st={name:"CJItem",data(){return{data:[],items:[],mapId:0}},computed:{currentMapId(){return nt.map||0},ids(){var e,t;const i=(null===(e=this.items.find((e=>0===e.mapId)))||void 0===e?void 0:e.items)||[],n=(null===(t=this.items.find((e=>e.mapId===this.mapId)))||void 0===t?void 0:t.items)||[];return i.concat(n)},client(){return nt.client},baseUrl(){return"origin"==this.client?J.__OriginRoot:J.__Root}},watch:{currentMapId:{immediate:!0,handler(e){this.mapId=e}},ids:{immediate:!0,handler(){this.loadItems()}}},methods:{loadMapItems(){const{client:e}=this,t=sessionStorage.getItem(`desert_item_ids_${e}`);if(t)this.items=JSON.parse(t);else{const t="origin"===this.client?"pvp_desert_items_origin":"pvp_desert_items";(0,j.Sj)({key:t}).then((t=>{var i,n,s;const a=(null===(i=t.data)||void 0===i||null===(n=i.data)||void 0===n||null===(s=n[0])||void 0===s?void 0:s.html)||"[]";sessionStorage.setItem(`desert_item_ids_${e}`,a),this.items=JSON.parse(a)}))}},loadItems(){const{client:e,ids:t,mapId:i}=this;if(!t.length)return;const n=sessionStorage.getItem(`desert_items_${e}_${i}`);n?this.data=JSON.parse(n):H(t,e).then((t=>{var n;let s=(null===(n=t.data)||void 0===n?void 0:n.list)||[];this.data=s,sessionStorage.setItem(`desert_items_${e}_${i}`,JSON.stringify(s))}))},getUrl(e){const t=this.baseUrl+`item/view/${e}`;window.open(t,"_blank")}},mounted(){this.loadMapItems()}};const at=(0,le.Z)(st,[["render",it]]);var lt=at;const ot=(0,ne.o)();var rt={name:"CJNav",components:{CJXf:re,CJSkill:Re,CJEquipment:Qe,CJItem:lt},data(){return{activeTab:location.href.includes("origin")?"skill":"equipment",originTabs:[{label:"装备对比",value:"equipment",client:["std"],icon:"scale-to-original",component:"CJEquipment"},{label:"技能查询",value:"skill",client:["origin"],icon:"Search",component:"CJSkill"},{label:"道具介绍",value:"item",client:["std","origin"],icon:"Money",component:"CJItem"}]}},computed:{client(){return ot.client},tabs(){return this.originTabs.filter((e=>e.client.includes(this.client)))},currentComponent(){var e;return(null===(e=this.tabs.find((e=>e.value===this.activeTab)))||void 0===e?void 0:e.component)||""}},methods:{setTab(e){this.activeTab=e}}};const dt=(0,le.Z)(rt,[["render",y]]);var ut=dt,ct=i(49e3);const pt=(0,ne.o)();var mt={name:"App",data:function(){return{isOpen:!0}},components:{CJNav:ut},computed:{client(){return(0,ne.o)().client},isEditor(){return ct.Z.isEditor()},pageName(){return this.$route.name}},methods:{toggleReview(){pt.reviewVisible=!pt.reviewVisible}},mounted(){window.innerWidth<1024&&(this.isOpen=!1),document.body.style.backgroundColor="#1d2530"}};const ht=(0,le.Z)(mt,[["render",c]]);var gt=ht;const vt={class:"m-map-op"},ft={class:"m-select"},yt={class:"m-legends"},_t=(0,n._)("label",{class:"u-label"},"全部",-1),kt=[_t],wt=["onClick"],bt=["src","alt"],xt={class:"u-op"},Ct={class:"m-map-index"},It=["src"],Pt={key:0},Dt=(0,n._)("span",null,"新增",-1),Mt={key:1},Lt=(0,n._)("span",null,"编辑",-1),St=(0,n._)("span",null,"评论",-1),Wt=(0,n._)("span",{class:"u-success"},"通过",-1),zt=(0,n._)("span",{class:"u-danger"},"拒绝",-1),$t=(0,n._)("span",{class:"u-danger"},"删除",-1),qt=(0,n._)("span",{class:"u-danger"},"弃用",-1),Vt=["src"],jt={class:"m-points"},Tt=["src","alt","custom-data","onClick"],Bt={class:"u-header"},Rt={class:"u-info"},Ut=["src","alt"],Jt={class:"u-tip"},Nt={class:"u-content"},Ot={key:0,class:"u-footer"},Et={key:1,class:"u-footer u-footer-info"},Zt={class:"u-user"},Ft=["src","alt"],Yt=["href"],Ht={class:"u-time"},Kt=["src","alt","custom-data","onClick"],Xt={key:3,class:"m-paths"},At=["src"],Qt={class:"m-footer"};function Gt(e,t,i,s,a,l){const o=(0,n.up)("el-option"),d=(0,n.up)("el-select"),u=(0,n.up)("el-tooltip"),c=(0,n.up)("el-checkbox"),p=(0,n.up)("CirclePlus"),m=(0,n.up)("el-icon"),h=(0,n.up)("Edit"),g=(0,n.up)("ChatDotRound"),v=(0,n.up)("CircleCheck"),f=(0,n.up)("CircleClose"),y=(0,n.up)("Delete"),_=(0,n.up)("Remove"),k=(0,n.up)("el-tag"),w=(0,n.up)("el-button"),b=(0,n.up)("el-popover"),x=(0,n.up)("el-form-item"),C=(0,n.up)("el-input"),I=(0,n.up)("el-form"),P=(0,n.up)("el-dialog"),D=(0,n.up)("review-point"),M=(0,n.up)("PointComment"),L=(0,n.Q2)("loading");return(0,n.wy)(((0,n.wg)(),(0,n.iD)("div",{class:"m-map-wrap",onClick:t[20]||(t[20]=(...e)=>l.cancelRightMenu&&l.cancelRightMenu(...e))},[(0,n._)("div",vt,[(0,n._)("div",ft,[(0,n.Wm)(d,{style:{width:"150px"},modelValue:a.map,"onUpdate:modelValue":t[0]||(t[0]=e=>a.map=e),onChange:l.mapChange},{prefix:(0,n.w5)((()=>[(0,n.Uk)("地图")])),default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.mapPath,(e=>((0,n.wg)(),(0,n.j4)(o,{key:e.mapId,label:e.name,value:e.mapId},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])]),(0,n._)("div",yt,[(0,n._)("div",{class:(0,r.C_)(["u-legend",a.selectedLegends.length===a.legends.length&&"is-active"]),onClick:t[1]||(t[1]=(...e)=>l.handleClickAll&&l.handleClickAll(...e))},kt,2),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.legends,(e=>((0,n.wg)(),(0,n.iD)("div",{class:(0,r.C_)(["u-legend",a.selectedLegends.includes(e.value)&&"is-active"]),key:e.value,onClick:t=>l.setLegend(e)},[(0,n.Wm)(u,{effect:"dark",content:e.label,placement:"top"},{default:(0,n.w5)((()=>[(0,n._)("img",{class:"u-legend__img",src:e.src,"svg-inline":"",alt:e.label},null,8,bt)])),_:2},1032,["content"])],10,wt)))),128))]),(0,n._)("div",xt,[(0,n.Wm)(c,{class:"u-mode",modelValue:a.isEditMode,"onUpdate:modelValue":t[2]||(t[2]=e=>a.isEditMode=e),disabled:!l.isLogin,border:"",label:"编辑模式"},null,8,["modelValue","disabled"])])]),(0,n._)("div",Ct,[a.map?((0,n.wg)(),(0,n.iD)("div",{key:0,ref:"map",class:(0,r.C_)(["m-map",a.isEditMode&&"is-point"]),onContextmenu:t[13]||(t[13]=(0,ge.iM)(((...e)=>l.showMenu&&l.showMenu(...e)),["prevent"])),onMousemove:t[14]||(t[14]=(0,ge.iM)(((...e)=>l.handleMouseMove&&l.handleMouseMove(...e)),["prevent"]))},[(0,n._)("img",{class:"u-map",src:l.getMapImage(a.map)},null,8,It),!a.contextMenuVisible&&a.isEditMode?((0,n.wg)(),(0,n.iD)("div",{key:0,class:"u-context-tip",style:(0,r.j5)(l.tipStyle)},(0,r.zw)(`X: ${a.coordinates.x}, Y: ${a.coordinates.y}`),5)):(0,n.kq)("",!0),a.pointMenuVisible||a.contextMenuVisible?((0,n.wg)(),(0,n.iD)("div",{key:1,class:"u-context-menu",ref:"contextMenu",style:(0,r.j5)(l.generateContextMenuStyle())},[a.contextMenuVisible?((0,n.wg)(),(0,n.iD)("ul",Pt,[(0,n._)("li",{onClick:t[3]||(t[3]=e=>l.menuItemClicked("add"))},[(0,n.Wm)(m,{size:"16"},{default:(0,n.w5)((()=>[(0,n.Wm)(p)])),_:1}),Dt])])):(0,n.kq)("",!0),a.pointMenuVisible?((0,n.wg)(),(0,n.iD)("ul",Mt,[a.currentRightClickPoint.id&&a.currentRightClickPoint.belongToMe?((0,n.wg)(),(0,n.iD)("li",{key:0,onClick:t[4]||(t[4]=e=>l.toEdit(null))},[(0,n.Wm)(m,{size:"16"},{default:(0,n.w5)((()=>[(0,n.Wm)(h)])),_:1}),Lt])):(0,n.kq)("",!0),a.currentRightClickPoint.id&&1===a.currentRightClickPoint.status?((0,n.wg)(),(0,n.iD)("li",{key:1,onClick:t[5]||(t[5]=e=>l.toOpenComment(null))},[(0,n.Wm)(m,{size:"16"},{default:(0,n.w5)((()=>[(0,n.Wm)(g)])),_:1}),St])):(0,n.kq)("",!0),l.isEditor&&a.currentRightClickPoint.id&&1!==a.currentRightClickPoint.status?((0,n.wg)(),(0,n.iD)("li",{key:2,onClick:t[6]||(t[6]=e=>l.toReview(1))},[(0,n.Wm)(m,{size:"16"},{default:(0,n.w5)((()=>[(0,n.Wm)(v)])),_:1}),Wt])):(0,n.kq)("",!0),l.isEditor&&a.currentRightClickPoint.id&&0===a.currentRightClickPoint.status?((0,n.wg)(),(0,n.iD)("li",{key:3,onClick:t[7]||(t[7]=e=>l.toReview(2))},[(0,n.Wm)(m,{size:"16"},{default:(0,n.w5)((()=>[(0,n.Wm)(f)])),_:1}),zt])):(0,n.kq)("",!0),a.currentRightClickPoint.id&&a.currentRightClickPoint.belongToMe?((0,n.wg)(),(0,n.iD)("li",{key:4,onClick:t[8]||(t[8]=e=>l.toDel(a.currentRightClickPoint.id))},[(0,n.Wm)(m,{size:"16"},{default:(0,n.w5)((()=>[(0,n.Wm)(y)])),_:1}),$t])):(0,n.kq)("",!0),l.isEditor&&a.currentRightClickPoint.id&&1===a.currentRightClickPoint.status?((0,n.wg)(),(0,n.iD)("li",{key:5,onClick:t[9]||(t[9]=e=>l.toReview(0))},[(0,n.Wm)(m,{size:"16"},{default:(0,n.w5)((()=>[(0,n.Wm)(_)])),_:1}),qt])):(0,n.kq)("",!0)])):(0,n.kq)("",!0)],4)):(0,n.kq)("",!0),!a.pointForm.id&&a.selectedLegends.length&&(!a.pointMenuVisible&&a.contextMenuVisible||a.showDialog)?((0,n.wg)(),(0,n.iD)("img",{key:2,class:"u-point__0",src:l.getPointInfo(a.selectedLegends[0]),style:(0,r.j5)(l.generateExamplePointStyle())},null,12,Vt)):(0,n.kq)("",!0),(0,n._)("div",jt,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.showPoints,(e=>((0,n.wg)(),(0,n.iD)("div",{class:(0,r.C_)(["u-point",[e.belongToMe?"is-my-point":"",e.isMark?"is-mark":""]]),key:e.id,style:(0,r.j5)(l.generatePointStyle(e))},[e.id===a.visiblePopId?((0,n.wg)(),(0,n.j4)(b,{key:0,placement:"top",width:210,trigger:"manual",content:e.desc,visible:l.visiblePop,"onUpdate:visible":t[11]||(t[11]=e=>l.visiblePop=e),"popper-class":"u-point-pop",effect:"dark"},{reference:(0,n.w5)((()=>[(0,n._)("img",{class:"u-point__img",style:{width:"100%",height:"100%"},src:e.pointImg,alt:e.pointName,"custom-data":JSON.stringify({id:e.id,status:e.status,belongToMe:e.belongToMe}),onClick:t=>l.handlerPop(e.id),onContextmenu:t[10]||(t[10]=(0,ge.iM)(((...e)=>l.showMenu&&l.showMenu(...e)),["prevent","stop"]))},null,40,Tt)])),default:(0,n.w5)((()=>[(0,n._)("div",Bt,[(0,n._)("div",Rt,[(0,n._)("img",{src:e.pointImg,alt:e.pointName},null,8,Ut),(0,n._)("span",{class:(0,r.C_)(["u-title",`u-legend__${e.meta.type}`])},(0,r.zw)(e.pointName),3),(0,n._)("span",Jt,(0,r.zw)(`(X: ${Math.floor(e.point.x)}, Y: ${Math.floor(e.point.y)})`),1)]),e.belongToMe?((0,n.wg)(),(0,n.j4)(k,{key:0,size:"small",effect:"dark",type:1===e.status?"success":2===e.status?"danger":""},{default:(0,n.w5)((()=>[(0,n.Uk)((0,r.zw)(a.statusMap[e.status]),1)])),_:2},1032,["type"])):(0,n.kq)("",!0)]),(0,n._)("div",Nt,(0,r.zw)(e.desc),1),e.belongToMe?((0,n.wg)(),(0,n.iD)("div",Ot,[(0,n.Wm)(w,{size:"small",type:"primary",onClick:t=>l.toEdit(e)},{default:(0,n.w5)((()=>[(0,n.Uk)("编辑")])),_:2},1032,["onClick"]),(0,n.Wm)(w,{size:"small",type:"danger",onClick:t=>l.toDel(e.id)},{default:(0,n.w5)((()=>[(0,n.Uk)("删除")])),_:2},1032,["onClick"]),1===e.status?((0,n.wg)(),(0,n.j4)(w,{key:0,size:"small",plain:"",icon:"ChatDotRound",onClick:t=>l.toOpenComment(e)},{default:(0,n.w5)((()=>[(0,n.Uk)("评论")])),_:2},1032,["onClick"])):(0,n.kq)("",!0)])):((0,n.wg)(),(0,n.iD)("div",Et,[(0,n._)("div",Zt,[(0,n._)("img",{class:"u-avatar",src:e.avatar,alt:e.name},null,8,Ft),(0,n._)("a",{href:l.authorLink(e.post_author),target:"_blank"},(0,r.zw)(e.name),9,Yt)]),(0,n._)("div",Ht,(0,r.zw)(l.formatTime(e.updated_at)),1)]))])),_:2},1032,["content","visible"])):((0,n.wg)(),(0,n.iD)("img",{key:1,class:"u-point__img",style:{width:"100%",height:"100%"},src:e.pointImg,alt:e.pointName,"custom-data":JSON.stringify({id:e.id,status:e.status,belongToMe:e.belongToMe}),onClick:t=>l.handlerPop(e.id),onContextmenu:t[12]||(t[12]=(0,ge.iM)(((...e)=>l.showMenu&&l.showMenu(...e)),["prevent","stop"]))},null,40,Kt))],6)))),128))]),a.map&&l.paths.length?((0,n.wg)(),(0,n.iD)("div",Xt,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.paths,(e=>((0,n.wg)(),(0,n.iD)("img",{class:(0,r.C_)(["u-path",`u-path__${l.client}_${e.key}`]),style:(0,r.j5)(l.generatePathStyle(e)),key:e.key,src:e.url},null,14,At)))),128))])):(0,n.kq)("",!0)],34)):(0,n.kq)("",!0),a.showDialog?((0,n.wg)(),(0,n.j4)(P,{key:1,modelValue:a.showDialog,"onUpdate:modelValue":t[17]||(t[17]=e=>a.showDialog=e),title:l.dialogTitle,"append-to-body":"",width:"560",class:"m-desert-point-pop","before-close":l.onCancel},{footer:(0,n.w5)((()=>[(0,n._)("div",Qt,[(0,n.Wm)(w,{onClick:l.onCancel},{default:(0,n.w5)((()=>[(0,n.Uk)("取消")])),_:1},8,["onClick"]),(0,n.Wm)(w,{type:"primary",loading:a.btnLoading,onClick:l.onConfirm},{default:(0,n.w5)((()=>[(0,n.Uk)("保存")])),_:1},8,["loading","onClick"])])])),default:(0,n.w5)((()=>[(0,n.Wm)(I,{ref:"pointForm",class:"m-desert-form",model:a.pointForm,rules:a.rules,"label-position":"right","label-width":"60"},{default:(0,n.w5)((()=>[(0,n.Wm)(x,{label:"类型",prop:"type"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{modelValue:a.pointForm.type,"onUpdate:modelValue":t[15]||(t[15]=e=>a.pointForm.type=e),style:{width:"100%"},onChange:l.legendChange},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.legends,(e=>((0,n.wg)(),(0,n.j4)(o,{key:e.value,value:e.value,label:e.label},null,8,["value","label"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1}),(0,n.Wm)(x,{label:"短评",prop:"desc"},{default:(0,n.w5)((()=>[(0,n.Wm)(C,{type:"textarea",modelValue:a.pointForm.desc,"onUpdate:modelValue":t[16]||(t[16]=e=>a.pointForm.desc=e),rows:4,maxlength:"50","show-word-limit":""},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title","before-close"])):(0,n.kq)("",!0),a.map?((0,n.wg)(),(0,n.j4)(D,{key:2,visible:l.reviewVisible,"onUpdate:visible":t[18]||(t[18]=e=>l.reviewVisible=e),map:a.map,onInit:l.initData,onMark:l.toMark},null,8,["visible","map","onInit","onMark"])):(0,n.kq)("",!0),a.commentVisible&&a.commentPoint.id?((0,n.wg)(),(0,n.j4)(M,{key:3,point:a.commentPoint,visible:a.commentVisible,"onUpdate:visible":t[19]||(t[19]=e=>a.commentVisible=e)},null,8,["point","visible"])):(0,n.kq)("",!0)])])),[[L,a.loading]])}i(30541);var ei=i(2262);const ti={class:"m-review-points"},ii={class:"u-header"},ni={class:"u-title"},si=["src","alt"],ai={class:"u-op"},li={class:"u-content"},oi={class:"u-user"},ri=["src","alt"],di=["href"],ui={class:"u-time"},ci={class:"m-footer"};function pi(e,t,i,s,a,l){const o=(0,n.up)("el-tag"),d=(0,n.up)("el-button"),u=(0,n.up)("el-popconfirm"),c=(0,n.up)("map-location"),p=(0,n.up)("el-icon"),m=(0,n.up)("el-pagination"),h=(0,n.up)("el-drawer");return(0,n.wg)(),(0,n.j4)(h,{title:"标点审核",modelValue:l.drawer,"onUpdate:modelValue":t[1]||(t[1]=e=>l.drawer=e),"append-to-body":"","destroy-on-close":"","modal-class":"m-review-drawer"},{footer:(0,n.w5)((()=>[(0,n._)("div",ci,[(0,n.Wm)(d,{onClick:l.onClose},{default:(0,n.w5)((()=>[(0,n.Uk)("取消")])),_:1},8,["onClick"])])])),default:(0,n.w5)((()=>[(0,n._)("div",ti,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.list,(e=>((0,n.wg)(),(0,n.iD)("div",{class:"u-point-item",key:e.id},[(0,n._)("div",ii,[(0,n._)("div",ni,[(0,n._)("img",{src:e.pointImg,alt:e.pointName},null,8,si),(0,n._)("span",null,(0,r.zw)(e.pointName),1),(0,n.Wm)(o,{size:"small"},{default:(0,n.w5)((()=>[(0,n.Uk)("待审核")])),_:1})]),(0,n._)("div",ai,[(0,n.Wm)(d,{size:"small",icon:"MapLocation",onClick:t=>l.toMark(e)},{default:(0,n.w5)((()=>[(0,n.Uk)("标记")])),_:2},1032,["onClick"]),(0,n.Wm)(u,{title:"确定通过该短评吗？",hideIcon:"",onConfirm:t=>l.toReview(e.id,1)},{reference:(0,n.w5)((()=>[(0,n.Wm)(d,{type:"success",size:"small"},{default:(0,n.w5)((()=>[(0,n.Uk)("通过")])),_:1})])),_:2},1032,["onConfirm"]),(0,n.Wm)(u,{title:"确定拒绝该短评吗？",hideIcon:"",onConfirm:t=>l.toReview(e.id,2)},{reference:(0,n.w5)((()=>[(0,n.Wm)(d,{type:"danger",size:"small"},{default:(0,n.w5)((()=>[(0,n.Uk)("拒绝")])),_:1})])),_:2},1032,["onConfirm"])])]),(0,n._)("div",li,[(0,n.Uk)((0,r.zw)(e.desc)+" ",1),(0,n._)("span",null,[(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Wm)(c)])),_:1}),(0,n._)("b",null,"("+(0,r.zw)(e.point.x)+","+(0,r.zw)(e.point.y)+")",1)])]),(0,n._)("div",oi,[(0,n._)("img",{class:"u-avatar",src:e.avatar,alt:e.name},null,8,ri),(0,n._)("a",{href:l.authorLink(e.user_id),target:"_blank"},(0,r.zw)(e.name),9,di)]),(0,n._)("div",ui,"UpdatedAt: "+(0,r.zw)(l.formatTime(e.updated_at)),1)])))),128))]),(0,n.Wm)(m,{class:"m-pagination",background:"","page-size":a.per,layout:"prev, pager, next",total:a.total,"current-page":a.page,"onUpdate:currentPage":t[0]||(t[0]=e=>a.page=e),small:"","hide-on-single-page":"",onCurrentChange:l.load},null,8,["page-size","total","current-page","onCurrentChange"])])),_:1},8,["modelValue"])}var mi=i(69876),hi=i(42325);const gi=[{label:"路线建议",value:"path",src:i(83723)},{label:"大量物资",value:"goods",src:i(93565)},{label:"少量物资",value:"small_goods",src:i(47614)},{label:"马匪刷新",value:"monster",src:i(8905)},{label:"洞穴入口",value:"cave",src:i(77324)}],vi={0:"待审核",1:"已通过",2:"已拒绝"};function fi(e,t="src"){var n;const s=e?null===(n=gi.find((t=>t.value===e)))||void 0===n?void 0:n[t]:"";let a=i(83723);return"value"===t&&(a="path"),"label"===t&&(a="路线建议"),s||a}var yi={name:"ReviewPoint",props:{visible:{type:Boolean,default:!1},map:{type:Number,required:!0}},emits:["update:visible","init","mark"],data(){return{loading:!1,list:[],per:6,page:1,total:0,legends:(0,ei.Xl)(gi)}},computed:{...(0,mi.rn)(ne.o,["client"]),drawer:{get(){return this.visible},set(e){this.$emit("update:visible",e)}}},watch:{drawer:{immediate:!0,handler(e){e&&this.load()}}},methods:{authorLink:R.authorLink,formatTime:hi.m,getPointInfo:fi,toReview(e,t){this.loading=!0,ie(e,t).then((()=>{this.$message({type:"success",message:(1===t?"审核通过":"审核拒绝")+"成功"}),this.load(),this.$emit("init")})).finally((()=>{this.loading=!1}))},toMark(e){this.$emit("mark",{...e,isMark:!0})},load(){const e={client:this.client,map:this.map,per:this.per,page:this.page};this.loading=!0,Q(e).then((e=>{var t,i,n,s;const a=(null===(t=e.data)||void 0===t||null===(i=t.data)||void 0===i?void 0:i.list)||[];this.list=a.map((e=>{var t,i;return{...e,avatar:e.point_author_info.user_avatar||ct.Z.anonymous.avatar_origin,name:e.point_author_info.display_name,pointImg:this.getPointInfo(null===(t=e.meta)||void 0===t?void 0:t.type),pointName:this.getPointInfo(null===(i=e.meta)||void 0===i?void 0:i.type,"label")}})),this.total=(null===(n=e.data)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.total)||0}))},onClose(){this.drawer=!1}}};const _i=(0,le.Z)(yi,[["render",pi]]);var ki=_i;const wi={class:"m-point-content"},bi={class:"u-header"},xi={class:"u-info"},Ci=["src","alt"],Ii={class:"u-title"},Pi={class:"u-content"},Di={class:"dialog-footer"};function Mi(e,t,i,s,a,l){const o=(0,n.up)("el-divider"),d=(0,n.up)("Comment"),u=(0,n.up)("el-button"),c=(0,n.up)("el-dialog");return(0,n.wg)(),(0,n.j4)(c,{title:l.title,class:"m-point-comment__dialog",width:"90%","destroy-on-close":"","close-on-click-modal":!1,modelValue:l.dialogVisible,"onUpdate:modelValue":t[1]||(t[1]=e=>l.dialogVisible=e),"before-close":l.handleClose},{footer:(0,n.w5)((()=>[(0,n._)("span",Di,[(0,n.Wm)(u,{onClick:t[0]||(t[0]=e=>l.dialogVisible=!1)},{default:(0,n.w5)((()=>[(0,n.Uk)("取 消")])),_:1})])])),default:(0,n.w5)((()=>[(0,n._)("div",wi,[(0,n._)("div",bi,[(0,n._)("div",xi,[(0,n._)("img",{src:i.point.pointImg,alt:i.point.pointName},null,8,Ci),(0,n._)("span",Ii,(0,r.zw)(i.point.pointName),1)])]),(0,n._)("div",Pi,(0,r.zw)(i.point.desc),1)]),(0,n.Wm)(o,{"content-position":"left"},{default:(0,n.w5)((()=>[(0,n.Uk)("评论")])),_:1}),(0,n.Wm)(d,{id:l.id,category:"desert"},null,8,["id"])])),_:1},8,["title","modelValue","before-close"])}var Li=i(74602),Si={name:"PointComment",props:{visible:{type:Boolean,default:!1},point:{type:Object,required:!0}},emits:["update:visible"],components:{Comment:Li.Z},computed:{...(0,mi.rn)(ne.o,["client"]),title(){return"评论"},id(){return~~this.point.id},dialogVisible:{get(){return this.visible},set(e){this.$emit("update:visible",e)}}},methods:{handleClose(){this.dialogVisible=!1}}};const Wi=(0,le.Z)(Si,[["render",Mi]]);var zi=Wi,$i=JSON.parse('[{"mapId":296,"name":"龙门绝境","paths":[{"key":"1_x653_y140","x":653,"y":140},{"key":"2_x150_y92","x":150,"y":92},{"key":"3_x139_y214","x":139,"y":214},{"key":"4_x162_y550","x":162,"y":550},{"key":"5_x176_y542","x":176,"y":542},{"key":"6_x247_y79","x":247,"y":79},{"key":"7_x151_y365","x":151,"y":365},{"key":"8_x390_y77","x":390,"y":77},{"key":"9_x217_y79","x":217,"y":79},{"key":"10_x113_y224","x":113,"y":224}]},{"mapId":297,"name":"龙门绝境·夜","paths":[{"key":"1_x653_y140","x":653,"y":140},{"key":"2_x150_y92","x":150,"y":92},{"key":"3_x139_y214","x":139,"y":214},{"key":"4_x162_y550","x":162,"y":550},{"key":"5_x176_y542","x":176,"y":542},{"key":"6_x247_y79","x":247,"y":79},{"key":"7_x151_y365","x":151,"y":365},{"key":"8_x390_y77","x":390,"y":77},{"key":"9_x217_y79","x":217,"y":79},{"key":"10_x113_y224","x":113,"y":224}]},{"mapId":410,"name":"沧溟绝境","paths":[{"key":"a1_x144_y81","x":144,"y":81},{"key":"a2_x153_y206","x":153,"y":206},{"key":"a3_x216_y293","x":216,"y":293},{"key":"a4_x393_y143","x":393,"y":143},{"key":"a5_x502_y69","x":502,"y":69},{"key":"a6_x171_y471 ","x":171,"y":471},{"key":"a7_x151_y264","x":151,"y":264},{"key":"a8_x401_y135","x":401,"y":135},{"key":"a9_x138_y445","x":138,"y":445},{"key":"a10_x188_y118","x":188,"y":118}]},{"mapId":512,"name":"白龙绝境","paths":[{"key":"b1","x":150,"y":92},{"key":"b2","x":462,"y":97},{"key":"b3","x":145,"y":130},{"key":"b4","x":115,"y":420},{"key":"b5","x":530,"y":90},{"key":"b6","x":145,"y":125}]},{"mapId":532,"name":"天原绝境","paths":[{"key":"c1","x":120,"y":75},{"key":"c2","x":70,"y":275},{"key":"c3","x":-30,"y":20}]},{"mapId":645,"name":"洱海绝境","paths":[{"key":"cr1","x":258,"y":204},{"key":"cr2","x":238,"y":258},{"key":"cr3","x":164,"y":488},{"key":"cr4","x":220,"y":395},{"key":"cr5","x":320,"y":320},{"key":"cr6","x":235,"y":280}]}]'),qi=JSON.parse('[{"mapId":296,"name":"龙门绝境","paths":[{"key":"3_x139_y214","x":97,"y":-12},{"key":"4_x162_y550","x":170,"y":487},{"key":"5_x176_y542","x":207,"y":460},{"key":"7_x151_y365","x":150,"y":180},{"key":"8_x390_y77","x":510,"y":-5},{"key":"9_x217_y79","x":230,"y":-9},{"key":"10_x113_y224","x":80,"y":-20}]}]');const Vi=(0,ne.o)();function ji(e){let t=1;switch(!0){case e>=3420:t=2.5;break;case e>=3e3:t=2;break;case e>=2560:t=1.5;break;case e>=2200:t=1.25;break;default:t=1}return t}var Ti={name:"CJIndex",components:{ReviewPoint:ki,PointComment:zi},data(){return{loading:!1,maps:[],map:null,showCoordinates:!0,animationFrameId:null,coordinates:{x:0,y:0},imgRoot:J.__imgPath+"pve/desert/",pointMenuVisible:!1,contextMenuVisible:!1,contextMenuPosition:{x:0,y:0},contextMenuPositionSave:{x:0,y:0},showDialog:!1,points:[],legendSize:30,legends:(0,ei.Xl)(gi),selectedLegends:[(0,ei.Xl)(gi).find((({value:e})=>"goods"===e)).value],statusMap:(0,ei.Xl)(vi),pointForm:{point:{},type:"",desc:"",client:(0,ne.o)().client},rules:{type:[{required:!0,message:"请选择类型",trigger:"change"}],desc:[{required:!0,message:"请输入短评",trigger:"blur"}]},btnLoading:!1,visiblePopId:null,statusFilter:"",markPoints:[],currentRightClickPoint:{},commentVisible:!1,commentPoint:{},isEditMode:!1,windowInnerWidth:window.innerWidth,coefficient:1}},computed:{client(){return Vi.client},mapPath(){return(0,ei.Xl)("origin"===this.client?qi:$i)},reviewVisible:{get(){return Vi.reviewVisible},set(e){Vi.reviewVisible=e}},isLogin(){return ct.Z.isLogin()},isEditor(){return ct.Z.isEditor()},dialogTitle(){var e;return null!==(e=this.pointForm)&&void 0!==e&&e.id?"编辑标点":"新增标点"},visiblePop:{get(){return!!this.visiblePopId},set(e){this.visiblePopId=e}},paths(){var e;const t=(null===(e=this.mapPath.find((e=>e.mapId===this.map)))||void 0===e?void 0:e.paths)||[];return t.length?t.map((e=>({...e,url:`${this.imgRoot}${"origin"===this.client?"origin_":""}${297===this.map?296:this.map}/${e.key}.png`}))):t},showPoints(){const e=Vi.myPoints.filter((e=>1!==e.status)).concat(this.points,this.markPoints).filter((e=>this.selectedLegends.includes(e.meta.type))).map((e=>{var t,i,n;return{...e,avatar:e.point_author_info.user_avatar||ct.Z.anonymous.avatar_origin,name:e.point_author_info.display_name,belongToMe:~~(null===ct.Z||void 0===ct.Z||null===(t=ct.Z.profile)||void 0===t?void 0:t.uid)===e.user_id,pointImg:this.getPointInfo(null===(i=e.meta)||void 0===i?void 0:i.type),pointName:this.getPointInfo(null===(n=e.meta)||void 0===n?void 0:n.type,"label"),post_author:e.user_id}}));return e},editPoint(){return Vi.editPoint},delPointId(){return Vi.delPointId},tipStyle(){return{top:this.coordinates.y*this.coefficient+"px",left:this.coordinates.x*this.coefficient+"px"}}},watch:{reviewVisible(e){e||(this.markPoints=[],Vi.myPoints=Vi.myPoints.map((e=>(e.isMark=!1,e))))},isEditMode(e){if(e){const{length:e}=this.selectedLegends;(e>1||0===e)&&(this.selectedLegends=[this.legends[0].value])}else this.cancelRightMenu(),this.coordinates={x:0,y:0}},map(e){Vi.map=e},editPoint(e){e&&this.toEdit(e)},delPointId(e){this.toDel(e)},windowInnerWidth(e){this.coefficient=ji(e)}},methods:{authorLink:R.authorLink,getLegendSrc(){var e;return this.legend&&(null===(e=this.legends.find((e=>e.value===this.legend)))||void 0===e?void 0:e.src)||""},toReview(e){const{id:t}=this.currentRightClickPoint;let i="通过";2===e&&(i="拒绝"),0===e&&(i="弃用"),this.$confirm(`确定要${i}该短评吗？`,"温馨提示",{confirmButtonText:`立即${void 0!==e?i:"删除"}`,cancelButtonText:"取消",type:"warning"}).then((()=>{this.loading=!0,ie(t,e).then((()=>{this.$message({type:"success",message:i+"成功"}),this.initData()})).finally((()=>{this.loading=!1}))})).catch((()=>{}))},cancelRightMenu(){this.pointMenuVisible=!1,this.contextMenuVisible=!1},toOpenComment(e){if(e)this.commentPoint=e;else{const e=this.currentRightClickPoint;if(1!==e.status)return this.$message({type:"warning",message:"当前标点尚未审核通过"});this.commentPoint=this.showPoints.find((t=>t.id===e.id))}this.commentVisible=!0},toMark(e){this.selectedLegends=[e.meta.type];const t=Vi.myPoints.findIndex((t=>t.id===e.id));var i;if(-1!==t)return void(Vi.myPoints[t].isMark=!(null!==(i=Vi.myPoints[t])&&void 0!==i&&i.isMark));const n=this.markPoints.findIndex((t=>t.id===e.id));-1===n?this.markPoints.push(e):this.markPoints.splice(n,1)},formatTime:hi.m,mapChange(){this.statusFilter="",this.initData()},handlerPop(e){this.visiblePopId===e?this.visiblePopId=null:this.visiblePopId=e},getPointInfo:fi,setLegend(e){const{value:t}=e,i=this.selectedLegends.indexOf(t),n=-1!==i,{length:s}=this.selectedLegends;if(this.isEditMode)this.selectedLegends=[t];else if(n){if(1===s)return;this.selectedLegends.splice(i,1)}else this.selectedLegends.push(t)},legendChange(e){this.pointForm.id||(this.selectedLegends=[e])},showMenu(e){if(e.preventDefault(),this.contextMenuPosition=this.coordinates,this.contextMenuPositionSave=this.coordinates,"u-point__img"===e.target.className){const t=e.target.getAttribute("custom-data")?JSON.parse(e.target.getAttribute("custom-data")):{};return this.currentRightClickPoint=t,this.pointMenuVisible=!0,this.pointMenuVisible=!0,!1}this.pointMenuVisible=!1,this.isEditMode&&(this.contextMenuVisible=!0)},adjustMenuPosition(e,t){this.$nextTick((()=>{const i=this.$refs.contextMenu,n=i.getBoundingClientRect(),s=n.width,a=n.height,l=~~i.style.top.split("px")[0],o=~~i.style.left.split("px")[0],r=5;e-o-r<s&&(this.contextMenuPosition.x=this.contextMenuPositionSave.x-s),t-l-r<a&&(this.contextMenuPosition.y=this.contextMenuPositionSave.y-a)}))},menuItemClicked(e){if("add"===e){if(!ct.Z.isLogin())return this.$message({type:"warning",message:"请先登录"});this.pointForm.type=this.selectedLegends[0],this.showDialog=!0}this.cancelRightMenu()},async getMapList(){const e=sessionStorage.getItem("cj_maps");if(e){var t;const i=JSON.parse(e);this.maps=i,this.map=(null===i||void 0===i||null===(t=i[0])||void 0===t?void 0:t.value)||null}else{var i;const e=await E(),{data:t}=e,n=[];for(let i in t)t[i].indexOf("绝境")>-1&&n.push({label:t[i],value:~~i});sessionStorage.setItem("cj_maps",JSON.stringify(n)),this.maps=n,this.map=(null===n||void 0===n||null===(i=n[0])||void 0===i?void 0:i.value)||null}},getMapImage(e){return`${J.__imgPath}map/${"std"==this.client?"maps":"maps_origin"}/map_${e}_0.png`},getPoints(){const e={client:(0,ne.o)().client,map:this.map};X(e).then((e=>{var t;this.points=(null===(t=e.data)||void 0===t?void 0:t.data)||[]}))},getMyPoints(e){if(!ct.Z.isLogin())return;const t={client:(0,ne.o)().client,map:this.map};void 0===e&&null===e||(t.status=e),A(t).then((e=>{var t;const i=(null===(t=e.data)||void 0===t?void 0:t.data)||[];Vi.myPoints=i.map((e=>{var t,i;return{...e,pointImg:this.getPointInfo(null===(t=e.meta)||void 0===t?void 0:t.type),pointName:this.getPointInfo(null===(i=e.meta)||void 0===i?void 0:i.type,"label")}})),Vi.originMyPoints=(0,He.cloneDeep)(Vi.myPoints)}))},savePoint(){let e=(0,He.cloneDeep)(this.pointForm);e.meta={type:e.type},delete e.type;const t=this.pointForm.id;t?(e=(0,He.pick)(e,["map","point","meta","desc","client","status"]),e.status=0):(e.map=this.map,e.point={x:this.contextMenuPositionSave.x,y:this.contextMenuPositionSave.y}),this.btnLoading=!0;const i=t?te(e,t):G(e);i.then((i=>{this.handlerPoint(t?{...e,id:t}:i.data.data,t)})).finally((()=>{this.btnLoading=!1}))},handlerPoint(e,t){var i,n;this.$notify({title:"成功",message:(t?"修改":"添加")+"成功，等待审核中...",type:"success"});const s={...e,pointImg:this.getPointInfo(null===(i=e.meta)||void 0===i?void 0:i.type),pointName:this.getPointInfo(null===(n=e.meta)||void 0===n?void 0:n.type,"label"),point_author_info:{user_avatar:ct.Z.profile.avatar_origin,display_name:ct.Z.profile.name}};if(t){const e=Vi.myPoints.findIndex((e=>e.id===t));var a;if(-1!==e)s.user_id=null===(a=Vi.myPoints.find((e=>e.id===t)))||void 0===a?void 0:a.user_id;Vi.myPoints.splice(e,1,s)}else Vi.myPoints.unshift(s);Vi.originMyPoints=(0,He.cloneDeep)(Vi.myPoints),this.onClose()},toEdit(e){e||(e=Vi.myPoints.find((e=>e.id===this.currentRightClickPoint.id))),this.visiblePopId=null,this.pointForm={...(0,He.cloneDeep)(e),type:e.meta.type},this.showDialog=!0},toDel(e){this.visiblePopId=null,this.$confirm("确定要删除该短评吗？删除后不可恢复。","温馨提示",{confirmButtonText:"立即删除",cancelButtonText:"取消",type:"warning"}).then((()=>{ee(e).then((()=>{Vi.myPoints=Vi.myPoints.filter((t=>t.id!==e)),Vi.originMyPoints=(0,He.cloneDeep)(Vi.myPoints),this.$notify({title:"成功",message:"删除成功",type:"success"})}))})).catch((()=>{}))},onCancel(){this.onClose()},onClose(){this.$refs.pointForm.clearValidate(),this.pointForm={point:{},meta:{type:"path"},desc:"",client:(0,ne.o)().client},Vi.editPoint=null,this.showDialog=!1},onConfirm(){this.$refs.pointForm.validate(((e,t)=>{e?this.savePoint():console.log("error submit!",t)}))},initData(){this.getPoints(),this.getMyPoints()},handleMouseMove(e){this.animationFrameId||(this.animationFrameId=requestAnimationFrame((()=>{e.preventDefault();const t=this.$refs.map.getBoundingClientRect();this.isEditMode&&(this.coordinates={x:Math.floor((e.clientX-t.left)/this.coefficient),y:Math.floor((e.clientY-t.top)/this.coefficient)}),this.animationFrameId=null})))},handleClickAll(){if(this.isEditMode)return;const e=this.selectedLegends.length;e<this.legends.length?this.selectedLegends=this.legends.map((({value:e})=>e)):this.selectedLegends=[]},generatePathStyle(e){return{left:(e.x+70)*this.coefficient+"px",top:(e.y+40)*this.coefficient+"px",transform:`scale(${this.coefficient})`}},generatePointStyle(e){return{width:this.legendSize*this.coefficient+"px",height:this.legendSize*this.coefficient+"px",top:(e.point.y-this.legendSize)*this.coefficient+"px",left:(e.point.x-this.legendSize/2)*this.coefficient+"px"}},generateExamplePointStyle(){return{width:this.legendSize*this.coefficient+"px",height:this.legendSize*this.coefficient+"px",top:(this.contextMenuPositionSave.y-this.legendSize)*this.coefficient+"px",left:(this.contextMenuPositionSave.x-this.legendSize/2)*this.coefficient+"px"}},generateContextMenuStyle(){return{top:this.contextMenuPosition.y*this.coefficient+"px",left:this.contextMenuPosition.x*this.coefficient+"px"}},handleResize(){this.windowInnerWidth=window.innerWidth}},mounted(){this.isLogin||(this.isEditMode=!1),this.getMapList(),this.initData(),this.coefficient=ji(window.innerWidth),window.addEventListener("resize",this.handleResize)},unmounted(){window.removeEventListener("resize",this.handleResize)},created(){}};const Bi=(0,le.Z)(Ti,[["render",Gt]]);var Ri=Bi;const Ui={class:"m-cj-extra"},Ji={class:"m-extra-bottom"},Ni={class:"m-extra-tabs"},Oi=["onClick"],Ei={class:"u-filter"},Zi={class:"m-tab-content"};function Fi(e,t,i,s,a,l){const o=(0,n.up)("el-icon"),d=(0,n.up)("el-option"),u=(0,n.up)("el-select"),c=(0,n.up)("el-button");return(0,n.wg)(),(0,n.iD)("div",Ui,[(0,n._)("div",Ji,[(0,n._)("div",Ni,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.tabs,(e=>((0,n.wg)(),(0,n.iD)("div",{class:(0,r.C_)(["u-tab",e.value===a.activeTab&&"is-active"]),key:e.value,onClick:t=>a.activeTab=e.value},[(0,n.Wm)(o,null,{default:(0,n.w5)((()=>[((0,n.wg)(),(0,n.j4)((0,n.LL)(e.icon)))])),_:2},1024),(0,n._)("b",null,(0,r.zw)(e.label),1)],10,Oi)))),128)),(0,n._)("div",Ei,["point"===a.activeTab?((0,n.wg)(),(0,n.j4)(u,{key:0,class:"u-select",modelValue:l.pointStatus,"onUpdate:modelValue":t[0]||(t[0]=e=>l.pointStatus=e),style:{width:"100px"}},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.statusList,(e=>((0,n.wg)(),(0,n.j4)(d,{label:e.label,value:e.value,key:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])):(0,n.kq)("",!0),"strategy"===a.activeTab?((0,n.wg)(),(0,n.j4)(c,{key:1,icon:"Plus",onClick:l.toPublish},{default:(0,n.w5)((()=>[(0,n.Uk)("发布攻略")])),_:1},8,["onClick"])):(0,n.kq)("",!0)])]),(0,n._)("div",Zi,[l.currentComponent?((0,n.wg)(),(0,n.j4)((0,n.LL)(l.currentComponent),{key:0})):(0,n.kq)("",!0)])])])}const Yi={class:"m-cj-strategy"},Hi={key:0,class:"m-strategy-list"};function Ki(e,t,i,s,a,l){const o=(0,n.up)("ListItem"),r=(0,n.up)("el-alert"),d=(0,n.up)("el-pagination"),u=(0,n.Q2)("loading");return(0,n.wy)(((0,n.wg)(),(0,n.iD)("div",Yi,[a.list.length?((0,n.wg)(),(0,n.iD)("div",Hi,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.list,(e=>((0,n.wg)(),(0,n.j4)(o,{key:e.post_id,item:e,order:l.params.order},null,8,["item","order"])))),128))])):((0,n.wg)(),(0,n.j4)(r,{key:1,effect:"dark",class:"m-strategy-null",title:"没有找到相关条目",type:"info",center:"","show-icon":""})),(0,n.Wm)(d,{class:"m-strategy-pages",background:"",layout:"total, prev, pager, next",total:a.total,"current-page":a.page,"page-size":a.per,small:"","hide-on-single-page":"",onCurrentChange:l.changePage},null,8,["total","current-page","page-size","onCurrentChange"])])),[[u,a.loading]])}const Xi={class:"u-item"},Ai=["href"],Qi=["src","alt"],Gi=["href","target"],en={class:"u-zlp"},tn={class:"u-misc"},nn={class:"u-date"},sn={key:0},an={key:1};function ln(e,t,i,s,a,l){const o=(0,n.up)("Clock"),d=(0,n.up)("el-icon");return(0,n.wg)(),(0,n.iD)("div",Xi,[(0,n._)("h2",{class:(0,r.C_)(["u-post",{isSticky:i.item.sticky}])},[(0,n._)("a",{class:"u-author",href:l.authorLink(i.item.post_author),target:"_blank"},[(0,n._)("img",{class:"u-author-avatar",src:l.showAvatar(i.item.author_info),alt:l.showNickname(i.item.author_info),onError:t[0]||(t[0]=(...e)=>l.setDefaultAvatar&&l.setDefaultAvatar(...e))},null,40,Qi)],8,Ai),(0,n._)("a",{class:"u-title",style:(0,r.j5)(l.showHighlight(i.item.color)),href:l.postLink(i.item.ID),target:e.target},[(0,n._)("i",en,(0,r.zw)(i.item.zlp||"未知版本"),1),(0,n.Uk)(" "+(0,r.zw)(i.item.post_title||"无标题"),1)],12,Gi)],2),(0,n._)("div",tn,[(0,n._)("span",nn,[(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Wm)(o)])),_:1}),"update"==i.order?((0,n.wg)(),(0,n.iD)("time",sn,(0,r.zw)(l.dateFormat(i.item.post_modified)),1)):((0,n.wg)(),(0,n.iD)("time",an,(0,r.zw)(l.dateFormat(i.item.post_date)),1))])])])}var on=i(23910),rn=i(26060),dn={name:"ListItem",props:["item","order","caller"],components:{},data:function(){return{target:(0,R.buildTarget)()}},computed:{client(){var e;return null===(e=this.item)||void 0===e?void 0:e.client},rootLink(){return"std"!==this.client?J.__OriginRoot:J.__Root}},watch:{},methods:{setDefaultAvatar(e){e.target.src=J.default_avatar},getBanner:function(e){return e.post_banner?(0,R.showBanner)(e.post_banner):J.__imgPath+"image/fb_map_thumbnail/null.png"},format:function(e,t){var i;let n=null===e||void 0===e||null===(i=e.post_meta)||void 0===i?void 0:i[t];return n&&n.length?n:["-"]},addTopic(e){this.$router.push({query:{topic:e}})},postLink(e){return(0,R.getLink)("bps",e)},authorLink:R.authorLink,showHighlight(e){return e?`color:${e};font-weight:600;`:""},showMark:function(e){return on.I[e]||e},showAvatar:function(e){return(0,R.showAvatar)(null===e||void 0===e?void 0:e.user_avatar)},showNickname:function(e){return(null===e||void 0===e?void 0:e.display_name)||"匿名"},dateFormat:function(e){return(0,rn.s2)(new Date(e))}}};const un=(0,le.Z)(dn,[["render",ln]]);var cn=un,pn={name:"CJStrategy",components:{ListItem:cn},data(){return{page:1,pages:1,per:15,total:0,loading:!1,list:[]}},computed:{params(){return{page:this.page,per:this.per}},query(){return{client:(0,ne.o)().client,order:"update"}}},watch:{query:{deep:!0,handler:function(){this.page=1,this.load()}}},methods:{load(e=!1){const t={...(0,He.cloneDeep)(this.params),...(0,He.cloneDeep)(this.query)};t.sticky=1,this.loading=!0,Z(t).then((t=>{var i,n,s,a,l,o,r,d;e?this.list=this.list.concat(null===(l=t.data)||void 0===l||null===(o=l.data)||void 0===o?void 0:o.list):this.list=null===(r=t.data)||void 0===r||null===(d=r.data)||void 0===d?void 0:d.list;this.total=null===(i=t.data)||void 0===i||null===(n=i.data)||void 0===n?void 0:n.total,this.pages=null===(s=t.data)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.pages})).finally((()=>{this.loading=!1}))},changePage(e){this.page=e,this.load()},appendPage(){this.page++,this.load(!0)}},mounted(){this.load()}};const mn=(0,le.Z)(pn,[["render",Ki]]);var hn=mn;const gn={class:"m-my-points"},vn={class:"u-header"},fn={class:"u-title"},yn=["src","alt"],_n={class:"u-op"},kn={class:"u-content"},wn={class:"u-time"},bn={key:1,class:"u-no-data"},xn={key:1,class:"u-no-data"};function Cn(e,t,i,s,a,l){const o=(0,n.up)("el-tag"),d=(0,n.up)("el-button");return(0,n.wg)(),(0,n.iD)("div",gn,[l.originMyPoints.length?((0,n.wg)(),(0,n.iD)(n.HY,{key:0},[l.myPoints.length?((0,n.wg)(!0),(0,n.iD)(n.HY,{key:0},(0,n.Ko)(l.myPoints,(e=>((0,n.wg)(),(0,n.iD)("div",{class:"u-point-item",key:e.id},[(0,n._)("div",vn,[(0,n._)("div",fn,[(0,n._)("img",{src:e.pointImg,alt:e.pointName},null,8,yn),(0,n._)("span",null,(0,r.zw)(e.pointName),1),(0,n.Wm)(o,{size:"small",effect:"dark",type:1===e.status?"success":2===e.status?"danger":""},{default:(0,n.w5)((()=>[(0,n.Uk)((0,r.zw)(a.statusMap[e.status]),1)])),_:2},1032,["type"])]),(0,n._)("div",_n,[(0,n.Wm)(d,{type:"primary",text:"",onClick:t=>l.toEdit(e)},{default:(0,n.w5)((()=>[(0,n.Uk)("编辑")])),_:2},1032,["onClick"]),(0,n.Wm)(d,{type:"danger",text:"",onClick:t=>l.toDel(e.id)},{default:(0,n.w5)((()=>[(0,n.Uk)("删除")])),_:2},1032,["onClick"])])]),(0,n._)("div",kn,(0,r.zw)(e.desc),1),(0,n._)("div",wn,"UpdatedAt: "+(0,r.zw)(l.formatTime(e.updated_at)),1)])))),128)):((0,n.wg)(),(0,n.iD)("span",bn,"该分类下并无数据。"))],64)):((0,n.wg)(),(0,n.iD)("span",xn,"请打开编辑模式后，右键添加您的标点。"))])}const In=(0,ne.o)();var Pn={name:"CJPoints",data(){return{statusMap:(0,ei.Xl)(vi)}},computed:{statusFilter(){return In.myPointsStatus},myPoints(){return In.myPoints},originMyPoints(){return In.originMyPoints}},watch:{statusFilter(e){this.statusChange(e)}},methods:{formatTime:hi.m,statusChange(e){In.myPoints=""!==e?In.originMyPoints.filter((t=>t.status===~~e)):In.originMyPoints},toEdit(e){In.editPoint=e},toDel(e){In.delPointId=e}}};const Dn=(0,le.Z)(Pn,[["render",Cn]]);var Mn=Dn;const Ln=(0,ne.o)();var Sn={name:"CJExtra",components:{CJStrategy:hn,CJPoints:Mn},data(){return{activeTab:"strategy",statusMap:(0,ei.Xl)(vi),tabs:[{label:"吃鸡攻略",value:"strategy",icon:"Collection",component:"CJStrategy"},{label:"我的标点",value:"point",icon:"Location",component:"CJPoints"}]}},computed:{pointStatus:{get(){return Ln.myPointsStatus},set(e){Ln.myPointsStatus=e}},client(){return Ln.client},currentComponent(){var e;return(null===(e=this.tabs.find((e=>e.value===this.activeTab)))||void 0===e?void 0:e.component)||""},statusList(){const e=[{value:"",label:"全部"}];for(const[t,i]of Object.entries(this.statusMap))e.push({value:t,label:i});return e}},methods:{toPublish(){const e=(0,R.publishLink)("bps/?tags=PVP&topics=吃鸡");window.open(e,"_blank")}}};const Wn=(0,le.Z)(Sn,[["render",Fi]]);var zn=Wn;const $n={class:"m-cj-intro"},qn={class:"u-title"},Vn=(0,n._)("b",null,"背景特色",-1),jn=["innerHTML"];function Tn(e,t,i,s,a,l){const o=(0,n.up)("Compass"),r=(0,n.up)("el-icon");return(0,n.wg)(),(0,n.iD)("div",$n,[(0,n._)("div",qn,[(0,n.Wm)(r,{class:"u-tab-icon"},{default:(0,n.w5)((()=>[(0,n.Wm)(o)])),_:1}),Vn]),(0,n._)("div",{class:"u-info",innerHTML:l.getData()},null,8,jn)])}const Bn=(0,ne.o)();var Rn={name:"CJMapIntro",components:{},data:function(){return{data:(0,ei.Xl)([{id:296,name:"龙门绝境",setting:"<p>数百年前，鄯善国公主图兰凭借手中的烨阳刀、沙驰军和“十二飞沙”纵横西域。百年过后，秘宝再现。无数侠士前往大漠沙海，希望寻找到传说中的秘宝和失传绝学。</p>",feature:"<p>【驼铃】道具，使用后会在地图的某处出现 5 只移速过人的骆驼坐骑。队伍仅剩一人时，可通过采集叹息风碑掉落的“流萤返魂花”复活队友，仅能随机复活一人，且该道具无法在决赛圈中使用。</p>"},{id:297,name:"龙门绝境·夜",setting:"<p>数百年前，鄯善国公主图兰凭借手中的烨阳刀、沙驰军和“十二飞沙”纵横西域。百年过后，秘宝再现。无数侠士前往大漠沙海，希望寻找到传说中的秘宝和失传绝学。</p>",feature:"<p>【驼铃】道具，使用后会在地图的某处出现 5 只移速过人的骆驼坐骑。队伍仅剩一人时，可通过采集叹息风碑掉落的“流萤返魂花”复活队友，仅能随机复活一人，且该道具无法在决赛圈中使用。</p>"},{id:410,name:"沧溟绝境",setting:"<p>大定元年,皇族宇文氏遭屠。香老人次子与师妹死于九天初代苍天君方有崖之手。</p>\n                            <p>香老人痛心之余,欲将宇文乾雅家眷后裔护送至苗疆,却遭五仙教拒绝。遂夺走《毒蛊经》，自立香巫教,率弟子前往东海,漂流至一荒岛。再度凝望中原时，苍茫大海难以逾越,便将岛名改为沧溟。直至因缘际会下，探知仇人踪迹，率弟子前往东海，再未归来……</p>\n                            <p>原来香老人不敌方有崖，九死一生漂流至东海之东的一片群岛。再度凝望中原时，苍茫大海难以逾越，便将岛名改为沧溟，伤重不治后离去。其女曦凰更擅长蛊惑人心，整个岛上的住民尽数归于香巫教，并被灌输向苍天君复仇的遗志。</p>\n                            <p>就在曦凰准备好重新集结势力，欲再度进军东海时，触动了岛上尘封的祭坛，只见火山喷发引发海啸，让整个沧溟岛如它的名字一般，失落在漫天的水龙卷中……</p>",feature:"<p>全新的海龙卷的加入令吃鸡的战场变得更加变幻莫测，与以往固定缩小的沙尘风圈不同，“沧溟绝境”的海龙卷不仅仅随着时间的推移而不断缩小，在其缩小的同时，还将随机的进行移动！优化复活机制，拾取【九转还魂草】使用可复活指定队友。使用道具【凌波草】可在水面行走。</p>"},{id:512,name:"白龙绝境",setting:"<p>在很长一段时间里，乌蒙贵的得力手下嗥汐，一直在西南深林中继续有关尸人的实验。当嗥汐敏锐觉察到因中原陷入战乱，南诏第五代王阁罗凤趁此机会不断扩张领土时，她觉得这是一个值得利用的好机会。</p>\n                            <p>楫汐以用蛊术为阁罗凤挑选忠诚勇士为名，获得了阁罗凤的准许，在白龙口地区，正大光明开辟了一片杀戮之地。南诏的神兵、密宝、灵药，吸引众多武功不俗的侠客、身怀绝技的异人，他们在这一片寂静的深林中，展开厮杀，欲夺魁首。</p>\n                            <p>而握汐的腐沼毒雾总悄无声息得将所有人包围......有些人比赛之初便被淘汰遣返，有些人夺魁后成为南诏之臣,有些人潜入其中仅为刺探情报，有些人夺取神兵密宝后潇洒而去，还有些人被毒雾侵蚀之后便消失得无影无踪……</p>",feature:"<p>“白龙绝境”准备期间，侠士可从地图中一览所有航线，并可主动点击选择其中一个航线出发，总计6条航线可供选择。小队内所有侠士将默认跟随队长选择，也可手动勾选切换，每位侠士均可预览所有队友选择的航线。</p>\n                            <p>特有无间死斗玩法，每位侠士进入“白龙绝境”后都会携带1个绑定的“无间行者信物”。所有已重伤且自身拥有“无间行者信物”的侠士均可获得参与“无间死斗”的资格。</p>\n                            <p>全局“白龙绝境”共开启5场“无间死斗”。开启时，所有已重伤侠士均可消耗自身拥有的“无间行者信物”复活进入“无间死斗”玩法当中。</p>\n                            <p>进入“无间死斗”后，侠士将保留组队关系，开启淘汰乱斗。当淘汰人数达到场内人数一半（向上取整)，或在“无间死斗”场内仅剩一支小队未被淘汰时，未被淘汰的侠士将恢复满状态,并将随机在其任一存活队友身边返回“白龙绝境”，而“白龙绝境”中无存活队友的回归侠士将在地图中未受到“腐沼毒雾”侵袭的随机位置返回。</p>\n                            <p>“无间死斗”期间将随时间的推进出现“蚀骨怨寒”并不断增强，面场上侠士将不受“白龙绝境”中“腐沼毒雾”的影响。</p>"},{id:532,name:"天原绝境",setting:"<p>长自山的东北冰原，地形复杂，天气变幻无常，若与狂风骤雪正面相遇，哪怕是内力深厚的武林人士也难以招架。</p>\n                        <p>柳家、独孤家、长孙氏、绳池剑宗、武家恩怨颇深，历年来几家弟子若要下山历练，都需前往此地。绳池剑宗的两位与宗主同辈分的叔祖“卷丘”朴太闲与“大翅璐剑”崔路南在下山之时也被霸刀山庄庄主柳风骨捉到，遗恨于吞吴刀下。但在这里历练之后的生还者多半能有大进境，也算一块历练宝地。</p>\n                        <p>这片冰原自远古以来便生产天材地宝，如老参丹株、精铁稀矿，又因几家恩仇对决，经常无可避免将来此寻宝的外人卷入，渐渐为北地武林所知，被北地武林称为“绝境天原”，等闲之人不敢轻易踏入。</p>",feature:"<p>冰天雪地的“天原绝境”为侠士们带来了诸多考验，其中最明显的当属温度系统!侠士在非战斗状态下静止不动时将降低自身温度，需保持移动或战斗状态下才能提升温度。在自身温度低于正常值时，将使自身出招变得缓慢，在失温后会逐渐扣减气血。</p>\n                        <p>为了保持温暖，侠士可使用全新道具【燧石】点燃场景内的【干草堆】烤火取暖恢复温度，或可使用【火把】带来些微暖意。但用火需谨慎，【燧石】甚至还可点燃其他侠士哦!而烤火时也请留心风雪来袭，暴风雪过境时小小的取暖篝火可是会熄灭的!<</p>\n                        <p>此外“天原绝境”环境极为恶劣，还有风雪席卷令人难以抵挡。当侠士直面风雪时，温度将会下降，在持续受到凤雪袭击还将削减少量气血上限，在离开风雪圈后将逐渐恢复，因此还请多加注意!而在行至山谷地区时，还可能会遇到强劲的山谷风推动侠士强制移动!</p>\n                        <p>马匪刷新分为红蓝两种，击败拾取其中一种物资后将无法拾取另一种的物资。马匪物资会掉落坐骑【战象】，交互后可乘骑战象使用3种战象技能。初始会赠送【玄冰之息】使用后2分钟内可免死一次，开局10分钟后无法使用。</p>"},{id:645,name:"洱海绝境",setting:"<p>乾元二年，南诏王召开武林大会，香巫教借着沙壹之宾首席的乌蒙贵与南诏王达成了某些利益的置换。</p>\n                            <p>随后，南诏王将苍山洱海的部分地区辟出，召八方豪杰前来角逐，又许下重奖予角逐至最后的勇士，一时间洱海刀光剑影难绝……</p>",feature:"<p>80位侠士单排参加，所有侠士在游戏内名称均为未知侠士，禁用近聊频道。</p>\n                            <p>◆每场战斗将会有三次【南诏王的召唤】，开始前均会发布全图公告召集侠士参与。</p>\n                            <p>◇处于脱战状态的侠士届时可直接点击使用背包中自动获得的【南诏王的信物】，进入决斗场地准备作战。</p>\n                            <p>从【南诏王的召唤】中存活胜出的侠士们不仅可以将其中拾获的稀有装备直接带到【洱海绝境】继续使用，而且将会获得持续一段时间的隐身与毒圈免疫效果,期间攻击他人将立即失效。</p>\n                            <p>进入场景自动获得【步步为营】和【洱海飞爪】，侠士提前在某处放置一个5分钟内隐形的【步步为营】，自身身受重伤时可立即在这处复活并获得一套基础绿色品质装备。</p>\n                            <p>【步步为营】为一次性道具，且无法于【南诏王的召唤】中使用。【洱海绝境】地势复杂，既有崇山峻岭悬崖陡立，也有深潭幽幽岩谷赤红。【洱海飞爪】可充能3层使用，助你千里追击,飞掠迎敌!</p>\n                            <p>该地图无需击溃马匪，刷新倒计时结束后即可拾取【劫掠的货物】!内含橙色品质装备与神秘道具，可助侠士一臂之力。</p>\n                            <p>战斗越临近终章，则【劫掠的货物】价值越高!是逆风翻盘还是如虎添翼?或许你最需要的东西就在这里!</p>"}])}},computed:{map(){return Bn.map}},methods:{getData(){const e=this.data.find((e=>e.id===this.map))||{};return e.setting+e.feature}}};const Un=(0,le.Z)(Rn,[["render",Tn]]);var Jn=Un,Nn={name:"CJ",components:{DarkLayout:gt,CJIndex:Ri,CJExtra:zn,CJIntro:Jn},data:function(){return{}},computed:{},methods:{},mounted(){}};const On=(0,le.Z)(Nn,[["render",o]]);var En=On},77324:function(e,t,i){e.exports=i.p+"img/cave.e8beb1ac.svg"},93565:function(e,t,i){e.exports=i.p+"img/goods.5e36df1e.svg"},8905:function(e,t,i){e.exports=i.p+"img/monster.a6192413.svg"},83723:function(e,t,i){e.exports=i.p+"img/path.f3250ff1.svg"},47614:function(e,t,i){e.exports=i.p+"img/small_goods.3b88d053.svg"},45522:function(e,t,i){e.exports=i.p+"img/logo.0460842a.svg"}}]);
//# sourceMappingURL=180.e577184a.js.map