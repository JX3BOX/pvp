"use strict";(self["webpackChunkpvp"]=self["webpackChunkpvp"]||[]).push([[815],{52311:function(e,a,l){l.d(a,{f:function(){return i},m:function(){return n}});var t=l(18371);const n=()=>(0,t.nj)().get("/api/cms/breadcrumb/battle-ac-v3"),i=()=>(0,t.nj)().get("/api/cms/breadcrumb/battle-jba-v3")},44294:function(e,a,l){l.d(a,{Pm:function(){return u},Wb:function(){return n},dT:function(){return c},iv:function(){return d},mP:function(){return s},v8:function(){return i},wk:function(){return o}});var t=l(18371);const n=()=>(0,t.IZ)().get("/api/team/new-token"),i=e=>(0,t.IZ)().get(`/api/team/battle/${e}`),u=e=>(0,t.IZ)().get("/api/team/battle/jcl",{params:e}),o=(e,a)=>(0,t.IZ)().put(`/api/team/battle/${e}`,a),c=e=>(0,t.IZ)().delete(`/api/team/battle/${e}`),s=e=>(0,t.IZ)().get("/api/team/battle/my-list",{params:e}),d=({page:e=1,pageSize:a,type:l,subject:n,title:i,battle_id:u})=>(0,t.IZ)().get("/api/team/battle/public-list",{params:{pageIndex:e,pageSize:a,type:l,subject:n,title:i,battle_id:u}})},87418:function(e,a,l){l.d(a,{Z:function(){return d}});var t=l(66252),n=l(2262),i=l(52311);const u={class:"m-ac-card w-card-home"},o=["innerHTML"];var c={__name:"ac_card",setup(e){const a=()=>{(0,i.m)().then((e=>{l.value=e.data.data.html}))},l=(0,n.iH)("");return(0,t.bv)((()=>{a()})),(e,a)=>((0,t.wg)(),(0,t.iD)("div",u,[a[0]||(a[0]=(0,t._)("p",{class:"u-card-title"},"郑重声明",-1)),(0,t._)("div",{innerHTML:l.value},null,8,o)]))}};const s=c;var d=s},1351:function(e,a,l){l.d(a,{Z:function(){return B}});l(57658);var t=l(66252),n=l(2262),i=l(3577),u=l(49963),o=l(65781),c=l(44294),s=l(81348),d=l(68652),r=l(4328);const p={class:"u-title"},v={class:"m-dialog-footer"};var m={__name:"edit_dialog",emits:["updated"],setup(e,{expose:a,emit:l}){const u=l,o=(0,n.iH)(!1),m=(0,n.iH)(!1),g=(0,n.iH)({}),w=e=>{m.value=!0,g.value=(0,d.Z)(e)},b=()=>{const e=(0,r.Z)(g.value,["id","title","desc","visible"]);o.value=!0,(0,c.wk)(g.value.id,e).then((()=>{m.value=!1,o.value=!1,g.value={},s.z8.success("编辑成功"),u("updated")})).catch((()=>{o.value=!1,s.z8.error("数据更新失败，请稍后再试")}))};return a({open:w}),(e,a)=>{const l=(0,t.up)("el-input"),n=(0,t.up)("el-form-item"),u=(0,t.up)("el-radio"),c=(0,t.up)("el-radio-group"),s=(0,t.up)("el-form"),d=(0,t.up)("el-button"),r=(0,t.up)("el-dialog");return(0,t.wg)(),(0,t.j4)(r,{modelValue:m.value,"onUpdate:modelValue":a[4]||(a[4]=e=>m.value=e),width:"50%","append-to-body":"",class:"m-edit-dialog","close-on-click-modal":!1,"destroy-on-close":!0},{header:(0,t.w5)((()=>[(0,t._)("p",p,(0,i.zw)(g.value.title),1)])),footer:(0,t.w5)((()=>[(0,t._)("span",v,[(0,t.Wm)(d,{link:"",onClick:a[3]||(a[3]=e=>m.value=!1)},{default:(0,t.w5)((()=>a[8]||(a[8]=[(0,t.Uk)(" 取消 ")]))),_:1}),(0,t.Wm)(d,{type:"primary",onClick:b,loading:o.value},{default:(0,t.w5)((()=>a[9]||(a[9]=[(0,t.Uk)(" 应用 ")]))),_:1},8,["loading"])])])),default:(0,t.w5)((()=>[(0,t.Wm)(s,{"label-width":"100px",model:g.value},{default:(0,t.w5)((()=>[(0,t.Wm)(n,{label:"标题"},{default:(0,t.w5)((()=>[(0,t.Wm)(l,{modelValue:g.value.title,"onUpdate:modelValue":a[0]||(a[0]=e=>g.value.title=e),placeholder:"请输入标题"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(n,{label:"描述"},{default:(0,t.w5)((()=>[(0,t.Wm)(l,{modelValue:g.value.desc,"onUpdate:modelValue":a[1]||(a[1]=e=>g.value.desc=e),placeholder:"请输入描述",type:"textarea",rows:4},null,8,["modelValue"])])),_:1}),(0,t.Wm)(n,{label:"阅读权限"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{modelValue:g.value.visible,"onUpdate:modelValue":a[2]||(a[2]=e=>g.value.visible=e)},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{value:0},{default:(0,t.w5)((()=>a[5]||(a[5]=[(0,t.Uk)("公开")]))),_:1}),(0,t.Wm)(u,{value:1},{default:(0,t.w5)((()=>a[6]||(a[6]=[(0,t.Uk)("私有")]))),_:1}),(0,t.Wm)(u,{value:2},{default:(0,t.w5)((()=>a[7]||(a[7]=[(0,t.Uk)("仅亲友可见")]))),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])}}};const g=m;var w=g,b=l(42119),f=l(25108);const k={class:"m-data-list"},h={key:0,class:"u-tabs"},_=["onClick"],y={key:1,class:"u-search"},z={class:"u-list"},H={class:"u-list-data"},U={key:0,class:"u-list-empty"},D=["onClick"],W={key:0,class:"u-badge u-private"},j={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 16",width:"12",height:"16",fill:"#dbab09","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"},C={key:1,class:"u-badge u-star"},S={key:2,class:"u-badge u-checked"},V={height:"512",viewBox:"0 0 520 520",width:"512",xmlns:"http://www.w3.org/2000/svg","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"},x={key:0,class:"u-opr"},Z={class:"u-update"},M={key:0,class:"u-list-pagination"};var q={__name:"data_list",props:{enableTab:{type:Boolean,default:!1},enableSearch:{type:Boolean,default:!1},mine:{type:Boolean,default:!1},pageSize:{type:Number,default:12},enablePaginate:{type:Boolean,default:!1},showMore:{type:Boolean,default:!1}},setup(e){const a=(0,b.tv)(),l=e,{enableTab:d,enableSearch:r,enablePaginate:p,mine:v,showMore:m,pageSize:g}=(0,n.BK)(l),q=(0,n.iH)("team"),T=[{name:"team",title:"团队分析"},{name:"boss",title:"首领分析"},{name:"pvp",title:"竞技多维"}],B=(0,n.iH)(null),I=(0,n.iH)(""),L=(0,n.iH)(!1),P=(0,n.iH)([]),$=(0,n.iH)(1),K=(0,n.iH)(0),Q=()=>{const e={type:"jcl",subject:q.value,page:$.value,pageSize:g.value};I.value&&(I.value.match(/^zhcn_.+::.+::\d+::\d+::\d+\/\d+/)?e.battle_id=I.value:e.title=I.value),v.value&&delete e.subject,L.value=!0;const a=v.value?(0,c.mP)(e):(0,c.iv)(e);a&&a.then((e=>{var a;if(0===(null===(a=e.data)||void 0===a?void 0:a.code)){let{list:a,page:{total:l}}=e.data.data;P.value=a,K.value=l}else s.z8.error(e.data.msg??"获取数据失败")})).catch((e=>{f.warn(e),s.z8.error("获取数据失败")})).finally((()=>{L.value=!1}))},Y=e=>{(0,c.dT)(e.id).then((e=>{var a;0===(null===(a=e.data)||void 0===a?void 0:a.code)?(s.z8.success("删除成功"),Q()):s.z8.error(e.data.msg??"删除失败")}))},A=e=>({boss:"首领行为",team:"团队行为",pvp:"竞技多维"}[e]??"JCL数据");return(0,t.Rh)(Q),(e,l)=>{const c=(0,t.up)("el-input"),s=(0,t.up)("el-button"),b=(0,t.up)("el-popconfirm"),f=(0,t.up)("el-pagination"),R=(0,t.up)("DArrowRight"),E=(0,t.up)("el-icon"),J=(0,t.up)("router-link"),N=(0,t.Q2)("loading");return(0,t.wg)(),(0,t.iD)("div",k,[(0,n.SU)(d)?((0,t.wg)(),(0,t.iD)("div",h,[((0,t.wg)(),(0,t.iD)(t.HY,null,(0,t.Ko)(T,((e,a)=>(0,t._)("div",{key:a,class:(0,i.C_)(["u-tab",{active:e.name==q.value}]),onClick:a=>q.value=e.name},(0,i.zw)(e.title),11,_))),64))])):(0,t.kq)("",!0),(0,n.SU)(r)?((0,t.wg)(),(0,t.iD)("div",y,[(0,t.Wm)(c,{modelValue:I.value,"onUpdate:modelValue":l[0]||(l[0]=e=>I.value=e),placeholder:"请输入搜索关键词..",onKeyup:(0,u.D2)(Q,["enter"]),"suffix-icon":(0,n.SU)(o.Search)},null,8,["modelValue","suffix-icon"])])):(0,t.kq)("",!0),(0,t.wy)(((0,t.wg)(),(0,t.iD)("div",z,[(0,t._)("div",H,[0===K.value?((0,t.wg)(),(0,t.iD)("div",U,"暂无数据，上传一个吧 😘")):(0,t.kq)("",!0),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(P.value,((e,c)=>((0,t.wg)(),(0,t.iD)("div",{class:"u-list-item",key:c},[(0,t._)("span",{class:(0,i.C_)(["u-type",`u-type-${e.subject}`])},(0,i.zw)(A(e.subject)),3),(0,t._)("div",{class:"u-name",onClick:l=>(0,n.SU)(a).push({name:"view",query:{id:e.id}})},[0!=e.visible?((0,t.wg)(),(0,t.iD)("i",W,[((0,t.wg)(),(0,t.iD)("svg",j,l[2]||(l[2]=[(0,t._)("path",{"fill-rule":"evenodd",d:"M4 13H3v-1h1v1zm8-6v7c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V7c0-.55.45-1 1-1h1V4c0-2.2 1.8-4 4-4s4 1.8 4 4v2h1c.55 0 1 .45 1 1zM3.8 6h4.41V4c0-1.22-.98-2.2-2.2-2.2-1.22 0-2.2.98-2.2 2.2v2H3.8zM11 7H2v7h9V7zM4 8H3v1h1V8zm0 2H3v1h1v-1z"},null,-1)])))])):(0,t.kq)("",!0),e.rank_id?((0,t.wg)(),(0,t.iD)("i",C,l[3]||(l[3]=[(0,t._)("i",null,"★",-1),(0,t.Uk)("天梯榜")]))):(0,t.kq)("",!0),e.is_checked?((0,t.wg)(),(0,t.iD)("i",S,[((0,t.wg)(),(0,t.iD)("svg",V,l[4]||(l[4]=[(0,t._)("g",{"data-name":"15-Checked"},[(0,t._)("circle",{cx:"208.52",cy:"288.5",fill:"#b0ef8f",r:"176.52"}),(0,t._)("path",{d:"M210.516 424.937l-2.239-3.815c-34.2-58.27-125.082-181.928-126-183.17l-1.311-1.781 30.963-30.6 98.012 68.439c61.711-80.079 119.283-135.081 156.837-167.2C407.859 71.675 434.6 55.5 434.87 55.345l.608-.364H488l-5.017 4.468C353.954 174.375 214.1 418.639 212.707 421.093z",fill:"#009045"})],-1)])))])):(0,t.kq)("",!0),(0,t._)("span",null,(0,i.zw)(e.title),1)],8,D),(0,n.SU)(v)?((0,t.wg)(),(0,t.iD)("span",x,[(0,t.Wm)(s,{link:"",icon:(0,n.SU)(o.Edit),onClick:(0,u.iM)((a=>B.value.open(e)),["stop"])},null,8,["icon","onClick"]),(0,t.Wm)(b,{width:"220","confirm-button-text":"确定",title:"😱此操作将永久删除数据, 是否继续?",effect:"dark","popper-class":"m-del-confirm",icon:null,onConfirm:a=>Y(e)},{reference:(0,t.w5)((()=>[(0,t.Wm)(s,{link:"",icon:(0,n.SU)(o.Delete)},null,8,["icon"])])),_:2},1032,["onConfirm"])])):(0,t.kq)("",!0),(0,t._)("span",Z,[l[5]||(l[5]=(0,t._)("span",null,"更新：",-1)),(0,t._)("span",null,(0,i.zw)(e.updated_at),1)])])))),128))]),(0,n.SU)(p)?((0,t.wg)(),(0,t.iD)("div",M,[(0,t.Wm)(f,{background:"",layout:"prev, pager, next","current-page":$.value,"onUpdate:currentPage":l[1]||(l[1]=e=>$.value=e),total:K.value,"page-size":(0,n.SU)(g),"hide-on-single-page":!0},null,8,["current-page","total","page-size"])])):(0,t.kq)("",!0),(0,n.SU)(m)?((0,t.wg)(),(0,t.j4)(J,{key:1,class:"u-list-more",to:"/public"},{default:(0,t.w5)((()=>[l[6]||(l[6]=(0,t.Uk)(" 查看更多")),(0,t.Wm)(E,null,{default:(0,t.w5)((()=>[(0,t.Wm)(R)])),_:1})])),_:1})):(0,t.kq)("",!0)])),[[N,L.value]]),(0,n.SU)(v)?((0,t.wg)(),(0,t.j4)(w,{key:2,ref_key:"editDialog",ref:B,onUpdated:Q},null,512)):(0,t.kq)("",!0)])}}};const T=q;var B=T},2314:function(e,a,l){l.d(a,{Z:function(){return b}});var t=l(66252),n=l(2262),i=l(3577),u=l(65781),o=l(81348),c=l(44294),s=l(52311),d=l(49e3);const r={class:"w-card-home m-jba-card"},p={class:"u-jba-token"},v={class:"u-jba-inner"},m=["innerHTML"];var g={__name:"jba_card",setup(e){const a=(0,n.iH)(""),l=(0,n.iH)(null),g=()=>{(0,c.Wb)().then((e=>{let{code:a,data:{token:t}}=e.data;0==a&&(l.value=t)})).catch((()=>{l.value="QAQ",o.z8.error("获取失败")}))},w=()=>{navigator.clipboard.writeText(l.value).then((()=>{o.z8.success("复制成功")})).catch((()=>{o.z8.error("复制失败")}))},b=d.Z.isLogin(),f=`/account/login?redirect=${location.href}`;return(0,t.bv)((()=>{(0,s.f)().then((e=>{a.value=e.data.data.html}))})),(e,o)=>{const c=(0,t.up)("el-scrollbar"),s=(0,t.up)("el-button");return(0,t.wg)(),(0,t.iD)("div",r,[o[1]||(o[1]=(0,t._)("p",{class:"w-card-title"},"绑定魔盒助手",-1)),o[2]||(o[2]=(0,t._)("p",null,"*此令牌用于魔盒助手身份校验，切勿泄漏。",-1)),(0,t._)("div",p,[(0,n.SU)(b)?l.value?((0,t.wg)(),(0,t.iD)(t.HY,{key:2},[(0,t.Wm)(c,null,{default:(0,t.w5)((()=>[(0,t._)("p",v,(0,i.zw)(l.value),1)])),_:1}),(0,t.Wm)(s,{link:"",icon:(0,n.SU)(u.DocumentCopy),onClick:o[0]||(o[0]=e=>w())},null,8,["icon"])],64)):((0,t.wg)(),(0,t.iD)("p",{key:1,onClick:g,class:"u-jba-inner"},"点击获取并复制临时令牌")):((0,t.wg)(),(0,t.iD)("a",{key:0,class:"u-jba-inner",href:f},"请先登录"))]),(0,t._)("div",{class:"u-jba-help",innerHTML:a.value},null,8,m)])}}};const w=g;var b=w}}]);
//# sourceMappingURL=815.863d16b0.js.map