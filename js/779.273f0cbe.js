"use strict";(self["webpackChunkpvp"]=self["webpackChunkpvp"]||[]).push([[779],{26060:function(e,t,l){l.d(t,{f3:function(){return s},s2:function(){return n}});var a=l(30381),i=l.n(a);function n(e){return i()(e).format("YYYY-MM-DD")}function s(e){return i()(e).format("YYYY-MM-DD HH:mm:ss")}i().locale("zh-cn",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY年MM月DD日",LLL:"YYYY年MM月DD日Ah点mm分",LLLL:"YYYY年MM月DD日ddddAh点mm分",l:"YYYY-M-D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(e,t){return 12===e&&(e=0),"凌晨"===t||"早上"===t||"上午"===t?e:"下午"===t||"晚上"===t?e+12:e>=11?e:e+12},meridiem:function(e,t,l){const a=100*e+t;return a<600?"凌晨":a<900?"早上":a<1130?"上午":a<1230?"中午":a<1800?"下午":"晚上"},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:"[下]ddddLT",lastDay:"[昨天]LT",lastWeek:"[上]ddddLT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(日|月|周)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"日";case"M":return e+"月";case"w":case"W":return e+"周";default:return e}},relativeTime:{future:"%s内",past:"%s前",s:"几秒",ss:"%d秒",m:"1分钟",mm:"%d分钟",h:"1小时",hh:"%d小时",d:"1天",dd:"%d天",M:"1个月",MM:"%d个月",y:"1年",yy:"%d年"},week:{dow:1,doy:4}})},89779:function(e,t,l){l.r(t),l.d(t,{default:function(){return dt}});var a=l(66252);const i={class:"m-cj-content"};function n(e,t,l,n,s,o){const r=(0,a.up)("CJIndex"),u=(0,a.up)("CJExtra"),d=(0,a.up)("ListLayout");return(0,a.wg)(),(0,a.j4)(d,null,{default:(0,a.w5)((()=>[(0,a._)("div",i,[(0,a.Wm)(r),(0,a.Wm)(u)])])),_:1})}var s=l(79851),o=l(49963),r=l(3577);const u={class:"m-select"},d=(0,a._)("label",{class:"u-label"},"地图",-1),p=["src"],c={class:"m-legends"},m=["onClick"],y=["src","alt"],h={class:"u-label"},g={key:1,class:"m-paths"},_=["src"],k={class:"m-footer"};function v(e,t,l,i,n,s){const v=(0,a.up)("el-option"),w=(0,a.up)("el-select"),f=(0,a.up)("el-form-item"),x=(0,a.up)("el-input"),b=(0,a.up)("el-form"),D=(0,a.up)("el-button"),L=(0,a.up)("el-dialog"),C=(0,a.up)("CJIntro"),Y=(0,a.Q2)("loading");return(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",{class:"m-cj-index",onClick:t[6]||(t[6]=(0,o.iM)((e=>n.contextMenuVisible=!1),["prevent"]))},[(0,a._)("div",u,[d,(0,a.Wm)(w,{modelValue:n.map,"onUpdate:modelValue":t[0]||(t[0]=e=>n.map=e)},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.maps,(e=>((0,a.wg)(),(0,a.j4)(v,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])]),n.map?((0,a.wg)(),(0,a.iD)("div",{key:0,ref:"map",class:(0,r.C_)(["m-map",n.legend&&"is-point"]),onContextmenu:t[2]||(t[2]=(0,o.iM)(((...e)=>s.showMenu&&s.showMenu(...e)),["prevent"]))},[(0,a._)("img",{class:"u-map",src:s.getMapImage(n.map)},null,8,p),(0,a._)("div",c,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.legends,(e=>((0,a.wg)(),(0,a.iD)("div",{class:(0,r.C_)(["u-legend",e.value===this.legend&&"is-active"]),key:e.value,onClick:t=>s.setLegend(e)},[(0,a._)("img",{class:"u-legend__img",src:e.src,"svg-inline":"",alt:e.label},null,8,y),(0,a._)("label",h,(0,r.zw)(e.label),1)],10,m)))),128))]),n.contextMenuVisible?((0,a.wg)(),(0,a.iD)("div",{key:0,class:"u-context-menu",style:(0,r.j5)({top:n.contextMenuPosition.y+"px",left:n.contextMenuPosition.x+"px"})},[(0,a._)("ul",null,[(0,a._)("li",{onClick:t[1]||(t[1]=e=>s.menuItemClicked("add"))},"新增")])],4)):(0,a.kq)("",!0),n.map&&s.paths.length?((0,a.wg)(),(0,a.iD)("div",g,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.paths,(e=>((0,a.wg)(),(0,a.iD)("img",{class:(0,r.C_)(["u-path",`u-path__${e.key}`]),style:(0,r.j5)({left:e.x+70+"px",top:e.y+50+"px"}),key:e.key,src:e.url},null,14,_)))),128))])):(0,a.kq)("",!0)],34)):(0,a.kq)("",!0),(0,a.Wm)(L,{modelValue:n.showDialog,"onUpdate:modelValue":t[5]||(t[5]=e=>n.showDialog=e),title:"绝境战场","append-to-body":"",width:"560",class:"m-desert-point-pop"},{footer:(0,a.w5)((()=>[(0,a._)("div",k,[(0,a.Wm)(D,{onClick:s.onCancel},{default:(0,a.w5)((()=>[(0,a.Uk)("取消")])),_:1},8,["onClick"]),(0,a.Wm)(D,{type:"primary",loading:n.btnLoading,onClick:s.onConfirm},{default:(0,a.w5)((()=>[(0,a.Uk)("保存")])),_:1},8,["loading","onClick"])])])),default:(0,a.w5)((()=>[(0,a.Wm)(b,{ref:"pointForm",class:"m-desert-form",model:n.pointForm,rules:n.rules,"label-position":"right","label-width":"60"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{label:"类型"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{modelValue:n.pointForm.meta.type,"onUpdate:modelValue":t[3]||(t[3]=e=>n.pointForm.meta.type=e),style:{width:"100%"},prop:"type"},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{label:"路线点",value:"path"}),(0,a.Wm)(v,{label:"物资点",value:"goods"})])),_:1},8,["modelValue"])])),_:1}),(0,a.Wm)(f,{label:"描述",prop:"desc"},{default:(0,a.w5)((()=>[(0,a.Wm)(x,{type:"textarea",modelValue:n.pointForm.desc,"onUpdate:modelValue":t[4]||(t[4]=e=>n.pointForm.desc=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"]),n.map?((0,a.wg)(),(0,a.j4)(C,{key:1,map:n.map},null,8,["map"])):(0,a.kq)("",!0)])),[[Y,n.loading]])}l(57658);var w=l(24239),f=l(2262),x=l(18371),b=l(89847),D=l(6154);function L(){return D.Z.get(b.__imgPath+"map/data/map_index.json")}function C(e){let t={type:"bps",tag:"PVP",topic:"吃鸡"};return e&&(t=Object.assign(t,e)),(0,x.nj)().get("/api/cms/posts",{params:t})}function Y(e){return(0,x.qT)().get("/desert/list",{params:e})}function M(e){return(0,x.nj)().get("/api/cms/app/desert/point",{params:e})}function I(e){return(0,x.nj)().post("/api/cms/app/desert/point",e)}const S={class:"m-cj-intro"},V={class:"u-content"},j={class:"u-title"},H=["innerHTML"];function q(e,t,l,i,n,s){const o=(0,a.up)("el-icon"),u=(0,a.up)("el-tab-pane"),d=(0,a.up)("el-tabs");return(0,a.wg)(),(0,a.iD)("div",S,[(0,a.Wm)(d,{modelValue:e.active,"onUpdate:modelValue":t[0]||(t[0]=t=>e.active=t)},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.tabs,(e=>((0,a.wg)(),(0,a.j4)(u,{key:e.value,label:e.label,name:e.value},{label:(0,a.w5)((()=>[(0,a.Wm)(o,{class:"u-tab-icon"},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(e.icon)))])),_:2},1024),(0,a._)("b",null,(0,r.zw)(e.label),1)])),default:(0,a.w5)((()=>[(0,a._)("div",V,[(0,a._)("h2",j,(0,r.zw)(e.label),1),(0,a._)("div",{class:"u-info",innerHTML:s.getData()},null,8,H)])])),_:2},1032,["label","name"])))),128))])),_:1},8,["modelValue"])])}var T={name:"CJMapIntro",props:["map"],components:{},data:function(){return{loading:!1,tabs:[{icon:"Compass",value:"setting",label:"背景设定"},{icon:"Cpu",value:"feature",label:"地图特色"}],data:(0,f.Xl)([{id:296,name:"龙门绝境",setting:"<p>数百年前，鄯善国公主图兰凭借手中的烨阳刀、沙驰军和“十二飞沙”纵横西域。百年过后，秘宝再现。无数侠士前往大漠沙海，希望寻找到传说中的秘宝和失传绝学。</p>",feature:"<p>【驼铃】道具，使用后会在地图的某处出现 5 只移速过人的骆驼坐骑。队伍仅剩一人时，可通过采集叹息风碑掉落的“流萤返魂花”复活队友，仅能随机复活一人，且该道具无法在决赛圈中使用。</p>"},{id:410,name:"沧溟绝境",setting:"<p>大定元年,皇族宇文氏遭屠。香老人次子与师妹死于九天初代苍天君方有崖之手。</p>\n                            <p>香老人痛心之余,欲将宇文乾雅家眷后裔护送至苗疆,却遭五仙教拒绝。遂夺走《毒蛊经》，自立香巫教,率弟子前往东海,漂流至一荒岛。再度凝望中原时，苍茫大海难以逾越,便将岛名改为沧溟。直至因缘际会下，探知仇人踪迹，率弟子前往东海，再未归来……</p>\n                            <p>原来香老人不敌方有崖，九死一生漂流至东海之东的一片群岛。再度凝望中原时，苍茫大海难以逾越，便将岛名改为沧溟，伤重不治后离去。其女曦凰更擅长蛊惑人心，整个岛上的住民尽数归于香巫教，并被灌输向苍天君复仇的遗志。</p>\n                            <p>就在曦凰准备好重新集结势力，欲再度进军东海时，触动了岛上尘封的祭坛，只见火山喷发引发海啸，让整个沧溟岛如它的名字一般，失落在漫天的水龙卷中……</p>",feature:"<p>全新的海龙卷的加入令吃鸡的战场变得更加变幻莫测，与以往固定缩小的沙尘风圈不同，“沧溟绝境”的海龙卷不仅仅随着时间的推移而不断缩小，在其缩小的同时，还将随机的进行移动！优化复活机制，拾取【九转还魂草】使用可复活指定队友。使用道具【凌波草】可在水面行走。</p>"},{id:512,name:"白龙绝境",setting:"<p>在很长一段时间里，乌蒙贵的得力手下嗥汐，一直在西南深林中继续有关尸人的实验。当嗥汐敏锐觉察到因中原陷入战乱，南诏第五代王阁罗凤趁此机会不断扩张领土时，她觉得这是一个值得利用的好机会。</p>\n                            <p>楫汐以用蛊术为阁罗凤挑选忠诚勇士为名，获得了阁罗凤的准许，在白龙口地区，正大光明开辟了一片杀戮之地。南诏的神兵、密宝、灵药，吸引众多武功不俗的侠客、身怀绝技的异人，他们在这一片寂静的深林中，展开厮杀，欲夺魁首。</p>\n                            <p>而握汐的腐沼毒雾总悄无声息得将所有人包围......有些人比赛之初便被淘汰遣返，有些人夺魁后成为南诏之臣,有些人潜入其中仅为刺探情报，有些人夺取神兵密宝后潇洒而去，还有些人被毒雾侵蚀之后便消失得无影无踪……</p>",feature:"<p>“白龙绝境”准备期间，侠士可从地图中一览所有航线，并可主动点击选择其中一个航线出发，总计6条航线可供选择。小队内所有侠士将默认跟随队长选择，也可手动勾选切换，每位侠士均可预览所有队友选择的航线。</p>\n                            <p>特有无间死斗玩法，每位侠士进入“白龙绝境”后都会携带1个绑定的“无间行者信物”。所有已重伤且自身拥有“无间行者信物”的侠士均可获得参与“无间死斗”的资格。</p>\n                            <p>全局“白龙绝境”共开启5场“无间死斗”。开启时，所有已重伤侠士均可消耗自身拥有的“无间行者信物”复活进入“无间死斗”玩法当中。</p>\n                            <p>进入“无间死斗”后，侠士将保留组队关系，开启淘汰乱斗。当淘汰人数达到场内人数一半（向上取整)，或在“无间死斗”场内仅剩一支小队未被淘汰时，未被淘汰的侠士将恢复满状态,并将随机在其任一存活队友身边返回“白龙绝境”，而“白龙绝境”中无存活队友的回归侠士将在地图中未受到“腐沼毒雾”侵袭的随机位置返回。</p>\n                            <p>“无间死斗”期间将随时间的推进出现“蚀骨怨寒”并不断增强，面场上侠士将不受“白龙绝境”中“腐沼毒雾”的影响。</p>"},{id:532,name:"天原绝境",setting:"<p>长自山的东北冰原，地形复杂，天气变幻无常，若与狂风骤雪正面相遇，哪怕是内力深厚的武林人士也难以招架。</p>\n                        <p>柳家、独孤家、长孙氏、绳池剑宗、武家恩怨颇深，历年来几家弟子若要下山历练，都需前往此地。绳池剑宗的两位与宗主同辈分的叔祖“卷丘”朴太闲与“大翅璐剑”崔路南在下山之时也被霸刀山庄庄主柳风骨捉到，遗恨于吞吴刀下。但在这里历练之后的生还者多半能有大进境，也算一块历练宝地。</p>\n                        <p>这片冰原自远古以来便生产天材地宝，如老参丹株、精铁稀矿，又因几家恩仇对决，经常无可避免将来此寻宝的外人卷入，渐渐为北地武林所知，被北地武林称为“绝境天原”，等闲之人不敢轻易踏入。</p>",feature:"<p>冰天雪地的“天原绝境”为侠士们带来了诸多考验，其中最明显的当属温度系统!侠士在非战斗状态下静止不动时将降低自身温度，需保持移动或战斗状态下才能提升温度。在自身温度低于正常值时，将使自身出招变得缓慢，在失温后会逐渐扣减气血。</p>\n                        <p>为了保持温暖，侠士可使用全新道具【燧石】点燃场景内的【干草堆】烤火取暖恢复温度，或可使用【火把】带来些微暖意。但用火需谨慎，【燧石】甚至还可点燃其他侠士哦!而烤火时也请留心风雪来袭，暴风雪过境时小小的取暖篝火可是会熄灭的!<</p>\n                        <p>此外“天原绝境”环境极为恶劣，还有风雪席卷令人难以抵挡。当侠士直面风雪时，温度将会下降，在持续受到凤雪袭击还将削减少量气血上限，在离开风雪圈后将逐渐恢复，因此还请多加注意!而在行至山谷地区时，还可能会遇到强劲的山谷风推动侠士强制移动!</p>\n                        <p>马匪刷新分为红蓝两种，击败拾取其中一种物资后将无法拾取另一种的物资。马匪物资会掉落坐骑【战象】，交互后可乘骑战象使用3种战象技能。初始会赠送【玄冰之息】使用后2分钟内可免死一次，开局10分钟后无法使用。</p>"},{id:645,name:"洱海绝境",setting:"<p>乾元二年，南诏王召开武林大会，香巫教借着沙壹之宾首席的乌蒙贵与南诏王达成了某些利益的置换。</p>\n                            <p>随后，南诏王将苍山洱海的部分地区辟出，召八方豪杰前来角逐，又许下重奖予角逐至最后的勇士，一时间洱海刀光剑影难绝……</p>",feature:"<p>80位侠士单排参加，所有侠士在游戏内名称均为未知侠士，禁用近聊频道。</p>\n                            <p>◆每场战斗将会有三次【南诏王的召唤】，开始前均会发布全图公告召集侠士参与。</p>\n                            <p>◇处于脱战状态的侠士届时可直接点击使用背包中自动获得的【南诏王的信物】，进入决斗场地准备作战。</p>\n                            <p>从【南诏王的召唤】中存活胜出的侠士们不仅可以将其中拾获的稀有装备直接带到【洱海绝境】继续使用，而且将会获得持续一段时间的隐身与毒圈免疫效果,期间攻击他人将立即失效。</p>\n                            <p>进入场景自动获得【步步为营】和【洱海飞爪】，侠士提前在某处放置一个5分钟内隐形的【步步为营】，自身身受重伤时可立即在这处复活并获得一套基础绿色品质装备。</p>\n                            <p>【步步为营】为一次性道具，且无法于【南诏王的召唤】中使用。【洱海绝境】地势复杂，既有崇山峻岭悬崖陡立，也有深潭幽幽岩谷赤红。【洱海飞爪】可充能3层使用，助你千里追击,飞掠迎敌!</p>\n                            <p>该地图无需击溃马匪，刷新倒计时结束后即可拾取【劫掠的货物】!内含橙色品质装备与神秘道具，可助侠士一臂之力。</p>\n                            <p>战斗越临近终章，则【劫掠的货物】价值越高!是逆风翻盘还是如虎添翼?或许你最需要的东西就在这里!</p>"}]),active:"setting"}},methods:{getData(){var e;return null===(e=this.data.find((e=>e.id===this.map)))||void 0===e?void 0:e[this.active]}}},W=l(83744);const z=(0,W.Z)(T,[["render",q]]);var P=z,J=JSON.parse('[{"mapId":296,"name":"龙门绝境","paths":[{"key":"1_x653_y140","x":653,"y":140},{"key":"2_x150_y92","x":150,"y":92},{"key":"3_x139_y214","x":139,"y":214},{"key":"4_x162_y550","x":162,"y":550},{"key":"5_x176_y542","x":176,"y":542},{"key":"6_x247_y79","x":247,"y":79},{"key":"7_x151_y365","x":151,"y":365},{"key":"8_x390_y77","x":390,"y":77},{"key":"9_x217_y79","x":217,"y":79},{"key":"10_x113_y224","x":113,"y":224}]},{"mapId":297,"name":"龙门绝境·夜","paths":[{"key":"1_x653_y140","x":653,"y":140},{"key":"2_x150_y92","x":150,"y":92},{"key":"3_x139_y214","x":139,"y":214},{"key":"4_x162_y550","x":162,"y":550},{"key":"5_x176_y542","x":176,"y":542},{"key":"6_x247_y79","x":247,"y":79},{"key":"7_x151_y365","x":151,"y":365},{"key":"8_x390_y77","x":390,"y":77},{"key":"9_x217_y79","x":217,"y":79},{"key":"10_x113_y224","x":113,"y":224}]},{"mapId":410,"name":"沧溟绝境","paths":[{"key":"a1_x144_y81","x":144,"y":81},{"key":"a2_x153_y206","x":153,"y":206},{"key":"a3_x216_y293","x":216,"y":293},{"key":"a4_x393_y143","x":393,"y":143},{"key":"a5_x502_y69","x":502,"y":69},{"key":"a6_x171_y471 ","x":171,"y":471},{"key":"a7_x151_y264","x":151,"y":264},{"key":"a8_x401_y135","x":401,"y":135},{"key":"a9_x138_y445","x":138,"y":445},{"key":"a10_x188_y118","x":188,"y":118}]},{"mapId":512,"name":"白龙绝境","paths":[{"key":"b1","x":150,"y":92},{"key":"b2","x":462,"y":97},{"key":"b3","x":145,"y":130},{"key":"b4","x":115,"y":420},{"key":"b5","x":530,"y":90},{"key":"b6","x":145,"y":125}]},{"mapId":532,"name":"天原绝境","paths":[{"key":"c1","x":120,"y":75},{"key":"c2","x":70,"y":275},{"key":"c3","x":-30,"y":20}]},{"mapId":645,"name":"天原绝境","paths":[{"key":"cr1","x":258,"y":204},{"key":"cr2","x":238,"y":258},{"key":"cr3","x":164,"y":488},{"key":"cr4","x":220,"y":395},{"key":"cr5","x":320,"y":320},{"key":"cr6","x":235,"y":280}]}]'),$=l(96486),F=l(49e3),U={name:"CJIndex",components:{CJIntro:P},data(){return{loading:!1,maps:[],map:null,mapPath:(0,f.Xl)(J),imgRoot:b.__imgPath+"pve/desert/",contextMenuVisible:!1,contextMenuPosition:{x:0,y:0},showDialog:!1,points:[],legend:"",legends:[{label:"路线点",value:"path",src:l(83723)},{label:"物资点",value:"goods",src:l(93565)}],pointForm:{point:{},meta:{type:"path"},desc:"",client:(0,w.o)().client},rules:{desc:[{required:!0,message:"请输入描述",trigger:"blur"}]},btnLoading:!1}},computed:{paths(){var e;const t=(null===(e=this.mapPath.find((e=>e.mapId===this.map)))||void 0===e?void 0:e.paths)||[];return t.length?t.map((e=>({...e,url:`${this.imgRoot}${297===this.map?296:this.map}/${e.key}.png`}))):t}},methods:{setLegend(e){this.legend===e.value?this.legend="":this.legend=e.value},showMenu(e){if(!this.legend)return;e.preventDefault();const t=this.$refs.map.getBoundingClientRect();this.contextMenuPosition={x:e.clientX-t.left,y:e.clientY-t.top},this.contextMenuVisible=!0},menuItemClicked(e){if("add"===e){if(!F.Z.isLogin())return this.$message({type:"warning",message:"请先登录"});this.showDialog=!0}this.contextMenuVisible=!1},async getMapList(){const e=sessionStorage.getItem("cj_maps");if(e){var t;const l=JSON.parse(e);this.maps=l,this.map=(null===l||void 0===l||null===(t=l[0])||void 0===t?void 0:t.value)||null}else{var l;const e=await L(),{data:t}=e,a=[];for(let l in t)t[l].indexOf("绝境")>-1&&a.push({label:t[l],value:~~l});sessionStorage.setItem("cj_maps",JSON.stringify(a)),this.maps=a,this.map=(null===a||void 0===a||null===(l=a[0])||void 0===l?void 0:l.value)||null}},getMapImage(e){return`${b.__imgPath}map/maps/map_${e}_0.png`},getPoints(){M().then((e=>{var t;this.points=(null===(t=e.data)||void 0===t?void 0:t.data)||[]}))},addPoint(){const e=(0,$.cloneDeep)(this.pointForm);e.map=this.map,e.point=this.contextMenuPosition,this.btnLoading=!0,I(e).then((()=>{this.$notify({title:"成功",message:"添加成功，等待审核中...",type:"success"}),this.onClose()})).finally((()=>{this.btnLoading=!1}))},onCancel(){this.onClose()},onClose(){this.$refs.pointForm.clearValidate(),this.pointForm={point:{},meta:{type:"path"},desc:"",client:(0,w.o)().client},this.showDialog=!1},onConfirm(){this.$refs.pointForm.validate(((e,t)=>{e?this.addPoint():console.log("error submit!",t)}))}},mounted(){this.getMapList(),this.getPoints()}};const N=(0,W.Z)(U,[["render",v]]);var O=N;const Z={class:"m-cj-extra"},K=(0,a._)("b",null,"技能查询",-1),Q=(0,a._)("b",null,"吃鸡攻略",-1);function A(e,t,l,i,n,s){const o=(0,a.up)("Files"),r=(0,a.up)("el-icon"),u=(0,a.up)("CJSkill"),d=(0,a.up)("el-tab-pane"),p=(0,a.up)("Collection"),c=(0,a.up)("CJStrategy"),m=(0,a.up)("el-tabs");return(0,a.wg)(),(0,a.iD)("div",Z,[(0,a.Wm)(m,{class:"m-tabs m-extra-tabs",modelValue:n.view,"onUpdate:modelValue":t[0]||(t[0]=e=>n.view=e),onTabClick:s.handleClick},{default:(0,a.w5)((()=>["origin"===s.client?((0,a.wg)(),(0,a.j4)(d,{key:0,label:"技能查询",name:"skill"},{label:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Wm)(o)])),_:1}),K])),default:(0,a.w5)((()=>["skill"===n.view?((0,a.wg)(),(0,a.j4)(u,{key:0})):(0,a.kq)("",!0)])),_:1})):(0,a.kq)("",!0),(0,a.Wm)(d,{label:"攻略",name:"strategy"},{label:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Wm)(p)])),_:1}),Q])),default:(0,a.w5)((()=>["strategy"===n.view?((0,a.wg)(),(0,a.j4)(c,{key:0})):(0,a.kq)("",!0)])),_:1})])),_:1},8,["modelValue","onTabClick"])])}const B={class:"m-cj-strategy"},R={key:0,class:"m-strategy-list"};function E(e,t,l,i,n,s){const r=(0,a.up)("ListItem"),u=(0,a.up)("el-alert"),d=(0,a.up)("el-button"),p=(0,a.up)("el-pagination"),c=(0,a.Q2)("loading");return(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",B,[n.list.length?((0,a.wg)(),(0,a.iD)("div",R,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.list,(e=>((0,a.wg)(),(0,a.j4)(r,{key:e.post_id,item:e,order:s.params.order},null,8,["item","order"])))),128))])):((0,a.wg)(),(0,a.j4)(u,{key:1,class:"m-strategy-null",title:"没有找到相关条目",type:"info",center:"","show-icon":""})),(0,a.wy)((0,a.Wm)(d,{class:"m-strategy-more",type:"primary",onClick:s.appendPage,loading:n.loading,icon:"el-icon-arrow-down"},{default:(0,a.w5)((()=>[(0,a.Uk)("加载更多")])),_:1},8,["onClick","loading"]),[[o.F8,s.hasNextPage]]),(0,a.Wm)(p,{class:"m-strategy-pages",background:"",layout:"total, prev, pager, next","hide-on-single-page":!0,total:n.total,"current-page":n.page,onCurrentChange:s.changePage},null,8,["total","current-page","onCurrentChange"])])),[[c,n.loading]])}const X={class:"u-item"},G=["href","target"],ee=["src"],te={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 16",width:"12",height:"16","aria-hidden":"true",fill:"#555",class:(0,r.C_)("u-icon"),"svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"},le=(0,a._)("path",{"fill-rule":"evenodd",d:"M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"},null,-1),ae=[le],ie=["href","target"],ne={key:0,class:"u-marks"},se={class:"u-content u-desc"},oe={key:0,class:"u-metalist u-boss-list"},re=(0,a._)("strong",null,"首领",-1),ue=["onClick"],de={key:1,class:"u-metalist u-mode-list c-jx3fb-mode"},pe=(0,a._)("strong",null,"模式",-1),ce={class:"u-misc"},me=["src","alt"],ye=["href"],he={class:"u-date"},ge={key:0},_e={key:1};function ke(e,t,l,i,n,s){return(0,a.wg)(),(0,a.iD)("div",X,[(0,a._)("a",{class:"u-banner",href:s.postLink(l.item.ID),target:e.target},[((0,a.wg)(),(0,a.iD)("img",{src:s.getBanner(l.item),key:l.item.ID},null,8,ee))],8,G),(0,a._)("h2",{class:(0,r.C_)(["u-post",{isSticky:l.item.sticky}])},[((0,a.wg)(),(0,a.iD)("svg",te,ae)),(0,a._)("a",{class:"u-title",style:(0,r.j5)(s.showHighlight(l.item.color)),href:s.postLink(l.item.ID),target:e.target},(0,r.zw)(l.item.post_title||"无标题"),13,ie),l.item.mark&&l.item.mark.length?((0,a.wg)(),(0,a.iD)("span",ne,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.item.mark,(e=>((0,a.wg)(),(0,a.iD)("i",{class:"u-mark",key:e},(0,r.zw)(s.showMark(e)),1)))),128))])):(0,a.kq)("",!0)],2),(0,a._)("div",se,[l.item.post_meta&&l.item.post_meta.fb_boss?((0,a.wg)(),(0,a.iD)("div",oe,[re,(0,a._)("em",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.format(l.item,"fb_boss"),((e,t)=>((0,a.wg)(),(0,a.iD)("b",{key:t,onClick:t=>s.addTopic(e)},(0,r.zw)(e),9,ue)))),128))])])):(0,a.kq)("",!0),l.item.post_meta&&l.item.post_meta.fb_level?((0,a.wg)(),(0,a.iD)("div",de,[pe,(0,a._)("em",null,(0,r.zw)(s.format(l.item,"fb_level").join("、")),1)])):(0,a.kq)("",!0)]),(0,a._)("div",ce,[(0,a._)("img",{class:"u-author-avatar",src:s.showAvatar(l.item.author_info),alt:s.showNickname(l.item.author_info)},null,8,me),(0,a._)("a",{class:"u-author-name",href:s.authorLink(l.item.post_author),target:"_blank"},(0,r.zw)(s.showNickname(l.item.author_info)),9,ye),(0,a._)("span",he,[(0,a.Uk)(" Updated on "),"update"==l.order?((0,a.wg)(),(0,a.iD)("time",ge,(0,r.zw)(s.dateFormat(l.item.post_modified)),1)):((0,a.wg)(),(0,a.iD)("time",_e,(0,r.zw)(s.dateFormat(l.item.post_date)),1))])])])}var ve=l(17233),we=l(23910),fe=l(26060),xe={name:"ListItem",props:["item","order","caller"],components:{},data:function(){return{target:(0,ve.buildTarget)()}},computed:{client(){var e;return null===(e=this.item)||void 0===e?void 0:e.client},rootLink(){return"std"!==this.client?b.__OriginRoot:b.__Root}},watch:{},methods:{getBanner:function(e){return e.post_banner?(0,ve.showBanner)(e.post_banner):b.__imgPath+"image/fb_map_thumbnail/null.png"},format:function(e,t){var l;let a=null===e||void 0===e||null===(l=e.post_meta)||void 0===l?void 0:l[t];return a&&a.length?a:["-"]},addTopic(e){this.$router.push({query:{topic:e}})},postLink(e){return`${this.rootLink}bps/${e}`},authorLink:ve.authorLink,showHighlight(e){return e?`color:${e};font-weight:600;`:""},showMark:function(e){return we.I[e]||e},showAvatar:function(e){return(0,ve.showAvatar)(null===e||void 0===e?void 0:e.user_avatar)},showNickname:function(e){return(null===e||void 0===e?void 0:e.display_name)||"匿名"},dateFormat:function(e){return(0,fe.s2)(new Date(e))}}};const be=(0,W.Z)(xe,[["render",ke]]);var De=be,Le={name:"CJStrategy",components:{ListItem:De},data(){return{page:1,pages:1,per:10,total:0,loading:!1,list:[]}},computed:{hasNextPage:function(){return this.pages>1&&this.page<this.pages},params(){return{page:this.page,per:this.per}},query(){return{subtype:this.$route.query.subtype,client:(0,w.o)().client,order:"update"}}},watch:{query:{deep:!0,handler:function(){this.page=1,this.load()}}},methods:{load(e=!1){const t={...(0,$.cloneDeep)(this.params),...(0,$.cloneDeep)(this.query)};t.subtype?t.sticky=1:delete t.subtype,this.loading=!0,C(t).then((t=>{var l,a,i,n,s,o,r,u;e?this.list=this.list.concat(null===(s=t.data)||void 0===s||null===(o=s.data)||void 0===o?void 0:o.list):this.list=null===(r=t.data)||void 0===r||null===(u=r.data)||void 0===u?void 0:u.list;this.total=null===(l=t.data)||void 0===l||null===(a=l.data)||void 0===a?void 0:a.total,this.pages=null===(i=t.data)||void 0===i||null===(n=i.data)||void 0===n?void 0:n.pages})).finally((()=>{this.loading=!1}))},changePage(e){this.page=e,this.load()},appendPage(){this.page++,this.load(!0)}},mounted(){this.load()}};const Ce=(0,W.Z)(Le,[["render",E]]);var Ye=Ce;const Me={class:"m-cj-skill"},Ie={class:"m-search"},Se={key:0,class:"m-skill-list"},Ve=(0,a._)("div",{class:"u-skill-item"},[(0,a._)("div",{class:"u-td"},"技能名称"),(0,a._)("div",{class:"u-td"},"品质"),(0,a._)("div",{class:"u-td"},"效果")],-1),je={key:1,class:"u-no-data"};function He(e,t,l,i,n,s){const o=(0,a.up)("el-option"),r=(0,a.up)("el-select"),u=(0,a.up)("el-input"),d=(0,a.up)("SkillItem"),p=(0,a.Q2)("loading");return(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",Me,[(0,a._)("div",Ie,[(0,a.Wm)(r,{modelValue:n.quality,"onUpdate:modelValue":t[0]||(t[0]=e=>n.quality=e)},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.qualities,(e=>((0,a.wg)(),(0,a.j4)(o,{key:e.value,value:e.value,label:e.label},null,8,["value","label"])))),128))])),_:1},8,["modelValue"]),(0,a.Wm)(r,{modelValue:n.skillType,"onUpdate:modelValue":t[1]||(t[1]=e=>n.skillType=e)},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.types,(e=>((0,a.wg)(),(0,a.j4)(o,{key:e.value,value:e.value,label:e.label},null,8,["value","label"])))),128))])),_:1},8,["modelValue"]),(0,a.Wm)(u,{modelValue:n.search,"onUpdate:modelValue":t[2]||(t[2]=e=>n.search=e),placeholder:"请输入 技能名称 查询",clearable:""},null,8,["modelValue"])]),n.list.length?((0,a.wg)(),(0,a.iD)("div",Se,[Ve,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.list,((e,t)=>((0,a.wg)(),(0,a.j4)(d,{source:e,key:e.dwSkillID+t},null,8,["source"])))),128))])):((0,a.wg)(),(0,a.iD)("div",je,"暂无技能"))])),[[p,n.loading]])}const qe={class:"u-skill-item"},Te={class:"u-td"},We={class:"u-skill-icon"},ze=["src"],Pe={key:0,class:"u-item-name"},Je={class:"u-td"},$e={class:"u-td"};function Fe(e,t,l,i,n,s){var u,d;const p=(0,a.up)("jx3-skill"),c=(0,a.up)("el-popover");return(0,a.wg)(),(0,a.iD)("div",qe,[(0,a._)("div",Te,[(0,a.Wm)(c,{class:"u-skill-popover",placement:"right-start",trigger:"hover","visible-arrow":!1,width:350},{reference:(0,a.w5)((()=>[(0,a._)("div",We,[(0,a._)("img",{src:s.iconLink(s.iconId||n.data.IconID,n.client),onClick:t[0]||(t[0]=(0,o.iM)((e=>s.getUrl(n.data.SkillID)),["stop"]))},null,8,ze)])])),default:(0,a.w5)((()=>[(0,a.Wm)(p,{data:n.data},null,8,["data"])])),_:1}),null!==(u=l.source)&&void 0!==u&&null!==(d=u.Skill)&&void 0!==d&&d.Name?((0,a.wg)(),(0,a.iD)("div",Pe,(0,r.zw)(l.source.Skill.Name),1)):(0,a.kq)("",!0)]),(0,a._)("div",Je,(0,r.zw)(l.source.szQualityDesc),1),(0,a._)("div",$e,(0,r.zw)(l.source.szSkillTypeDesc),1)])}const Ue={key:0,class:"w-skill"},Ne={class:"w-skill-wrapper"},Oe=["src","alt"],Ze={class:"w-skill-content"},Ke={class:"w-skill-name"},Qe={class:"w-skill-desc"},Ae={class:"w-skill-meta"};function Be(e,t,l,i,n,s){return l.data?((0,a.wg)(),(0,a.iD)("div",Ue,[(0,a._)("div",Ne,[(0,a._)("img",{class:"w-skill-icon",src:s.iconLink(l.data.IconID||13),alt:l.data.Name},null,8,Oe),(0,a._)("div",Ze,[(0,a._)("span",Ke,(0,r.zw)(l.data.Name),1),(0,a._)("span",Qe,(0,r.zw)(l.data.Desc),1),(0,a._)("span",Ae,"ID : "+(0,r.zw)(l.data.SkillID),1)])])])):(0,a.kq)("",!0)}var Re={name:"SkillInfo",props:["data"],computed:{},watch:{},methods:{iconLink:function(e){return(0,ve.iconLink)(e,"std")}}};const Ee=(0,W.Z)(Re,[["render",Be]]);var Xe=Ee,Ge={name:"SkillItem",props:{source:{type:Object,required:!0}},components:{Jx3Skill:Xe},watch:{source:{immediate:!0,deep:!0,handler(e){this.data=e.Skill}}},computed:{iconId(){var e,t;return~~(null===(e=this.source)||void 0===e||null===(t=e.Skill)||void 0===t?void 0:t.IconID)||0},id(){var e,t;return~~(null===(e=this.source)||void 0===e||null===(t=e.Skill)||void 0===t?void 0:t.SkillID)||0}},data(){return{client:"origin",data:{}}},methods:{iconLink:ve.iconLink,getUrl(e){const t=location.origin+"/",l=t+`app/database/?type=skill&client=${this.client}&query=${e}`;window.open(l,"_blank")}}};const et=(0,W.Z)(Ge,[["render",Fe]]);var tt=et,lt={name:"CJSkill",components:{SkillItem:tt},data(){return{loading:!1,originList:[],list:[],allList:[],qualities:[],types:[],skillType:0,quality:0,search:""}},computed:{client(){return"origin"},params(){return{skillType:this.skillType,quality:this.quality,search:this.search}}},watch:{params:{deep:!0,handler(){this.quality||this.skillType||this.search?this.list=this.originList.filter((e=>(!this.quality||e.nQuality===this.quality)&&(!this.skillType||e.nSkillType===this.skillType)&&(!this.search||e.Skill.Name.indexOf(this.search)>-1))):this.list=this.originList}}},methods:{getTypes(){const e=this.allList,t=Array.from(new Set(e.map((e=>e.nSkillType)))),l=Array.from(new Set(e.map((e=>e.nQuality))));this.types=t.map((t=>{var l;return{label:null===(l=e.find((e=>e.nSkillType===t)))||void 0===l?void 0:l.szSkillTypeDesc,value:t}})),this.qualities=l.map((t=>{var l;return{label:null===(l=e.find((e=>e.nQuality===t)))||void 0===l?void 0:l.szQualityDesc,value:t}}))},async load(){this.loading=!0;const e=sessionStorage.getItem(`deserts_${this.client}`);e?(this.allList=JSON.parse(e),this.getTypes(),this.list=this.allList.filter((e=>e.dwSkillID)),this.loading=!1):await Y().then((e=>{this.allList=e.data.data,this.getTypes(),this.list=this.allList.filter((e=>e.dwSkillID)),sessionStorage.setItem(`deserts_${this.client}`,JSON.stringify(this.allList))})).finally((()=>{this.loading=!1})),this.originList=this.list}},mounted(){this.load()}};const at=(0,W.Z)(lt,[["render",He]]);var it=at,nt={name:"CJExtra",components:{CJStrategy:Ye,CJSkill:it},data(){return{view:"strategy"}},computed:{client(){return(0,w.o)().client}},methods:{handleClick(){}},mounted(){"origin"===this.client&&(this.view="skill")}};const st=(0,W.Z)(nt,[["render",A]]);var ot=st,rt={name:"CJ",components:{ListLayout:s.Z,CJIndex:O,CJExtra:ot},data:function(){return{}},computed:{},methods:{},mounted(){}};const ut=(0,W.Z)(rt,[["render",n]]);var dt=ut},93565:function(e,t,l){e.exports=l.p+"img/goods.fc3cb1fa.svg"},83723:function(e,t,l){e.exports=l.p+"img/path.a96a5ae9.svg"}}]);
//# sourceMappingURL=779.273f0cbe.js.map