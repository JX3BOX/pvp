"use strict";(self["webpackChunkpvp"]=self["webpackChunkpvp"]||[]).push([[126],{85117:function(t,e,i){var n=i(66330),a=TypeError;t.exports=function(t,e){if(!delete t[e])throw a("Cannot delete property "+n(e)+" of "+n(t))}},30541:function(t,e,i){var n=i(82109),a=i(47908),l=i(26244),s=i(83658),o=i(85117),r=i(7207),u=1!==[].unshift(0),c=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(t){return t instanceof TypeError}},d=u||!c();n({target:"Array",proto:!0,arity:1,forced:d},{unshift:function(t){var e=a(this),i=l(e),n=arguments.length;if(n){r(i+n);var u=i;while(u--){var c=u+n;u in e?e[c]=e[u]:o(e,c)}for(var d=0;d<n;d++)e[d]=arguments[d]}return s(e,i+n)}})},42325:function(t,e,i){i.d(e,{H:function(){return s},m:function(){return l}});var n=i(27484),a=i.n(n);const l=function(t){return a()(t).format("YYYY-MM-DD hh:mm:ss")};function s(t){if("[object Object]"===Object.prototype.toString.call(t)){for(const e in t)[void 0,null,""].includes(t[e])&&delete t[e];return t}return t}},34126:function(t,e,i){i.r(e),i.d(e,{default:function(){return Pn}});var n=i(66252);const a={class:"m-cj-content"};function l(t,e,i,l,s,o){const r=(0,n.up)("CJIndex"),u=(0,n.up)("CJExtra"),c=(0,n.up)("DarkLayout");return(0,n.wg)(),(0,n.j4)(c,null,{default:(0,n.w5)((()=>[(0,n._)("div",a,[(0,n.Wm)(r),(0,n.Wm)(u)])])),_:1})}const s={class:"p-dark-layout"},o={class:"u-breadcrumb-title"},r={class:"m-main"};function u(t,e,i,a,l,u){const c=(0,n.up)("Header"),d=(0,n.up)("ArrowRight"),p=(0,n.up)("el-icon"),m=(0,n.up)("Breadcrumb"),g=(0,n.up)("CJNav"),h=(0,n.up)("LeftSidebar"),v=(0,n.up)("Footer"),y=(0,n.up)("Main");return(0,n.wg)(),(0,n.iD)("div",s,[(0,n.Wm)(c),(0,n.Wm)(m,{name:"竞技专栏",slug:"pvp",root:"/pvp",publishEnable:!1,adminEnable:!1,feedbackEnable:!0,crumbEnable:!1,class:"m-dark-breadcrumb"},{default:(0,n.w5)((()=>[(0,n._)("span",o,[(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Wm)(d)])),_:1}),(0,n.Uk)(" 绝境战场")])])),_:1}),(0,n.Wm)(h,{class:"m-dark-sidebar",open:t.isOpen},{default:(0,n.w5)((()=>[(0,n.Wm)(g,{class:"m-nav"})])),_:1},8,["open"]),(0,n.Wm)(y,{class:"m-dark-main",withoutLeft:!t.isOpen},{default:(0,n.w5)((()=>[(0,n._)("div",r,[(0,n.WI)(t.$slots,"default")]),(0,n.Wm)(v)])),_:3},8,["withoutLeft"])])}var c=i(3577);const d={class:"m-cj-nav"},p={class:"m-nav-top"},m={class:"m-nav-bottom"},g={class:"m-nav-tabs"},h=["onClick"],v={class:"m-tab-content"};function y(t,e,i,a,l,s){const o=(0,n.up)("CJXf"),r=(0,n.up)("el-icon");return(0,n.wg)(),(0,n.iD)("div",d,[(0,n._)("div",p,[(0,n.Wm)(o)]),(0,n._)("div",m,[(0,n._)("div",g,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.tabs,(t=>((0,n.wg)(),(0,n.iD)("div",{class:(0,c.C_)(["u-tab",l.activeTab===t.value&&"is-active"]),key:t.value,onClick:e=>s.setTab(t.value)},[(0,n.Wm)(r,null,{default:(0,n.w5)((()=>[((0,n.wg)(),(0,n.j4)((0,n.LL)(t.icon)))])),_:2},1024),(0,n._)("b",null,(0,c.zw)(t.label),1)],10,h)))),128))]),(0,n._)("div",v,[((0,n.wg)(),(0,n.j4)((0,n.LL)(s.currentComponent)))])])])}var k=i(45522);const _={class:"m-cj-xf"},f={class:"m-xf-select"},w=["src","alt"],b=(0,n._)("div",{class:"u-xf-option"},[(0,n._)("img",{class:"u-pic",src:k,alt:"全部心法"}),(0,n._)("span",{class:"u-txt"},"全部心法")],-1),x={class:"u-xf-option"},C=["src","alt"],P={class:"u-txt"},D={key:0,class:"m-xf-buff"},M={class:"u-title"},I=(0,n._)("div",{class:"u-buff"},"+1",-1);function W(t,e,i,a,l,s){const o=(0,n.up)("el-option"),r=(0,n.up)("el-select"),u=(0,n.up)("ZoomIn"),d=(0,n.up)("el-icon");return(0,n.wg)(),(0,n.iD)("div",_,[(0,n._)("div",f,[(0,n._)("div",{class:(0,c.C_)(["u-logo","门派心法"===s.currentLogo.alt&&"is-logo"])},[(0,n._)("img",{src:s.currentLogo.src,alt:s.currentLogo.alt},null,8,w)],2),(0,n.Wm)(r,{class:"u-select",modelValue:l.subtype,"onUpdate:modelValue":e[0]||(e[0]=t=>l.subtype=t),filterable:"",onChange:s.toRoute},{default:(0,n.w5)((()=>[(0,n.Wm)(o,{label:"全部心法",value:""},{default:(0,n.w5)((()=>[b])),_:1}),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.xfmaps,((t,e)=>((0,n.wg)(),(0,n.j4)(o,{key:e,value:t.name},{default:(0,n.w5)((()=>[(0,n._)("div",x,[(0,n._)("img",{class:"u-pic",src:s.showMountIcon(t.id),alt:t.name},null,8,C),(0,n._)("span",P,(0,c.zw)(t.name),1)])])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue","onChange"])]),"std"===s.client?((0,n.wg)(),(0,n.iD)("div",D,[(0,n._)("h4",M,[(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u)])),_:1}),(0,n.Uk)("心法加成 ")]),I])):(0,n.kq)("",!0)])}i(57658);var L=i(91254),S=i(17233),V=i(24239);const z=(0,V.o)();var j={name:"CJXf",data(){return{subtype:""}},computed:{client(){return z.client},tab:function(){return this.$route.query.tab},xfmaps(){return delete L["山居剑意"],Object.values(L).filter((t=>t.client.includes(this.client)))},currentLogo(){const t=""!==this.subtype?L[this.subtype].id:null;return{src:null!==t?this.showMountIcon(t):i(45522),alt:null!==t?L[this.subtype].name:"门派心法"}}},watch:{"$route.query":{immediate:!0,deep:!0,handler(t){const{subtype:e}=t;this.subtype=e||""}}},methods:{showMountIcon:S.showMountIcon,toRoute(t){this.$router.push({query:{subtype:t,tab:this.tab}})}}},T=i(83744);const q=(0,T.Z)(j,[["render",W]]);var R=q;const U={class:"m-cj-skill"},$={class:"m-search"},J={key:0,class:"m-skill-list"},N=(0,n._)("div",{class:"u-skill-item"},[(0,n._)("div",{class:"u-td"},"技能名称"),(0,n._)("div",{class:"u-td"},"效果")],-1),E={key:1,class:"u-no-data"};function Z(t,e,i,a,l,s){const o=(0,n.up)("el-input"),r=(0,n.up)("el-option"),u=(0,n.up)("el-select"),d=(0,n.up)("SkillItem");return(0,n.wg)(),(0,n.iD)("div",U,[(0,n._)("div",$,[(0,n.Wm)(o,{class:"u-input",modelValue:l.search,"onUpdate:modelValue":e[0]||(e[0]=t=>l.search=t),placeholder:"请输入 技能名称 查询",clearable:""},null,8,["modelValue"]),(0,n.Wm)(u,{class:"u-select",modelValue:l.quality,"onUpdate:modelValue":e[1]||(e[1]=t=>l.quality=t)},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.qualities,(t=>((0,n.wg)(),(0,n.j4)(r,{key:t.value,value:t.value,label:t.label},{default:(0,n.w5)((()=>[(0,n._)("div",{class:(0,c.C_)(["u-skill-select-label",`is-quality-bg-${t.value}`])},(0,c.zw)(t.label),3)])),_:2},1032,["value","label"])))),128))])),_:1},8,["modelValue"]),(0,n.Wm)(u,{class:"u-select",modelValue:l.skillType,"onUpdate:modelValue":e[2]||(e[2]=t=>l.skillType=t)},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.types,(t=>((0,n.wg)(),(0,n.j4)(r,{key:t.value,value:t.value,label:t.label},null,8,["value","label"])))),128))])),_:1},8,["modelValue"])]),l.list.length?((0,n.wg)(),(0,n.iD)("div",J,[N,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.list,((t,e)=>((0,n.wg)(),(0,n.j4)(d,{source:t,key:t.dwSkillID+e},null,8,["source"])))),128))])):((0,n.wg)(),(0,n.iD)("div",E,"暂无技能"))])}var O=i(18371),F=i(89847),H=i(6154);const{__imgPath:Y}=F;function K(){return H.Z.get(Y+"map/data/map_index.json")}function A(t){let e={type:"bps",tag:"PVP",topic:"吃鸡"};return t&&(e=Object.assign(e,t)),(0,O.nj)().get("/api/cms/posts",{params:e})}function X(t){return(0,O.qT)().get("/desert/list",{params:t})}function B(t){return(0,O.nj)().get("/api/cms/pvp/desert/point",{params:t})}function Q(t){return(0,O.nj)().get("/api/cms/pvp/desert/point/my",{params:t})}function G(t){return(0,O.nj)().get("/api/cms/pvp/desert/point/unaudited",{params:t})}function tt(t){return(0,O.nj)().post("/api/cms/pvp/desert/point",t)}function et(t){return(0,O.nj)().delete(`/api/cms/pvp/desert/point/${t}`)}function it(t,e){return(0,O.nj)().put(`/api/cms/pvp/desert/point/${e}`,t)}function nt(t,e=1){return(0,O.nj)().put(`/api/cms/pvp/desert/point/${t}/admin`,{status:e})}var at=i(49963);const lt={class:"u-skill-item"},st={class:"u-td"},ot={class:"u-skill-icon"},rt=["src"],ut={class:"u-td"};function ct(t,e,i,a,l,s){var o,r,u;const d=(0,n.up)("jx3-skill"),p=(0,n.up)("el-popover");return(0,n.wg)(),(0,n.iD)("div",lt,[(0,n._)("div",st,[(0,n.Wm)(p,{class:"u-skill-popover",placement:"right-start",trigger:"hover","visible-arrow":!1,width:350,effect:"dark"},{reference:(0,n.w5)((()=>[(0,n._)("div",ot,[(0,n._)("img",{src:s.iconLink(s.iconId||l.data.IconID,l.client),onClick:e[0]||(e[0]=(0,at.iM)((t=>s.getUrl(l.data.SkillID)),["stop"]))},null,8,rt)])])),default:(0,n.w5)((()=>[(0,n.Wm)(d,{data:l.data},null,8,["data"])])),_:1}),null!==(o=i.source)&&void 0!==o&&null!==(r=o.Skill)&&void 0!==r&&r.Name?((0,n.wg)(),(0,n.iD)("div",{key:0,class:(0,c.C_)(["u-item-name",`isQuality-${null===(u=i.source)||void 0===u?void 0:u.nQuality}`])},(0,c.zw)(i.source.Skill.Name),3)):(0,n.kq)("",!0)]),(0,n._)("div",ut,(0,c.zw)(i.source.szSkillTypeDesc),1)])}const dt={key:0,class:"w-skill"},pt={class:"w-skill-wrapper"},mt=["src","alt"],gt={class:"w-skill-content"},ht={class:"w-skill-name"},vt={class:"w-skill-desc"},yt={class:"w-skill-meta"};function kt(t,e,i,a,l,s){return i.data?((0,n.wg)(),(0,n.iD)("div",dt,[(0,n._)("div",pt,[(0,n._)("img",{class:"w-skill-icon",src:s.iconLink(i.data.IconID||13),alt:i.data.Name},null,8,mt),(0,n._)("div",gt,[(0,n._)("span",ht,(0,c.zw)(i.data.Name),1),(0,n._)("span",vt,(0,c.zw)(i.data.Desc),1),(0,n._)("span",yt,"ID : "+(0,c.zw)(i.data.SkillID),1)])])])):(0,n.kq)("",!0)}var _t={name:"SkillInfo",props:["data"],computed:{},watch:{},methods:{iconLink:function(t){return(0,S.iconLink)(t,"std")}}};const ft=(0,T.Z)(_t,[["render",kt]]);var wt=ft;const{__Root:bt}=i(89847);var xt={name:"SkillItem",props:{source:{type:Object,required:!0}},components:{Jx3Skill:wt},watch:{source:{immediate:!0,deep:!0,handler(t){this.data=t.Skill}}},computed:{iconId(){var t,e;return~~(null===(t=this.source)||void 0===t||null===(e=t.Skill)||void 0===e?void 0:e.IconID)||0},id(){var t,e;return~~(null===(t=this.source)||void 0===t||null===(e=t.Skill)||void 0===e?void 0:e.SkillID)||0}},data(){return{client:"origin",data:{}}},methods:{iconLink:S.iconLink,getUrl(t){const e=location.origin+"/",i=e+`app/database/?type=skill&client=${this.client}&query=${t}`;window.open(i,"_blank")}}};const Ct=(0,T.Z)(xt,[["render",ct]]);var Pt=Ct,Dt={name:"CJSkill",components:{SkillItem:Pt},data(){return{loading:!1,originList:[],list:[],allList:[],qualities:[],types:[],skillType:0,quality:0,search:""}},computed:{client(){return"origin"},params(){return{skillType:this.skillType,quality:this.quality,search:this.search}}},watch:{params:{deep:!0,handler(){this.quality||this.skillType||this.search?this.list=this.originList.filter((t=>(!this.quality||t.nQuality===this.quality)&&(!this.skillType||t.nSkillType===this.skillType)&&(!this.search||t.Skill.Name.indexOf(this.search)>-1))):this.list=this.originList}}},methods:{getTypes(){const t=this.allList,e=Array.from(new Set(t.map((t=>t.nSkillType)))),i=Array.from(new Set(t.map((t=>t.nQuality))));this.types=e.map((e=>{var i;return{label:null===(i=t.find((t=>t.nSkillType===e)))||void 0===i?void 0:i.szSkillTypeDesc,value:e}})),this.qualities=i.map((e=>{var i;return{label:null===(i=t.find((t=>t.nQuality===e)))||void 0===i?void 0:i.szQualityDesc,value:e}}))},async load(){this.loading=!0;const t=sessionStorage.getItem(`deserts_${this.client}`);t?(this.allList=JSON.parse(t),this.getTypes(),this.list=this.allList.filter((t=>t.dwSkillID)),this.loading=!1):await X().then((t=>{this.allList=t.data.data,this.getTypes(),this.list=this.allList.filter((t=>t.dwSkillID)),sessionStorage.setItem(`deserts_${this.client}`,JSON.stringify(this.allList))})).finally((()=>{this.loading=!1})),this.originList=this.list}},mounted(){this.load()}};const Mt=(0,T.Z)(Dt,[["render",Z]]);var It=Mt;const Wt={class:"m-cj-equipment"};function Lt(t,e,i,a,l,s){return(0,n.wg)(),(0,n.iD)("div",Wt,"装备对比")}var St={name:"CJEquipment"};const Vt=(0,T.Z)(St,[["render",Lt]]);var zt=Vt;const jt={class:"m-cj-item"};function Tt(t,e,i,a,l,s){return(0,n.wg)(),(0,n.iD)("div",jt,"道具介绍")}var qt={name:"CJItem"};const Rt=(0,T.Z)(qt,[["render",Tt]]);var Ut=Rt;const $t=(0,V.o)();var Jt={name:"CJNav",components:{CJXf:R,CJSkill:It,CJEquipment:zt,CJItem:Ut},data(){return{activeTab:"equipment",originTabs:[{label:"装备对比",value:"equipment",client:["std","origin"],icon:"scale-to-original",component:"CJEquipment"},{label:"技能查询",value:"skill",client:["std","origin"],icon:"Search",component:"CJSkill"},{label:"道具介绍",value:"item",client:["std","origin"],icon:"Money",component:"CJItem"}]}},computed:{client(){return $t.client},tabs(){return this.originTabs.filter((t=>t.client.includes(this.client)))},currentComponent(){var t;return(null===(t=this.tabs.find((t=>t.value===this.activeTab)))||void 0===t?void 0:t.component)||""}},methods:{setTab(t){this.activeTab=t}}};const Nt=(0,T.Z)(Jt,[["render",y]]);var Et=Nt,Zt=i(49e3);const Ot=(0,V.o)();var Ft={name:"App",data:function(){return{isOpen:!0}},components:{CJNav:Et},computed:{client(){return(0,V.o)().client},isEditor(){return Zt.Z.isEditor()}},methods:{toggleReview(){Ot.reviewVisible=!Ot.reviewVisible}},mounted(){window.innerWidth<1024&&(this.isOpen=!1),document.body.style.backgroundColor="#1d2530"}};const Ht=(0,T.Z)(Ft,[["render",u]]);var Yt=Ht;const Kt={class:"m-map-op"},At={class:"m-select"},Xt={class:"m-legends"},Bt=(0,n._)("label",{class:"u-label"},"全部",-1),Qt=[Bt],Gt=["onClick"],te=["src","alt"],ee={class:"u-op"},ie={class:"m-map-index"},ne=["src"],ae={key:0},le=(0,n._)("span",null,"新增",-1),se={key:1},oe=(0,n._)("span",null,"编辑",-1),re=(0,n._)("span",null,"评论",-1),ue=(0,n._)("span",{class:"u-success"},"通过",-1),ce=(0,n._)("span",{class:"u-danger"},"拒绝",-1),de=(0,n._)("span",{class:"u-danger"},"删除",-1),pe=(0,n._)("span",{class:"u-danger"},"弃用",-1),me=["src"],ge={class:"m-points"},he=["src","alt","custom-data","onClick"],ve={class:"u-header"},ye={class:"u-info"},ke=["src","alt"],_e={class:"u-content"},fe={key:0,class:"u-footer"},we={key:1,class:"u-footer u-footer-info"},be={class:"u-user"},xe=["src","alt"],Ce=["href"],Pe={class:"u-time"},De=["src","alt","custom-data","onClick"],Me={key:2,class:"m-paths"},Ie=["src"],We={class:"m-footer"};function Le(t,e,i,a,l,s){const o=(0,n.up)("el-option"),r=(0,n.up)("el-select"),u=(0,n.up)("el-tooltip"),d=(0,n.up)("el-checkbox"),p=(0,n.up)("CirclePlus"),m=(0,n.up)("el-icon"),g=(0,n.up)("Edit"),h=(0,n.up)("ChatDotRound"),v=(0,n.up)("CircleCheck"),y=(0,n.up)("CircleClose"),k=(0,n.up)("Delete"),_=(0,n.up)("Remove"),f=(0,n.up)("el-tag"),w=(0,n.up)("el-button"),b=(0,n.up)("el-popover"),x=(0,n.up)("el-form-item"),C=(0,n.up)("el-input"),P=(0,n.up)("el-form"),D=(0,n.up)("el-dialog"),M=(0,n.up)("review-point"),I=(0,n.up)("PointComment"),W=(0,n.Q2)("loading");return(0,n.wy)(((0,n.wg)(),(0,n.iD)("div",{class:"m-map-wrap",onClick:e[19]||(e[19]=(...t)=>s.cancelRightMenu&&s.cancelRightMenu(...t))},[(0,n._)("div",Kt,[(0,n._)("div",At,[(0,n.Wm)(r,{style:{width:"150px"},modelValue:l.map,"onUpdate:modelValue":e[0]||(e[0]=t=>l.map=t),onChange:s.mapChange},{prefix:(0,n.w5)((()=>[(0,n.Uk)("地图")])),default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.maps,(t=>((0,n.wg)(),(0,n.j4)(o,{key:t.value,label:t.label,value:t.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])]),(0,n._)("div",Xt,[(0,n._)("div",{class:(0,c.C_)(["u-legend",!this.legend&&"is-active"]),onClick:e[1]||(e[1]=t=>l.legend="")},Qt,2),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.legends,(t=>((0,n.wg)(),(0,n.iD)("div",{class:(0,c.C_)(["u-legend",t.value===this.legend&&"is-active"]),key:t.value,onClick:e=>s.setLegend(t)},[(0,n.Wm)(u,{effect:"dark",content:t.label,placement:"top"},{default:(0,n.w5)((()=>[(0,n._)("img",{class:"u-legend__img",src:t.src,"svg-inline":"",alt:t.label},null,8,te)])),_:2},1032,["content"])],10,Gt)))),128))]),(0,n._)("div",ee,[(0,n.Wm)(d,{class:"u-mode",modelValue:l.isEditMode,"onUpdate:modelValue":e[2]||(e[2]=t=>l.isEditMode=t),disabled:!s.isLogin,border:"",label:"编辑模式"},null,8,["modelValue","disabled"])])]),(0,n._)("div",ie,[l.map?((0,n.wg)(),(0,n.iD)("div",{key:0,ref:"map",class:(0,c.C_)(["m-map",l.isEditMode&&"is-point"]),onContextmenu:e[13]||(e[13]=(0,at.iM)(((...t)=>s.showMenu&&s.showMenu(...t)),["prevent"]))},[(0,n._)("img",{class:"u-map",src:s.getMapImage(l.map)},null,8,ne),l.pointMenuVisible||l.contextMenuVisible?((0,n.wg)(),(0,n.iD)("div",{key:0,class:"u-context-menu",ref:"contextMenu",style:(0,c.j5)({top:l.contextMenuPosition.y+"px",left:l.contextMenuPosition.x+"px"})},[l.contextMenuVisible?((0,n.wg)(),(0,n.iD)("ul",ae,[(0,n._)("li",{onClick:e[3]||(e[3]=t=>s.menuItemClicked("add"))},[(0,n.Wm)(m,{size:"16"},{default:(0,n.w5)((()=>[(0,n.Wm)(p)])),_:1}),le])])):(0,n.kq)("",!0),l.pointMenuVisible?((0,n.wg)(),(0,n.iD)("ul",se,[l.currentRightClickPoint.id&&l.currentRightClickPoint.belongToMe?((0,n.wg)(),(0,n.iD)("li",{key:0,onClick:e[4]||(e[4]=t=>s.toEdit(null))},[(0,n.Wm)(m,{size:"16"},{default:(0,n.w5)((()=>[(0,n.Wm)(g)])),_:1}),oe])):(0,n.kq)("",!0),l.currentRightClickPoint.id&&1===l.currentRightClickPoint.status?((0,n.wg)(),(0,n.iD)("li",{key:1,onClick:e[5]||(e[5]=t=>s.toOpenComment(null))},[(0,n.Wm)(m,{size:"16"},{default:(0,n.w5)((()=>[(0,n.Wm)(h)])),_:1}),re])):(0,n.kq)("",!0),s.isEditor&&l.currentRightClickPoint.id&&1!==l.currentRightClickPoint.status?((0,n.wg)(),(0,n.iD)("li",{key:2,onClick:e[6]||(e[6]=t=>s.toReview(1))},[(0,n.Wm)(m,{size:"16"},{default:(0,n.w5)((()=>[(0,n.Wm)(v)])),_:1}),ue])):(0,n.kq)("",!0),s.isEditor&&l.currentRightClickPoint.id&&0===l.currentRightClickPoint.status?((0,n.wg)(),(0,n.iD)("li",{key:3,onClick:e[7]||(e[7]=t=>s.toReview(2))},[(0,n.Wm)(m,{size:"16"},{default:(0,n.w5)((()=>[(0,n.Wm)(y)])),_:1}),ce])):(0,n.kq)("",!0),l.currentRightClickPoint.id&&l.currentRightClickPoint.belongToMe?((0,n.wg)(),(0,n.iD)("li",{key:4,onClick:e[8]||(e[8]=t=>s.toDel(l.currentRightClickPoint.id))},[(0,n.Wm)(m,{size:"16"},{default:(0,n.w5)((()=>[(0,n.Wm)(k)])),_:1}),de])):(0,n.kq)("",!0),s.isEditor&&l.currentRightClickPoint.id&&1===l.currentRightClickPoint.status?((0,n.wg)(),(0,n.iD)("li",{key:5,onClick:e[9]||(e[9]=t=>s.toReview(0))},[(0,n.Wm)(m,{size:"16"},{default:(0,n.w5)((()=>[(0,n.Wm)(_)])),_:1}),pe])):(0,n.kq)("",!0)])):(0,n.kq)("",!0)],4)):(0,n.kq)("",!0),!l.pointForm.id&&l.legend&&(!l.pointMenuVisible&&l.contextMenuVisible||l.showDialog)?((0,n.wg)(),(0,n.iD)("img",{key:1,class:"u-point__0",src:s.getPointInfo(l.legend),style:(0,c.j5)({top:l.contextMenuPositionSave.y-l.legendSize+"px",left:l.contextMenuPositionSave.x-l.legendSize/2+"px"})},null,12,me)):(0,n.kq)("",!0),(0,n._)("div",ge,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.showPoints,(t=>((0,n.wg)(),(0,n.iD)("div",{class:(0,c.C_)(["u-point",[t.belongToMe?"is-my-point":"",t.isMark?"is-mark":""]]),key:t.id,style:(0,c.j5)({width:l.legendSize+"px",height:l.legendSize+"px",top:t.point.y-l.legendSize+"px",left:t.point.x-l.legendSize/2+"px"})},[t.id===l.visiblePopId?((0,n.wg)(),(0,n.j4)(b,{key:0,placement:"top",width:210,trigger:"manual",content:t.desc,visible:s.visiblePop,"onUpdate:visible":e[11]||(e[11]=t=>s.visiblePop=t),"popper-class":"u-point-pop",effect:"dark"},{reference:(0,n.w5)((()=>[(0,n._)("img",{class:"u-point__img",style:(0,c.j5)({width:l.legendSize+"px",height:l.legendSize+"px"}),src:t.pointImg,alt:t.pointName,"custom-data":JSON.stringify({id:t.id,status:t.status,belongToMe:t.belongToMe}),onClick:e=>s.handlerPop(t.id),onContextmenu:e[10]||(e[10]=(0,at.iM)(((...t)=>s.showMenu&&s.showMenu(...t)),["prevent","stop"]))},null,44,he)])),default:(0,n.w5)((()=>[(0,n._)("div",ve,[(0,n._)("div",ye,[(0,n._)("img",{src:t.pointImg,alt:t.pointName},null,8,ke),(0,n._)("span",{class:(0,c.C_)(["u-title",`u-legend__${t.meta.type}`])},(0,c.zw)(t.pointName),3)]),t.belongToMe?((0,n.wg)(),(0,n.j4)(f,{key:0,size:"small",effect:"dark",type:1===t.status?"success":2===t.status?"danger":""},{default:(0,n.w5)((()=>[(0,n.Uk)((0,c.zw)(l.statusMap[t.status]),1)])),_:2},1032,["type"])):(0,n.kq)("",!0)]),(0,n._)("div",_e,(0,c.zw)(t.desc),1),t.belongToMe?((0,n.wg)(),(0,n.iD)("div",fe,[(0,n.Wm)(w,{size:"small",type:"primary",onClick:e=>s.toEdit(t)},{default:(0,n.w5)((()=>[(0,n.Uk)("编辑")])),_:2},1032,["onClick"]),(0,n.Wm)(w,{size:"small",type:"danger",onClick:e=>s.toDel(t.id)},{default:(0,n.w5)((()=>[(0,n.Uk)("删除")])),_:2},1032,["onClick"]),1===t.status?((0,n.wg)(),(0,n.j4)(w,{key:0,size:"small",plain:"",icon:"ChatDotRound",onClick:e=>s.toOpenComment(t)},{default:(0,n.w5)((()=>[(0,n.Uk)("评论")])),_:2},1032,["onClick"])):(0,n.kq)("",!0)])):((0,n.wg)(),(0,n.iD)("div",we,[(0,n._)("div",be,[(0,n._)("img",{class:"u-avatar",src:t.avatar,alt:t.name},null,8,xe),(0,n._)("a",{href:s.authorLink(t.post_author),target:"_blank"},(0,c.zw)(t.name),9,Ce)]),(0,n._)("div",Pe,(0,c.zw)(s.formatTime(t.updated_at)),1)]))])),_:2},1032,["content","visible"])):((0,n.wg)(),(0,n.iD)("img",{key:1,class:"u-point__img",style:(0,c.j5)({width:l.legendSize+"px",height:l.legendSize+"px"}),src:t.pointImg,alt:t.pointName,"custom-data":JSON.stringify({id:t.id,status:t.status,belongToMe:t.belongToMe}),onClick:e=>s.handlerPop(t.id),onContextmenu:e[12]||(e[12]=(0,at.iM)(((...t)=>s.showMenu&&s.showMenu(...t)),["prevent","stop"]))},null,44,De))],6)))),128))]),l.map&&s.paths.length?((0,n.wg)(),(0,n.iD)("div",Me,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.paths,(t=>((0,n.wg)(),(0,n.iD)("img",{class:(0,c.C_)(["u-path",`u-path__${t.key}`]),style:(0,c.j5)({left:t.x+70+"px",top:t.y+40+"px"}),key:t.key,src:t.url},null,14,Ie)))),128))])):(0,n.kq)("",!0)],34)):(0,n.kq)("",!0),l.showDialog?((0,n.wg)(),(0,n.j4)(D,{key:1,modelValue:l.showDialog,"onUpdate:modelValue":e[16]||(e[16]=t=>l.showDialog=t),title:s.dialogTitle,"append-to-body":"",width:"560",class:"m-desert-point-pop"},{footer:(0,n.w5)((()=>[(0,n._)("div",We,[(0,n.Wm)(w,{onClick:s.onCancel},{default:(0,n.w5)((()=>[(0,n.Uk)("取消")])),_:1},8,["onClick"]),(0,n.Wm)(w,{type:"primary",loading:l.btnLoading,onClick:s.onConfirm},{default:(0,n.w5)((()=>[(0,n.Uk)("保存")])),_:1},8,["loading","onClick"])])])),default:(0,n.w5)((()=>[(0,n.Wm)(P,{ref:"pointForm",class:"m-desert-form",model:l.pointForm,rules:l.rules,"label-position":"right","label-width":"60"},{default:(0,n.w5)((()=>[(0,n.Wm)(x,{label:"类型",prop:"type"},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{modelValue:l.pointForm.type,"onUpdate:modelValue":e[14]||(e[14]=t=>l.pointForm.type=t),style:{width:"100%"},onChange:s.legendChange},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.legends,(t=>((0,n.wg)(),(0,n.j4)(o,{key:t.value,value:t.value,label:t.label},null,8,["value","label"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1}),(0,n.Wm)(x,{label:"短评",prop:"desc"},{default:(0,n.w5)((()=>[(0,n.Wm)(C,{type:"textarea",modelValue:l.pointForm.desc,"onUpdate:modelValue":e[15]||(e[15]=t=>l.pointForm.desc=t),rows:4,maxlength:"50","show-word-limit":""},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])):(0,n.kq)("",!0),l.map?((0,n.wg)(),(0,n.j4)(M,{key:2,visible:s.reviewVisible,"onUpdate:visible":e[17]||(e[17]=t=>s.reviewVisible=t),map:l.map,onInit:s.initData,onMark:s.toMark},null,8,["visible","map","onInit","onMark"])):(0,n.kq)("",!0),l.commentVisible&&l.commentPoint.id?((0,n.wg)(),(0,n.j4)(I,{key:3,point:l.commentPoint,visible:l.commentVisible,"onUpdate:visible":e[18]||(e[18]=t=>l.commentVisible=t)},null,8,["point","visible"])):(0,n.kq)("",!0)])])),[[W,l.loading]])}i(30541);var Se=i(2262);const Ve={class:"m-review-points"},ze={class:"u-header"},je={class:"u-title"},Te=["src","alt"],qe={class:"u-op"},Re={class:"u-content"},Ue={class:"u-user"},$e=["src","alt"],Je=["href"],Ne={class:"u-time"},Ee={class:"m-footer"};function Ze(t,e,i,a,l,s){const o=(0,n.up)("el-tag"),r=(0,n.up)("el-button"),u=(0,n.up)("el-popconfirm"),d=(0,n.up)("map-location"),p=(0,n.up)("el-icon"),m=(0,n.up)("el-pagination"),g=(0,n.up)("el-drawer");return(0,n.wg)(),(0,n.j4)(g,{title:"标点审核",modelValue:s.drawer,"onUpdate:modelValue":e[1]||(e[1]=t=>s.drawer=t),"append-to-body":"","destroy-on-close":"","modal-class":"m-review-drawer"},{footer:(0,n.w5)((()=>[(0,n._)("div",Ee,[(0,n.Wm)(r,{onClick:s.onClose},{default:(0,n.w5)((()=>[(0,n.Uk)("取消")])),_:1},8,["onClick"])])])),default:(0,n.w5)((()=>[(0,n._)("div",Ve,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.list,(t=>((0,n.wg)(),(0,n.iD)("div",{class:"u-point-item",key:t.id},[(0,n._)("div",ze,[(0,n._)("div",je,[(0,n._)("img",{src:t.pointImg,alt:t.pointName},null,8,Te),(0,n._)("span",null,(0,c.zw)(t.pointName),1),(0,n.Wm)(o,{size:"small"},{default:(0,n.w5)((()=>[(0,n.Uk)("待审核")])),_:1})]),(0,n._)("div",qe,[(0,n.Wm)(r,{size:"small",icon:"MapLocation",onClick:e=>s.toMark(t)},{default:(0,n.w5)((()=>[(0,n.Uk)("标记")])),_:2},1032,["onClick"]),(0,n.Wm)(u,{title:"确定通过该短评吗？",hideIcon:"",onConfirm:e=>s.toReview(t.id,1)},{reference:(0,n.w5)((()=>[(0,n.Wm)(r,{type:"success",size:"small"},{default:(0,n.w5)((()=>[(0,n.Uk)("通过")])),_:1})])),_:2},1032,["onConfirm"]),(0,n.Wm)(u,{title:"确定拒绝该短评吗？",hideIcon:"",onConfirm:e=>s.toReview(t.id,2)},{reference:(0,n.w5)((()=>[(0,n.Wm)(r,{type:"danger",size:"small"},{default:(0,n.w5)((()=>[(0,n.Uk)("拒绝")])),_:1})])),_:2},1032,["onConfirm"])])]),(0,n._)("div",Re,[(0,n.Uk)((0,c.zw)(t.desc)+" ",1),(0,n._)("span",null,[(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Wm)(d)])),_:1}),(0,n._)("b",null,"("+(0,c.zw)(t.point.x)+","+(0,c.zw)(t.point.y)+")",1)])]),(0,n._)("div",Ue,[(0,n._)("img",{class:"u-avatar",src:t.avatar,alt:t.name},null,8,$e),(0,n._)("a",{href:s.authorLink(t.user_id),target:"_blank"},(0,c.zw)(t.name),9,Je)]),(0,n._)("div",Ne,"UpdatedAt: "+(0,c.zw)(s.formatTime(t.updated_at)),1)])))),128))]),(0,n.Wm)(m,{class:"m-pagination",background:"","page-size":l.per,layout:"prev, pager, next",total:l.total,"current-page":l.page,"onUpdate:currentPage":e[0]||(e[0]=t=>l.page=t),small:"","hide-on-single-page":"",onCurrentChange:s.load},null,8,["page-size","total","current-page","onCurrentChange"])])),_:1},8,["modelValue"])}var Oe=i(69876),Fe=i(42325);const He=[{label:"路线建议",value:"path",src:i(83723)},{label:"大量物资",value:"goods",src:i(93565)},{label:"少量物资",value:"small_goods",src:i(47614)},{label:"马匪刷新",value:"monster",src:i(42406)},{label:"洞穴入口",value:"cave",src:i(77324)}],Ye={0:"待审核",1:"已通过",2:"已拒绝"};function Ke(t,e="src"){var n;const a=t?null===(n=He.find((e=>e.value===t)))||void 0===n?void 0:n[e]:"";let l=i(83723);return"value"===e&&(l="path"),"label"===e&&(l="路线建议"),a||l}var Ae={name:"ReviewPoint",props:{visible:{type:Boolean,default:!1},map:{type:Number,required:!0}},emits:["update:visible","init","mark"],data(){return{loading:!1,list:[],per:6,page:1,total:0,legends:(0,Se.Xl)(He)}},computed:{...(0,Oe.rn)(V.o,["client"]),drawer:{get(){return this.visible},set(t){this.$emit("update:visible",t)}}},watch:{drawer:{immediate:!0,handler(t){t&&this.load()}}},methods:{authorLink:S.authorLink,formatTime:Fe.m,getPointInfo:Ke,toReview(t,e){this.loading=!0,nt(t,e).then((()=>{this.$message({type:"success",message:(1===e?"审核通过":"审核拒绝")+"成功"}),this.load(),this.$emit("init")})).finally((()=>{this.loading=!1}))},toMark(t){this.$emit("mark",{...t,isMark:!0})},load(){const t={client:this.client,map:this.map,per:this.per,page:this.page};this.loading=!0,G(t).then((t=>{var e,i,n,a;const l=(null===(e=t.data)||void 0===e||null===(i=e.data)||void 0===i?void 0:i.list)||[];this.list=l.map((t=>{var e,i;return{...t,avatar:t.point_author_info.user_avatar||Zt.Z.anonymous.avatar_origin,name:t.point_author_info.display_name,pointImg:this.getPointInfo(null===(e=t.meta)||void 0===e?void 0:e.type),pointName:this.getPointInfo(null===(i=t.meta)||void 0===i?void 0:i.type,"label")}})),this.total=(null===(n=t.data)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.total)||0}))},onClose(){this.drawer=!1}}};const Xe=(0,T.Z)(Ae,[["render",Ze]]);var Be=Xe;const Qe={class:"m-point-content"},Ge={class:"u-header"},ti={class:"u-info"},ei=["src","alt"],ii={class:"u-title"},ni={class:"u-content"},ai={class:"dialog-footer"};function li(t,e,i,a,l,s){const o=(0,n.up)("el-divider"),r=(0,n.up)("Comment"),u=(0,n.up)("el-button"),d=(0,n.up)("el-dialog");return(0,n.wg)(),(0,n.j4)(d,{title:s.title,class:"m-point-comment__dialog",width:"90%","destroy-on-close":"","close-on-click-modal":!1,modelValue:s.dialogVisible,"onUpdate:modelValue":e[1]||(e[1]=t=>s.dialogVisible=t),"before-close":s.handleClose},{footer:(0,n.w5)((()=>[(0,n._)("span",ai,[(0,n.Wm)(u,{onClick:e[0]||(e[0]=t=>s.dialogVisible=!1)},{default:(0,n.w5)((()=>[(0,n.Uk)("取 消")])),_:1})])])),default:(0,n.w5)((()=>[(0,n._)("div",Qe,[(0,n._)("div",Ge,[(0,n._)("div",ti,[(0,n._)("img",{src:i.point.pointImg,alt:i.point.pointName},null,8,ei),(0,n._)("span",ii,(0,c.zw)(i.point.pointName),1)])]),(0,n._)("div",ni,(0,c.zw)(i.point.desc),1)]),(0,n.Wm)(o,{"content-position":"left"},{default:(0,n.w5)((()=>[(0,n.Uk)("评论")])),_:1}),(0,n.Wm)(r,{id:s.id,category:"desert"},null,8,["id"])])),_:1},8,["title","modelValue","before-close"])}var si=i(72457),oi={name:"PointComment",props:{visible:{type:Boolean,default:!1},point:{type:Object,required:!0}},emits:["update:visible"],components:{Comment:si.Z},computed:{...(0,Oe.rn)(V.o,["client"]),title(){return"评论"},id(){return~~this.point.id},dialogVisible:{get(){return this.visible},set(t){this.$emit("update:visible",t)}}},methods:{handleClose(){this.dialogVisible=!1}}};const ri=(0,T.Z)(oi,[["render",li]]);var ui=ri,ci=JSON.parse('[{"mapId":296,"name":"龙门绝境","paths":[{"key":"1_x653_y140","x":653,"y":140},{"key":"2_x150_y92","x":150,"y":92},{"key":"3_x139_y214","x":139,"y":214},{"key":"4_x162_y550","x":162,"y":550},{"key":"5_x176_y542","x":176,"y":542},{"key":"6_x247_y79","x":247,"y":79},{"key":"7_x151_y365","x":151,"y":365},{"key":"8_x390_y77","x":390,"y":77},{"key":"9_x217_y79","x":217,"y":79},{"key":"10_x113_y224","x":113,"y":224}]},{"mapId":297,"name":"龙门绝境·夜","paths":[{"key":"1_x653_y140","x":653,"y":140},{"key":"2_x150_y92","x":150,"y":92},{"key":"3_x139_y214","x":139,"y":214},{"key":"4_x162_y550","x":162,"y":550},{"key":"5_x176_y542","x":176,"y":542},{"key":"6_x247_y79","x":247,"y":79},{"key":"7_x151_y365","x":151,"y":365},{"key":"8_x390_y77","x":390,"y":77},{"key":"9_x217_y79","x":217,"y":79},{"key":"10_x113_y224","x":113,"y":224}]},{"mapId":410,"name":"沧溟绝境","paths":[{"key":"a1_x144_y81","x":144,"y":81},{"key":"a2_x153_y206","x":153,"y":206},{"key":"a3_x216_y293","x":216,"y":293},{"key":"a4_x393_y143","x":393,"y":143},{"key":"a5_x502_y69","x":502,"y":69},{"key":"a6_x171_y471 ","x":171,"y":471},{"key":"a7_x151_y264","x":151,"y":264},{"key":"a8_x401_y135","x":401,"y":135},{"key":"a9_x138_y445","x":138,"y":445},{"key":"a10_x188_y118","x":188,"y":118}]},{"mapId":512,"name":"白龙绝境","paths":[{"key":"b1","x":150,"y":92},{"key":"b2","x":462,"y":97},{"key":"b3","x":145,"y":130},{"key":"b4","x":115,"y":420},{"key":"b5","x":530,"y":90},{"key":"b6","x":145,"y":125}]},{"mapId":532,"name":"天原绝境","paths":[{"key":"c1","x":120,"y":75},{"key":"c2","x":70,"y":275},{"key":"c3","x":-30,"y":20}]},{"mapId":645,"name":"天原绝境","paths":[{"key":"cr1","x":258,"y":204},{"key":"cr2","x":238,"y":258},{"key":"cr3","x":164,"y":488},{"key":"cr4","x":220,"y":395},{"key":"cr5","x":320,"y":320},{"key":"cr6","x":235,"y":280}]}]'),di=i(96486);const pi=(0,V.o)(),{__imgPath:mi}=i(89847);var gi={name:"CJIndex",components:{ReviewPoint:Be,PointComment:ui},data(){return{loading:!1,maps:[],map:null,mapPath:(0,Se.Xl)(ci),imgRoot:mi+"pve/desert/",pointMenuVisible:!1,contextMenuVisible:!1,contextMenuPosition:{x:0,y:0},contextMenuPositionSave:{x:0,y:0},showDialog:!1,points:[],legend:"",legendSize:30,legends:(0,Se.Xl)(He),statusMap:(0,Se.Xl)(Ye),pointForm:{point:{},type:"",desc:"",client:(0,V.o)().client},rules:{type:[{required:!0,message:"请选择类型",trigger:"change"}],desc:[{required:!0,message:"请输入短评",trigger:"blur"}]},btnLoading:!1,visiblePopId:null,statusFilter:"",markPoints:[],currentRightClickPoint:{},commentVisible:!1,commentPoint:{},isEditMode:!1}},computed:{reviewVisible:{get(){return pi.reviewVisible},set(t){pi.reviewVisible=t}},isLogin(){return Zt.Z.isLogin()},isEditor(){return Zt.Z.isEditor()},dialogTitle(){var t;return null!==(t=this.pointForm)&&void 0!==t&&t.id?"编辑标点":"新增标点"},visiblePop:{get(){return!!this.visiblePopId},set(t){this.visiblePopId=t}},paths(){var t;const e=(null===(t=this.mapPath.find((t=>t.mapId===this.map)))||void 0===t?void 0:t.paths)||[];return e.length?e.map((t=>({...t,url:`${this.imgRoot}${297===this.map?296:this.map}/${t.key}.png`}))):e},showPoints(){const t=pi.myPoints.filter((t=>1!==t.status)).concat(this.points,this.markPoints).filter((t=>!this.legend||t.meta.type===this.legend)).map((t=>{var e,i,n;return{...t,avatar:t.point_author_info.user_avatar||Zt.Z.anonymous.avatar_origin,name:t.point_author_info.display_name,belongToMe:~~(null===Zt.Z||void 0===Zt.Z||null===(e=Zt.Z.profile)||void 0===e?void 0:e.uid)===t.user_id,pointImg:this.getPointInfo(null===(i=t.meta)||void 0===i?void 0:i.type),pointName:this.getPointInfo(null===(n=t.meta)||void 0===n?void 0:n.type,"label"),post_author:t.user_id}}));return t},editPoint(){return pi.editPoint},delPointId(){return pi.delPointId}},watch:{reviewVisible(t){t||(this.markPoints=[],pi.myPoints=pi.myPoints.map((t=>(t.isMark=!1,t))))},isEditMode(t){t||this.cancelRightMenu()},map(t){pi.map=t},editPoint(t){this.toEdit(t)},delPointId(t){this.toDel(t)}},methods:{authorLink:S.authorLink,getLegendSrc(){var t;return this.legend&&(null===(t=this.legends.find((t=>t.value===this.legend)))||void 0===t?void 0:t.src)||""},toReview(t){const{id:e}=this.currentRightClickPoint;let i="通过";2===t&&(i="拒绝"),0===t&&(i="弃用"),this.$confirm(`确定要${i}该短评吗？`,"温馨提示",{confirmButtonText:`立即${void 0!==t?i:"删除"}`,cancelButtonText:"取消",type:"warning"}).then((()=>{this.loading=!0,nt(e,t).then((()=>{this.$message({type:"success",message:i+"成功"}),this.initData()})).finally((()=>{this.loading=!1}))})).catch((()=>{}))},cancelRightMenu(){this.pointMenuVisible=!1,this.contextMenuVisible=!1},toOpenComment(t){if(t)this.commentPoint=t;else{const t=this.currentRightClickPoint;if(1!==t.status)return this.$message({type:"warning",message:"当前标点尚未审核通过"});this.commentPoint=this.showPoints.find((e=>e.id===t.id))}this.commentVisible=!0},toMark(t){this.legend=t.meta.type;const e=pi.myPoints.findIndex((e=>e.id===t.id));var i;if(-1!==e)return void(pi.myPoints[e].isMark=!(null!==(i=pi.myPoints[e])&&void 0!==i&&i.isMark));const n=this.markPoints.findIndex((e=>e.id===t.id));-1===n?this.markPoints.push(t):this.markPoints.splice(n,1)},formatTime:Fe.m,mapChange(){this.statusFilter="",this.initData()},handlerPop(t){this.visiblePopId===t?this.visiblePopId=null:this.visiblePopId=t},getPointInfo:Ke,setLegend(t){this.legend===t.value?this.legend="":this.legend=t.value},legendChange(t){this.pointForm.id||(this.legend=t)},showMenu(t){t.preventDefault();const e=this.$refs.map.getBoundingClientRect(),i=e.width,n=e.height;if(this.contextMenuPosition={x:t.clientX-e.left,y:t.clientY-e.top},this.contextMenuPositionSave={x:t.clientX-e.left,y:t.clientY-e.top},"u-point__img"===t.target.className){const e=t.target.getAttribute("custom-data")?JSON.parse(t.target.getAttribute("custom-data")):{};return this.currentRightClickPoint=e,this.pointMenuVisible=!0,this.adjustMenuPosition(i,n),!1}this.pointMenuVisible=!1,this.isEditMode&&(this.contextMenuVisible=!0,this.adjustMenuPosition(i,n))},adjustMenuPosition(t,e){this.$nextTick((()=>{const i=this.$refs.contextMenu,n=i.getBoundingClientRect(),a=n.width,l=n.height,s=~~i.style.top.split("px")[0],o=~~i.style.left.split("px")[0],r=5;t-o-r<a&&(this.contextMenuPosition.x=this.contextMenuPositionSave.x-a),e-s-r<l&&(this.contextMenuPosition.y=this.contextMenuPositionSave.y-l)}))},menuItemClicked(t){if("add"===t){if(!Zt.Z.isLogin())return this.$message({type:"warning",message:"请先登录"});this.pointForm.type=this.legend,this.showDialog=!0}this.cancelRightMenu()},async getMapList(){const t=sessionStorage.getItem("cj_maps");if(t){var e;const i=JSON.parse(t);this.maps=i,this.map=(null===i||void 0===i||null===(e=i[0])||void 0===e?void 0:e.value)||null}else{var i;const t=await K(),{data:e}=t,n=[];for(let i in e)e[i].indexOf("绝境")>-1&&n.push({label:e[i],value:~~i});sessionStorage.setItem("cj_maps",JSON.stringify(n)),this.maps=n,this.map=(null===n||void 0===n||null===(i=n[0])||void 0===i?void 0:i.value)||null}},getMapImage(t){return`${mi}map/maps/map_${t}_0.png`},getPoints(){const t={client:(0,V.o)().client,map:this.map};B(t).then((t=>{var e;this.points=(null===(e=t.data)||void 0===e?void 0:e.data)||[]}))},getMyPoints(t){if(!Zt.Z.isLogin())return;const e={client:(0,V.o)().client,map:this.map};void 0===t&&null===t||(e.status=t),Q(e).then((t=>{var e;const i=(null===(e=t.data)||void 0===e?void 0:e.data)||[];pi.myPoints=i.map((t=>{var e,i;return{...t,pointImg:this.getPointInfo(null===(e=t.meta)||void 0===e?void 0:e.type),pointName:this.getPointInfo(null===(i=t.meta)||void 0===i?void 0:i.type,"label")}})),pi.originMyPoints=(0,di.cloneDeep)(pi.myPoints)}))},savePoint(){let t=(0,di.cloneDeep)(this.pointForm);t.meta={type:t.type},delete t.type;const e=this.pointForm.id;e?(t=(0,di.pick)(t,["map","point","meta","desc","client","status"]),t.status=0):(t.map=this.map,t.point=this.contextMenuPositionSave),this.btnLoading=!0;const i=e?it(t,e):tt(t);i.then((i=>{this.handlerPoint(e?{...t,id:e}:i.data.data,e)})).finally((()=>{this.btnLoading=!1}))},handlerPoint(t,e){var i,n;this.$notify({title:"成功",message:(e?"修改":"添加")+"成功，等待审核中...",type:"success"});const a={...t,pointImg:this.getPointInfo(null===(i=t.meta)||void 0===i?void 0:i.type),pointName:this.getPointInfo(null===(n=t.meta)||void 0===n?void 0:n.type,"label"),point_author_info:{user_avatar:Zt.Z.profile.avatar_origin,display_name:Zt.Z.profile.name}};if(e){const t=pi.myPoints.findIndex((t=>t.id===e));var l;if(-1!==t)a.user_id=null===(l=pi.myPoints.find((t=>t.id===e)))||void 0===l?void 0:l.user_id;pi.myPoints.splice(t,1,a)}else pi.myPoints.unshift(a);pi.originMyPoints=(0,di.cloneDeep)(pi.myPoints),this.legend="",this.onClose()},toEdit(t){t||(t=pi.myPoints.find((t=>t.id===this.currentRightClickPoint.id))),this.visiblePopId=null,this.pointForm={...(0,di.cloneDeep)(t),type:t.meta.type},this.showDialog=!0},toDel(t){this.visiblePopId=null,this.$confirm("确定要删除该短评吗？删除后不可恢复。","温馨提示",{confirmButtonText:"立即删除",cancelButtonText:"取消",type:"warning"}).then((()=>{et(t).then((()=>{pi.myPoints=pi.myPoints.filter((e=>e.id!==t)),pi.originMyPoints=(0,di.cloneDeep)(pi.myPoints),this.$notify({title:"成功",message:"删除成功",type:"success"})}))})).catch((()=>{}))},onCancel(){this.onClose()},onClose(){this.$refs.pointForm.clearValidate(),this.pointForm={point:{},meta:{type:"path"},desc:"",client:(0,V.o)().client},this.showDialog=!1},onConfirm(){this.$refs.pointForm.validate(((t,e)=>{t?this.savePoint():console.log("error submit!",e)}))},initData(){this.getPoints(),this.getMyPoints()}},mounted(){this.getMapList(),this.initData()}};const hi=(0,T.Z)(gi,[["render",Le]]);var vi=hi;const yi={class:"m-cj-extra"},ki={class:"m-extra-info"},_i={class:"m-extra-bottom"},fi={class:"m-extra-tabs"},wi=["onClick"],bi={class:"u-filter"},xi={class:"m-tab-content"};function Ci(t,e,i,a,l,s){const o=(0,n.up)("CJIntro"),r=(0,n.up)("el-icon"),u=(0,n.up)("el-option"),d=(0,n.up)("el-select"),p=(0,n.up)("el-button");return(0,n.wg)(),(0,n.iD)("div",yi,[(0,n._)("div",ki,[(0,n.Wm)(o)]),(0,n._)("div",_i,[(0,n._)("div",fi,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.tabs,(t=>((0,n.wg)(),(0,n.iD)("div",{class:(0,c.C_)(["u-tab",t.value===l.activeTab&&"is-active"]),key:t.value,onClick:e=>l.activeTab=t.value},[(0,n.Wm)(r,null,{default:(0,n.w5)((()=>[((0,n.wg)(),(0,n.j4)((0,n.LL)(t.icon)))])),_:2},1024),(0,n._)("b",null,(0,c.zw)(t.label),1)],10,wi)))),128)),(0,n._)("div",bi,["point"===l.activeTab?((0,n.wg)(),(0,n.j4)(d,{key:0,class:"u-select",modelValue:s.pointStatus,"onUpdate:modelValue":e[0]||(e[0]=t=>s.pointStatus=t),style:{width:"100px"}},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.statusList,(t=>((0,n.wg)(),(0,n.j4)(u,{label:t.label,value:t.value,key:t.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])):(0,n.kq)("",!0),"strategy"===l.activeTab?((0,n.wg)(),(0,n.j4)(p,{key:1,icon:"Plus",onClick:s.toPublish},{default:(0,n.w5)((()=>[(0,n.Uk)("发布攻略")])),_:1},8,["onClick"])):(0,n.kq)("",!0)])]),(0,n._)("div",xi,[s.currentComponent?((0,n.wg)(),(0,n.j4)((0,n.LL)(s.currentComponent),{key:0})):(0,n.kq)("",!0)])])])}const Pi={class:"m-cj-intro"},Di={class:"u-title"},Mi=(0,n._)("b",null,"背景特色",-1),Ii=["innerHTML"];function Wi(t,e,i,a,l,s){const o=(0,n.up)("Compass"),r=(0,n.up)("el-icon");return(0,n.wg)(),(0,n.iD)("div",Pi,[(0,n._)("div",Di,[(0,n.Wm)(r,{class:"u-tab-icon"},{default:(0,n.w5)((()=>[(0,n.Wm)(o)])),_:1}),Mi]),(0,n._)("div",{class:"u-info",innerHTML:s.getData()},null,8,Ii)])}const Li=(0,V.o)();var Si={name:"CJMapIntro",components:{},data:function(){return{data:(0,Se.Xl)([{id:296,name:"龙门绝境",setting:"<p>数百年前，鄯善国公主图兰凭借手中的烨阳刀、沙驰军和“十二飞沙”纵横西域。百年过后，秘宝再现。无数侠士前往大漠沙海，希望寻找到传说中的秘宝和失传绝学。</p>",feature:"<p>【驼铃】道具，使用后会在地图的某处出现 5 只移速过人的骆驼坐骑。队伍仅剩一人时，可通过采集叹息风碑掉落的“流萤返魂花”复活队友，仅能随机复活一人，且该道具无法在决赛圈中使用。</p>"},{id:297,name:"龙门绝境·夜",setting:"<p>数百年前，鄯善国公主图兰凭借手中的烨阳刀、沙驰军和“十二飞沙”纵横西域。百年过后，秘宝再现。无数侠士前往大漠沙海，希望寻找到传说中的秘宝和失传绝学。</p>",feature:"<p>【驼铃】道具，使用后会在地图的某处出现 5 只移速过人的骆驼坐骑。队伍仅剩一人时，可通过采集叹息风碑掉落的“流萤返魂花”复活队友，仅能随机复活一人，且该道具无法在决赛圈中使用。</p>"},{id:410,name:"沧溟绝境",setting:"<p>大定元年,皇族宇文氏遭屠。香老人次子与师妹死于九天初代苍天君方有崖之手。</p>\n                            <p>香老人痛心之余,欲将宇文乾雅家眷后裔护送至苗疆,却遭五仙教拒绝。遂夺走《毒蛊经》，自立香巫教,率弟子前往东海,漂流至一荒岛。再度凝望中原时，苍茫大海难以逾越,便将岛名改为沧溟。直至因缘际会下，探知仇人踪迹，率弟子前往东海，再未归来……</p>\n                            <p>原来香老人不敌方有崖，九死一生漂流至东海之东的一片群岛。再度凝望中原时，苍茫大海难以逾越，便将岛名改为沧溟，伤重不治后离去。其女曦凰更擅长蛊惑人心，整个岛上的住民尽数归于香巫教，并被灌输向苍天君复仇的遗志。</p>\n                            <p>就在曦凰准备好重新集结势力，欲再度进军东海时，触动了岛上尘封的祭坛，只见火山喷发引发海啸，让整个沧溟岛如它的名字一般，失落在漫天的水龙卷中……</p>",feature:"<p>全新的海龙卷的加入令吃鸡的战场变得更加变幻莫测，与以往固定缩小的沙尘风圈不同，“沧溟绝境”的海龙卷不仅仅随着时间的推移而不断缩小，在其缩小的同时，还将随机的进行移动！优化复活机制，拾取【九转还魂草】使用可复活指定队友。使用道具【凌波草】可在水面行走。</p>"},{id:512,name:"白龙绝境",setting:"<p>在很长一段时间里，乌蒙贵的得力手下嗥汐，一直在西南深林中继续有关尸人的实验。当嗥汐敏锐觉察到因中原陷入战乱，南诏第五代王阁罗凤趁此机会不断扩张领土时，她觉得这是一个值得利用的好机会。</p>\n                            <p>楫汐以用蛊术为阁罗凤挑选忠诚勇士为名，获得了阁罗凤的准许，在白龙口地区，正大光明开辟了一片杀戮之地。南诏的神兵、密宝、灵药，吸引众多武功不俗的侠客、身怀绝技的异人，他们在这一片寂静的深林中，展开厮杀，欲夺魁首。</p>\n                            <p>而握汐的腐沼毒雾总悄无声息得将所有人包围......有些人比赛之初便被淘汰遣返，有些人夺魁后成为南诏之臣,有些人潜入其中仅为刺探情报，有些人夺取神兵密宝后潇洒而去，还有些人被毒雾侵蚀之后便消失得无影无踪……</p>",feature:"<p>“白龙绝境”准备期间，侠士可从地图中一览所有航线，并可主动点击选择其中一个航线出发，总计6条航线可供选择。小队内所有侠士将默认跟随队长选择，也可手动勾选切换，每位侠士均可预览所有队友选择的航线。</p>\n                            <p>特有无间死斗玩法，每位侠士进入“白龙绝境”后都会携带1个绑定的“无间行者信物”。所有已重伤且自身拥有“无间行者信物”的侠士均可获得参与“无间死斗”的资格。</p>\n                            <p>全局“白龙绝境”共开启5场“无间死斗”。开启时，所有已重伤侠士均可消耗自身拥有的“无间行者信物”复活进入“无间死斗”玩法当中。</p>\n                            <p>进入“无间死斗”后，侠士将保留组队关系，开启淘汰乱斗。当淘汰人数达到场内人数一半（向上取整)，或在“无间死斗”场内仅剩一支小队未被淘汰时，未被淘汰的侠士将恢复满状态,并将随机在其任一存活队友身边返回“白龙绝境”，而“白龙绝境”中无存活队友的回归侠士将在地图中未受到“腐沼毒雾”侵袭的随机位置返回。</p>\n                            <p>“无间死斗”期间将随时间的推进出现“蚀骨怨寒”并不断增强，面场上侠士将不受“白龙绝境”中“腐沼毒雾”的影响。</p>"},{id:532,name:"天原绝境",setting:"<p>长自山的东北冰原，地形复杂，天气变幻无常，若与狂风骤雪正面相遇，哪怕是内力深厚的武林人士也难以招架。</p>\n                        <p>柳家、独孤家、长孙氏、绳池剑宗、武家恩怨颇深，历年来几家弟子若要下山历练，都需前往此地。绳池剑宗的两位与宗主同辈分的叔祖“卷丘”朴太闲与“大翅璐剑”崔路南在下山之时也被霸刀山庄庄主柳风骨捉到，遗恨于吞吴刀下。但在这里历练之后的生还者多半能有大进境，也算一块历练宝地。</p>\n                        <p>这片冰原自远古以来便生产天材地宝，如老参丹株、精铁稀矿，又因几家恩仇对决，经常无可避免将来此寻宝的外人卷入，渐渐为北地武林所知，被北地武林称为“绝境天原”，等闲之人不敢轻易踏入。</p>",feature:"<p>冰天雪地的“天原绝境”为侠士们带来了诸多考验，其中最明显的当属温度系统!侠士在非战斗状态下静止不动时将降低自身温度，需保持移动或战斗状态下才能提升温度。在自身温度低于正常值时，将使自身出招变得缓慢，在失温后会逐渐扣减气血。</p>\n                        <p>为了保持温暖，侠士可使用全新道具【燧石】点燃场景内的【干草堆】烤火取暖恢复温度，或可使用【火把】带来些微暖意。但用火需谨慎，【燧石】甚至还可点燃其他侠士哦!而烤火时也请留心风雪来袭，暴风雪过境时小小的取暖篝火可是会熄灭的!<</p>\n                        <p>此外“天原绝境”环境极为恶劣，还有风雪席卷令人难以抵挡。当侠士直面风雪时，温度将会下降，在持续受到凤雪袭击还将削减少量气血上限，在离开风雪圈后将逐渐恢复，因此还请多加注意!而在行至山谷地区时，还可能会遇到强劲的山谷风推动侠士强制移动!</p>\n                        <p>马匪刷新分为红蓝两种，击败拾取其中一种物资后将无法拾取另一种的物资。马匪物资会掉落坐骑【战象】，交互后可乘骑战象使用3种战象技能。初始会赠送【玄冰之息】使用后2分钟内可免死一次，开局10分钟后无法使用。</p>"},{id:645,name:"洱海绝境",setting:"<p>乾元二年，南诏王召开武林大会，香巫教借着沙壹之宾首席的乌蒙贵与南诏王达成了某些利益的置换。</p>\n                            <p>随后，南诏王将苍山洱海的部分地区辟出，召八方豪杰前来角逐，又许下重奖予角逐至最后的勇士，一时间洱海刀光剑影难绝……</p>",feature:"<p>80位侠士单排参加，所有侠士在游戏内名称均为未知侠士，禁用近聊频道。</p>\n                            <p>◆每场战斗将会有三次【南诏王的召唤】，开始前均会发布全图公告召集侠士参与。</p>\n                            <p>◇处于脱战状态的侠士届时可直接点击使用背包中自动获得的【南诏王的信物】，进入决斗场地准备作战。</p>\n                            <p>从【南诏王的召唤】中存活胜出的侠士们不仅可以将其中拾获的稀有装备直接带到【洱海绝境】继续使用，而且将会获得持续一段时间的隐身与毒圈免疫效果,期间攻击他人将立即失效。</p>\n                            <p>进入场景自动获得【步步为营】和【洱海飞爪】，侠士提前在某处放置一个5分钟内隐形的【步步为营】，自身身受重伤时可立即在这处复活并获得一套基础绿色品质装备。</p>\n                            <p>【步步为营】为一次性道具，且无法于【南诏王的召唤】中使用。【洱海绝境】地势复杂，既有崇山峻岭悬崖陡立，也有深潭幽幽岩谷赤红。【洱海飞爪】可充能3层使用，助你千里追击,飞掠迎敌!</p>\n                            <p>该地图无需击溃马匪，刷新倒计时结束后即可拾取【劫掠的货物】!内含橙色品质装备与神秘道具，可助侠士一臂之力。</p>\n                            <p>战斗越临近终章，则【劫掠的货物】价值越高!是逆风翻盘还是如虎添翼?或许你最需要的东西就在这里!</p>"}])}},computed:{map(){return Li.map}},methods:{getData(){const t=this.data.find((t=>t.id===this.map))||{};return t.setting+t.feature}}};const Vi=(0,T.Z)(Si,[["render",Wi]]);var zi=Vi;const ji={class:"m-cj-strategy"},Ti={key:0,class:"m-strategy-list"};function qi(t,e,i,a,l,s){const o=(0,n.up)("ListItem"),r=(0,n.up)("el-alert"),u=(0,n.up)("el-pagination"),c=(0,n.Q2)("loading");return(0,n.wy)(((0,n.wg)(),(0,n.iD)("div",ji,[l.list.length?((0,n.wg)(),(0,n.iD)("div",Ti,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.list,(t=>((0,n.wg)(),(0,n.j4)(o,{key:t.post_id,item:t,order:s.params.order},null,8,["item","order"])))),128))])):((0,n.wg)(),(0,n.j4)(r,{key:1,effect:"dark",class:"m-strategy-null",title:"没有找到相关条目",type:"info",center:"","show-icon":""})),(0,n.Wm)(u,{class:"m-strategy-pages",background:"",layout:"total, prev, pager, next",total:l.total,"current-page":l.page,"page-size":l.per,small:"","hide-on-single-page":"",onCurrentChange:s.changePage},null,8,["total","current-page","page-size","onCurrentChange"])])),[[c,l.loading]])}const Ri={class:"u-item"},Ui=["href"],$i=["src","alt"],Ji=["href","target"],Ni={class:"u-zlp"},Ei={class:"u-misc"},Zi={class:"u-date"},Oi={key:0},Fi={key:1};function Hi(t,e,i,a,l,s){const o=(0,n.up)("Clock"),r=(0,n.up)("el-icon");return(0,n.wg)(),(0,n.iD)("div",Ri,[(0,n._)("h2",{class:(0,c.C_)(["u-post",{isSticky:i.item.sticky}])},[(0,n._)("a",{class:"u-author",href:s.authorLink(i.item.post_author),target:"_blank"},[(0,n._)("img",{class:"u-author-avatar",src:s.showAvatar(i.item.author_info),alt:s.showNickname(i.item.author_info)},null,8,$i)],8,Ui),(0,n._)("a",{class:"u-title",style:(0,c.j5)(s.showHighlight(i.item.color)),href:s.postLink(i.item.ID),target:t.target},[(0,n._)("i",Ni,(0,c.zw)(i.item.zlp||"未知版本"),1),(0,n.Uk)(" "+(0,c.zw)(i.item.post_title||"无标题"),1)],12,Ji)],2),(0,n._)("div",Ei,[(0,n._)("span",Zi,[(0,n.Wm)(r,null,{default:(0,n.w5)((()=>[(0,n.Wm)(o)])),_:1}),"update"==i.order?((0,n.wg)(),(0,n.iD)("time",Oi,(0,c.zw)(s.dateFormat(i.item.post_modified)),1)):((0,n.wg)(),(0,n.iD)("time",Fi,(0,c.zw)(s.dateFormat(i.item.post_date)),1))])])])}var Yi=i(23910),Ki=i(26060);const{__Root:Ai,__OriginRoot:Xi,__imgPath:Bi}=F;var Qi={name:"ListItem",props:["item","order","caller"],components:{},data:function(){return{target:(0,S.buildTarget)()}},computed:{client(){var t;return null===(t=this.item)||void 0===t?void 0:t.client},rootLink(){return"std"!==this.client?Xi:Ai}},watch:{},methods:{getBanner:function(t){return t.post_banner?(0,S.showBanner)(t.post_banner):Bi+"image/fb_map_thumbnail/null.png"},format:function(t,e){var i;let n=null===t||void 0===t||null===(i=t.post_meta)||void 0===i?void 0:i[e];return n&&n.length?n:["-"]},addTopic(t){this.$router.push({query:{topic:t}})},postLink(t){return(0,S.getLink)("bps",t)},authorLink:S.authorLink,showHighlight(t){return t?`color:${t};font-weight:600;`:""},showMark:function(t){return Yi.I[t]||t},showAvatar:function(t){return(0,S.showAvatar)(null===t||void 0===t?void 0:t.user_avatar)},showNickname:function(t){return(null===t||void 0===t?void 0:t.display_name)||"匿名"},dateFormat:function(t){return(0,Ki.s2)(new Date(t))}}};const Gi=(0,T.Z)(Qi,[["render",Hi]]);var tn=Gi,en={name:"CJStrategy",components:{ListItem:tn},data(){return{page:1,pages:1,per:10,total:0,loading:!1,list:[]}},computed:{params(){return{page:this.page,per:this.per}},query(){return{subtype:this.$route.query.subtype,client:(0,V.o)().client,order:"update"}}},watch:{query:{deep:!0,handler:function(){this.page=1,this.load()}}},methods:{load(t=!1){const e={...(0,di.cloneDeep)(this.params),...(0,di.cloneDeep)(this.query)};e.subtype?e.sticky=1:delete e.subtype,this.loading=!0,A(e).then((e=>{var i,n,a,l,s,o,r,u;t?this.list=this.list.concat(null===(s=e.data)||void 0===s||null===(o=s.data)||void 0===o?void 0:o.list):this.list=null===(r=e.data)||void 0===r||null===(u=r.data)||void 0===u?void 0:u.list;this.total=null===(i=e.data)||void 0===i||null===(n=i.data)||void 0===n?void 0:n.total,this.pages=null===(a=e.data)||void 0===a||null===(l=a.data)||void 0===l?void 0:l.pages})).finally((()=>{this.loading=!1}))},changePage(t){this.page=t,this.load()},appendPage(){this.page++,this.load(!0)}},mounted(){this.load()}};const nn=(0,T.Z)(en,[["render",qi]]);var an=nn;const ln={class:"m-my-points"},sn={class:"u-header"},on={class:"u-title"},rn=["src","alt"],un={class:"u-op"},cn={class:"u-content"},dn={class:"u-time"},pn={key:1,class:"u-no-data"},mn={key:1,class:"u-no-data"};function gn(t,e,i,a,l,s){const o=(0,n.up)("el-tag"),r=(0,n.up)("el-button");return(0,n.wg)(),(0,n.iD)("div",ln,[s.originMyPoints.length?((0,n.wg)(),(0,n.iD)(n.HY,{key:0},[s.myPoints.length?((0,n.wg)(!0),(0,n.iD)(n.HY,{key:0},(0,n.Ko)(s.myPoints,(t=>((0,n.wg)(),(0,n.iD)("div",{class:"u-point-item",key:t.id},[(0,n._)("div",sn,[(0,n._)("div",on,[(0,n._)("img",{src:t.pointImg,alt:t.pointName},null,8,rn),(0,n._)("span",null,(0,c.zw)(t.pointName),1),(0,n.Wm)(o,{size:"small",effect:"dark",type:1===t.status?"success":2===t.status?"danger":""},{default:(0,n.w5)((()=>[(0,n.Uk)((0,c.zw)(l.statusMap[t.status]),1)])),_:2},1032,["type"])]),(0,n._)("div",un,[(0,n.Wm)(r,{type:"primary",text:"",onClick:e=>s.toEdit(t)},{default:(0,n.w5)((()=>[(0,n.Uk)("编辑")])),_:2},1032,["onClick"]),(0,n.Wm)(r,{type:"danger",text:"",onClick:e=>s.toDel(t.id)},{default:(0,n.w5)((()=>[(0,n.Uk)("删除")])),_:2},1032,["onClick"])])]),(0,n._)("div",cn,(0,c.zw)(t.desc),1),(0,n._)("div",dn,"UpdatedAt: "+(0,c.zw)(s.formatTime(t.updated_at)),1)])))),128)):((0,n.wg)(),(0,n.iD)("span",pn,"该分类下并无数据。"))],64)):((0,n.wg)(),(0,n.iD)("span",mn,"请打开编辑模式后，右键添加您的标点。"))])}const hn=(0,V.o)();var vn={name:"CJPoints",data(){return{statusMap:(0,Se.Xl)(Ye)}},computed:{statusFilter(){return hn.myPointsStatus},myPoints(){return hn.myPoints},originMyPoints(){return hn.originMyPoints}},watch:{statusFilter(t){this.statusChange(t)}},methods:{formatTime:Fe.m,statusChange(t){hn.myPoints=""!==t?hn.originMyPoints.filter((e=>e.status===~~t)):hn.originMyPoints},toEdit(t){hn.editPoint=t},toDel(t){hn.delPointId=t}}};const yn=(0,T.Z)(vn,[["render",gn]]);var kn=yn;const _n=(0,V.o)();var fn={name:"CJExtra",components:{CJStrategy:an,CJIntro:zi,CJPoints:kn},data(){return{activeTab:"point",statusMap:(0,Se.Xl)(Ye),tabs:[{label:"我的标点",value:"point",icon:"Location",component:"CJPoints"},{label:"吃鸡攻略",value:"strategy",icon:"Collection",component:"CJStrategy"}]}},computed:{pointStatus:{get(){return _n.myPointsStatus},set(t){_n.myPointsStatus=t}},client(){return _n.client},currentComponent(){var t;return(null===(t=this.tabs.find((t=>t.value===this.activeTab)))||void 0===t?void 0:t.component)||""},statusList(){const t=[{value:"",label:"全部"}];for(const[e,i]of Object.entries(this.statusMap))t.push({value:e,label:i});return t}},methods:{toPublish(){const t=(0,S.publishLink)("pvp");window.open(t,"_blank")}}};const wn=(0,T.Z)(fn,[["render",Ci]]);var bn=wn,xn={name:"CJ",components:{DarkLayout:Yt,CJIndex:vi,CJExtra:bn},data:function(){return{}},computed:{},methods:{},mounted(){}};const Cn=(0,T.Z)(xn,[["render",l],["__scopeId","data-v-009ba4f0"]]);var Pn=Cn},77324:function(t,e,i){t.exports=i.p+"img/cave.e8beb1ac.svg"},93565:function(t,e,i){t.exports=i.p+"img/goods.790b4798.svg"},42406:function(t,e,i){t.exports=i.p+"img/monster.a6192413.svg"},83723:function(t,e,i){t.exports=i.p+"img/path.f3250ff1.svg"},47614:function(t,e,i){t.exports=i.p+"img/small_goods.4201fc8a.svg"},45522:function(t,e,i){t.exports=i.p+"img/logo.0460842a.svg"}}]);
//# sourceMappingURL=126.a8f89126.js.map